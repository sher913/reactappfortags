{"ast":null,"code":"/*! SearchBuilder 1.0.1\n * Â©2020 SpryMedia Ltd - datatables.net/license/mit\n */\n(function () {\n  'use strict';\n\n  var $$2;\n  var dataTable$2;\n  var moment = window.moment;\n  var luxon = window.luxon;\n  /**\n   * Sets the value of jQuery for use in the file\n   *\n   * @param jq the instance of jQuery to be set\n   */\n\n  function setJQuery$2(jq) {\n    $$2 = jq;\n    dataTable$2 = jq.fn.dataTable;\n  }\n  /**\n   * The Criteria class is used within SearchBuilder to represent a search criteria\n   */\n\n\n  var Criteria = function () {\n    function Criteria(table, opts, topGroup, index, depth) {\n      var _this = this;\n\n      if (index === void 0) {\n        index = 0;\n      }\n\n      if (depth === void 0) {\n        depth = 1;\n      } // Check that the required version of DataTables is included\n\n\n      if (!dataTable$2 || !dataTable$2.versionCheck || !dataTable$2.versionCheck('1.10.0')) {\n        throw new Error('SearchPane requires DataTables 1.10 or newer');\n      }\n\n      this.classes = $$2.extend(true, {}, Criteria.classes); // Get options from user and any extra conditions/column types defined by plug-ins\n\n      this.c = $$2.extend(true, {}, Criteria.defaults, $$2.fn.dataTable.ext.searchBuilder, opts);\n      var i18n = this.c.i18n;\n      this.s = {\n        condition: undefined,\n        conditions: {},\n        data: undefined,\n        dataIdx: -1,\n        dataPoints: [],\n        dateFormat: false,\n        depth: depth,\n        dt: table,\n        filled: false,\n        index: index,\n        topGroup: topGroup,\n        type: '',\n        value: []\n      };\n      this.dom = {\n        buttons: $$2('<div/>').addClass(this.classes.buttonContainer),\n        condition: $$2('<select disabled/>').addClass(this.classes.condition).addClass(this.classes.dropDown).addClass(this.classes.italic).attr('autocomplete', 'hacking'),\n        conditionTitle: $$2('<option value=\"\" disabled selected hidden/>').text(this.s.dt.i18n('searchBuilder.condition', i18n.condition)),\n        container: $$2('<div/>').addClass(this.classes.container),\n        data: $$2('<select/>').addClass(this.classes.data).addClass(this.classes.dropDown).addClass(this.classes.italic),\n        dataTitle: $$2('<option value=\"\" disabled selected hidden/>').text(this.s.dt.i18n('searchBuilder.data', i18n.data)),\n        defaultValue: $$2('<select disabled/>').addClass(this.classes.value).addClass(this.classes.dropDown).addClass(this.classes.select),\n        \"delete\": $$2('<button>&times</button>').addClass(this.classes[\"delete\"]).addClass(this.classes.button).attr('title', this.s.dt.i18n('searchBuilder.deleteTitle', i18n.deleteTitle)).attr('type', 'button'),\n        // eslint-disable-next-line no-useless-escape\n        left: $$2('<button>\\<</button>').addClass(this.classes.left).addClass(this.classes.button).attr('title', this.s.dt.i18n('searchBuilder.leftTitle', i18n.leftTitle)).attr('type', 'button'),\n        // eslint-disable-next-line no-useless-escape\n        right: $$2('<button>\\></button>').addClass(this.classes.right).addClass(this.classes.button).attr('title', this.s.dt.i18n('searchBuilder.rightTitle', i18n.rightTitle)).attr('type', 'button'),\n        value: [$$2('<select disabled/>').addClass(this.classes.value).addClass(this.classes.dropDown).addClass(this.classes.italic).addClass(this.classes.select)],\n        valueTitle: $$2('<option value=\"--valueTitle--\" selected/>').text(this.s.dt.i18n('searchBuilder.value', i18n.value))\n      }; // If the greyscale option is selected then add the class to add the grey colour to SearchBuilder\n\n      if (this.c.greyscale) {\n        $$2(this.dom.data).addClass(this.classes.greyscale);\n        $$2(this.dom.condition).addClass(this.classes.greyscale);\n        $$2(this.dom.defaultValue).addClass(this.classes.greyscale);\n\n        for (var _i = 0, _a = this.dom.value; _i < _a.length; _i++) {\n          var val = _a[_i];\n          $$2(val).addClass(this.classes.greyscale);\n        }\n      } // For responsive design, adjust the criterias properties on the following events\n\n\n      this.s.dt.on('draw.dtsp', function () {\n        _this._adjustCriteria();\n      });\n      this.s.dt.on('buttons-action', function () {\n        _this._adjustCriteria();\n      });\n      $$2(window).on('resize.dtsp', dataTable$2.util.throttle(function () {\n        _this._adjustCriteria();\n      }));\n\n      this._buildCriteria();\n\n      return this;\n    }\n    /**\n     * Adds the left button to the criteria\n     */\n\n\n    Criteria.prototype.updateArrows = function (hasSiblings, redraw) {\n      if (hasSiblings === void 0) {\n        hasSiblings = false;\n      }\n\n      if (redraw === void 0) {\n        redraw = true;\n      } // Empty the container and append all of the elements in the correct order\n\n\n      $$2(this.dom.container).empty().append(this.dom.data).append(this.dom.condition).append(this.dom.value[0]);\n      this.setListeners(); // Trigger the inserted events for the value elements as they are inserted\n\n      $$2(this.dom.value[0]).trigger('dtsb-inserted');\n\n      for (var i = 1; i < this.dom.value.length; i++) {\n        $$2(this.dom.container).append(this.dom.value[i]);\n        $$2(this.dom.value[i]).trigger('dtsb-inserted');\n      } // If this is a top level criteria then don't let it move left\n\n\n      if (this.s.depth > 1) {\n        $$2(this.dom.buttons).append(this.dom.left);\n      } // If the depthLimit of the query has been hit then don't add the right button\n\n\n      if ((this.c.depthLimit === false || this.s.depth < this.c.depthLimit) && hasSiblings) {\n        $$2(this.dom.buttons).append(this.dom.right);\n      } else {\n        $$2(this.dom.right).remove();\n      }\n\n      $$2(this.dom.buttons).append(this.dom[\"delete\"]);\n      $$2(this.dom.container).append(this.dom.buttons);\n\n      if (redraw) {\n        // A different combination of arrows and selectors may lead to a need for responsive to be triggered\n        this._adjustCriteria();\n      }\n    };\n    /**\n     * Destroys the criteria, removing listeners and container from the dom\n     */\n\n\n    Criteria.prototype.destroy = function () {\n      // Turn off listeners\n      $$2(this.dom.data).off('.dtsb');\n      $$2(this.dom.condition).off('.dtsb');\n      $$2(this.dom[\"delete\"]).off('.dtsb');\n\n      for (var _i = 0, _a = this.dom.value; _i < _a.length; _i++) {\n        var val = _a[_i];\n        $$2(val).off('.dtsb');\n      } // Remove container from the dom\n\n\n      $$2(this.dom.container).remove();\n    };\n    /**\n     * Passes in the data for the row and compares it against this single criteria\n     *\n     * @param rowData The data for the row to be compared\n     * @returns boolean Whether the criteria has passed\n     */\n\n\n    Criteria.prototype.search = function (rowData, rowIdx) {\n      var condition = this.s.conditions[this.s.condition];\n\n      if (this.s.condition !== undefined && condition !== undefined) {\n        var filter = rowData[this.s.dataIdx]; // This check is in place for if a custom decimal character is in place\n\n        if (this.s.type.indexOf('num') !== -1 && (this.s.dt.settings()[0].oLanguage.sDecimal !== '' || this.s.dt.settings()[0].oLanguage.sThousands !== '')) {\n          var splitRD = [rowData[this.s.dataIdx]];\n\n          if (this.s.dt.settings()[0].oLanguage.sDecimal !== '') {\n            splitRD = rowData[this.s.dataIdx].split(this.s.dt.settings()[0].oLanguage.sDecimal);\n          }\n\n          if (this.s.dt.settings()[0].oLanguage.sThousands !== '') {\n            for (var i = 0; i < splitRD.length; i++) {\n              splitRD[i] = splitRD[i].replace(this.s.dt.settings()[0].oLanguage.sThousands, ',');\n            }\n          }\n\n          filter = splitRD.join('.');\n        } // If orthogonal data is in place we need to get it's values for searching\n\n\n        if (this.c.orthogonal.search !== 'filter') {\n          var settings = this.s.dt.settings()[0];\n          filter = settings.oApi._fnGetCellData(settings, rowIdx, this.s.dataIdx, typeof this.c.orthogonal === 'string' ? this.c.orthogonal : this.c.orthogonal.search);\n        }\n\n        if (this.s.type === 'array') {\n          // Make sure we are working with an array\n          if (!Array.isArray(filter)) {\n            filter = [filter];\n          }\n\n          filter.sort();\n\n          for (var _i = 0, filter_1 = filter; _i < filter_1.length; _i++) {\n            var filt = filter_1[_i];\n\n            if (filt) {\n              filt = filt.replace(/[\\r\\n\\u2028]/g, ' ');\n            }\n          }\n        } else if (filter !== null) {\n          filter = filter.replace(/[\\r\\n\\u2028]/g, ' ');\n        }\n\n        if (this.s.type.indexOf('html') !== -1) {\n          filter = filter.replace(/(<([^>]+)>)/ig, '');\n        } // Not ideal, but jqueries .val() returns an empty string even\n        // when the value set is null, so we shall assume the two are equal\n\n\n        if (filter === null) {\n          filter = '';\n        }\n\n        return condition.search(filter, this.s.value, this);\n      }\n    };\n    /**\n     * Gets the details required to rebuild the criteria\n     */\n\n\n    Criteria.prototype.getDetails = function () {\n      var value = this.s.value; // This check is in place for if a custom decimal character is in place\n\n      if (this.s.type.indexOf('num') !== -1 && (this.s.dt.settings()[0].oLanguage.sDecimal !== '' || this.s.dt.settings()[0].oLanguage.sThousands !== '')) {\n        for (var i = 0; i < this.s.value.length; i++) {\n          var splitRD = [this.s.value[i].toString()];\n\n          if (this.s.dt.settings()[0].oLanguage.sDecimal !== '') {\n            splitRD = this.s.value[i].split(this.s.dt.settings()[0].oLanguage.sDecimal);\n          }\n\n          if (this.s.dt.settings()[0].oLanguage.sThousands !== '') {\n            for (var j = 0; j < splitRD.length; j++) {\n              splitRD[j] = splitRD[j].replace(this.s.dt.settings()[0].oLanguage.sThousands, ',');\n            }\n          }\n\n          this.s.value[i] = splitRD.join('.');\n        }\n      }\n\n      return {\n        condition: this.s.condition,\n        data: this.s.data,\n        value: value\n      };\n    };\n    /**\n     * Getter for the node for the container of the criteria\n     *\n     * @returns JQuery<HTMLElement> the node for the container\n     */\n\n\n    Criteria.prototype.getNode = function () {\n      return this.dom.container;\n    };\n    /**\n     * Populates the criteria data, condition and value(s) as far as has been selected\n     */\n\n\n    Criteria.prototype.populate = function () {\n      this._populateData(); // If the column index has been found attempt to select a condition\n\n\n      if (this.s.dataIdx !== -1) {\n        this._populateCondition(); // If the condittion has been found attempt to select the values\n\n\n        if (this.s.condition !== undefined) {\n          this._populateValue();\n        }\n      }\n    };\n    /**\n     * Rebuilds the criteria based upon the details passed in\n     *\n     * @param loadedCriteria the details required to rebuild the criteria\n     */\n\n\n    Criteria.prototype.rebuild = function (loadedCriteria) {\n      // Check to see if the previously selected data exists, if so select it\n      var foundData = false;\n      var dataIdx;\n\n      this._populateData(); // If a data selection has previously been made attempt to find and select it\n\n\n      if (loadedCriteria.data !== undefined) {\n        var italic_1 = this.classes.italic;\n        var data_1 = this.dom.data;\n        $$2(this.dom.data).children('option').each(function () {\n          if ($$2(this).text() === loadedCriteria.data) {\n            $$2(this).attr('selected', true);\n            $$2(data_1).removeClass(italic_1);\n            foundData = true;\n            dataIdx = $$2(this).val();\n          }\n        });\n      } // If the data has been found and selected then the condition can be populated and searched\n\n\n      if (foundData) {\n        this.s.data = loadedCriteria.data;\n        this.s.dataIdx = dataIdx;\n        this.c.orthogonal = this._getOptions().orthogonal;\n        $$2(this.dom.dataTitle).remove();\n\n        this._populateCondition();\n\n        $$2(this.dom.conditionTitle).remove();\n        var condition_1; // Check to see if the previously selected condition exists, if so select it\n\n        $$2(this.dom.condition).children('option').each(function () {\n          if (loadedCriteria.condition !== undefined && $$2(this).val() === loadedCriteria.condition && typeof loadedCriteria.condition === 'string') {\n            $$2(this).attr('selected', true);\n            condition_1 = $$2(this).val();\n          }\n        });\n        this.s.condition = condition_1; // If the condition has been found and selected then the value can be populated and searched\n\n        if (this.s.condition !== undefined) {\n          $$2(this.dom.conditionTitle).remove();\n          $$2(this.dom.condition).removeClass(this.classes.italic);\n\n          this._populateValue(loadedCriteria);\n        } else {\n          $$2(this.dom.conditionTitle).prependTo(this.dom.condition).attr('selected', true);\n        }\n      }\n    };\n    /**\n     * Sets the listeners for the criteria\n     */\n\n\n    Criteria.prototype.setListeners = function () {\n      var _this = this;\n\n      $$2(this.dom.data).unbind('input change').on('input change', function () {\n        $$2(_this.dom.dataTitle).attr('selected', false);\n        $$2(_this.dom.data).removeClass(_this.classes.italic);\n        _this.s.dataIdx = $$2(_this.dom.data).children('option:selected').val();\n        _this.s.data = $$2(_this.dom.data).children('option:selected').text();\n        _this.c.orthogonal = _this._getOptions().orthogonal; // When the data is changed, the values in condition and value may also change so need to renew them\n\n        _this._clearCondition();\n\n        _this._clearValue();\n\n        _this._populateCondition(); // If this criteria was previously active in the search then\n        //  remove it from the search and trigger a new search\n\n\n        if (_this.s.filled) {\n          _this.s.filled = false;\n\n          _this.s.dt.draw();\n\n          _this.setListeners();\n        }\n\n        _this.s.dt.state.save();\n      });\n      $$2(this.dom.condition).unbind('input change').on('input change', function () {\n        $$2(_this.dom.conditionTitle).attr('selected', false);\n        $$2(_this.dom.condition).removeClass(_this.classes.italic);\n        var condDisp = $$2(_this.dom.condition).children('option:selected').val(); // Find the condition that has been selected and store it internally\n\n        for (var _i = 0, _a = Object.keys(_this.s.conditions); _i < _a.length; _i++) {\n          var cond = _a[_i];\n\n          if (cond === condDisp) {\n            _this.s.condition = condDisp;\n            break;\n          }\n        } // When the condition is changed, the value selector may switch between\n        //  a select element and an input element\n\n\n        _this._clearValue();\n\n        _this._populateValue();\n\n        for (var _b = 0, _c = _this.dom.value; _b < _c.length; _b++) {\n          var val = _c[_b]; // If this criteria was previously active in the search then remove\n          //  it from the search and trigger a new search\n\n          if (_this.s.filled && $$2(_this.dom.container).has(val).length !== 0) {\n            _this.s.filled = false;\n\n            _this.s.dt.draw();\n\n            _this.setListeners();\n          }\n        }\n\n        _this.s.dt.draw();\n      });\n    };\n    /**\n     * Adjusts the criteria to make SearchBuilder responsive\n     */\n\n\n    Criteria.prototype._adjustCriteria = function () {\n      // If this criteria is not present then don't bother adjusting it\n      if ($$2(document).has(this.dom.container).length === 0) {\n        return;\n      }\n\n      var valRight;\n      var valWidth;\n      var outmostval = this.dom.value[this.dom.value.length - 1]; // Calculate the width and right value of the outmost value element\n\n      if ($$2(this.dom.container).has(outmostval).length !== 0) {\n        valWidth = $$2(outmostval).outerWidth(true);\n        valRight = $$2(outmostval).offset().left + valWidth;\n      } else {\n        return;\n      }\n\n      var leftOffset = $$2(this.dom.left).offset();\n      var rightOffset = $$2(this.dom.right).offset();\n      var clearOffset = $$2(this.dom[\"delete\"]).offset();\n      var hasLeft = $$2(this.dom.container).has(this.dom.left).length !== 0;\n      var hasRight = $$2(this.dom.container).has(this.dom.right).length !== 0;\n      var buttonsLeft = hasLeft ? leftOffset.left : hasRight ? rightOffset.left : clearOffset.left; // Perform the responsive calculations and redraw where necessary\n\n      if ((buttonsLeft - valRight < 15 || hasLeft && leftOffset.top !== clearOffset.top || hasRight && rightOffset.top !== clearOffset.top) && !$$2(this.dom.container).parent().hasClass(this.classes.vertical)) {\n        $$2(this.dom.container).parent().addClass(this.classes.vertical);\n        $$2(this.s.topGroup).trigger('dtsb-redrawContents');\n      } else if (buttonsLeft - ($$2(this.dom.data).offset().left + $$2(this.dom.data).outerWidth(true) + $$2(this.dom.condition).outerWidth(true) + valWidth) > 15 && $$2(this.dom.container).parent().hasClass(this.classes.vertical)) {\n        $$2(this.dom.container).parent().removeClass(this.classes.vertical);\n        $$2(this.s.topGroup).trigger('dtsb-redrawContents');\n      }\n    };\n    /**\n     * Builds the elements of the dom together\n     */\n\n\n    Criteria.prototype._buildCriteria = function () {\n      // Append Titles for select elements\n      $$2(this.dom.data).append(this.dom.dataTitle);\n      $$2(this.dom.condition).append(this.dom.conditionTitle); // Add elements to container\n\n      $$2(this.dom.container).append(this.dom.data).append(this.dom.condition);\n\n      for (var _i = 0, _a = this.dom.value; _i < _a.length; _i++) {\n        var val = _a[_i];\n        $$2(val).append(this.dom.valueTitle);\n        $$2(this.dom.container).append(val);\n      } // Add buttons to container\n\n\n      $$2(this.dom.container).append(this.dom[\"delete\"]).append(this.dom.right);\n      this.setListeners();\n    };\n    /**\n     * Clears the condition select element\n     */\n\n\n    Criteria.prototype._clearCondition = function () {\n      $$2(this.dom.condition).empty();\n      $$2(this.dom.conditionTitle).attr('selected', true).attr('disabled', true);\n      $$2(this.dom.condition).prepend(this.dom.conditionTitle).prop('selectedIndex', 0);\n      this.s.conditions = {};\n      this.s.condition = undefined;\n    };\n    /**\n     * Clears the value elements\n     */\n\n\n    Criteria.prototype._clearValue = function () {\n      if (this.s.condition !== undefined) {\n        var _loop_1 = function (val) {\n          // Timeout is annoying but because of IOS\n          setTimeout(function () {\n            $$2(val).remove();\n          }, 50);\n        }; // Remove all of the value elements\n\n\n        for (var _i = 0, _a = this.dom.value; _i < _a.length; _i++) {\n          var val = _a[_i];\n\n          _loop_1(val);\n        } // Call the init function to get the value elements for this condition\n\n\n        this.dom.value = [].concat(this.s.conditions[this.s.condition].init(this, Criteria.updateListener));\n        $$2(this.dom.value[0]).insertAfter(this.dom.condition).trigger('dtsb-inserted'); // Insert all of the value elements\n\n        for (var i = 1; i < this.dom.value.length; i++) {\n          $$2(this.dom.value[i]).insertAfter(this.dom.value[i - 1]).trigger('dtsb-inserted');\n        }\n      } else {\n        var _loop_2 = function (val) {\n          // Timeout is annoying but because of IOS\n          setTimeout(function () {\n            $$2(val).remove();\n          }, 50);\n        }; // Remove all of the value elements\n\n\n        for (var _b = 0, _c = this.dom.value; _b < _c.length; _b++) {\n          var val = _c[_b];\n\n          _loop_2(val);\n        } // Append the default valueTitle to the default select element\n\n\n        $$2(this.dom.valueTitle).attr('selected', true);\n        $$2(this.dom.defaultValue).append(this.dom.valueTitle).insertAfter(this.dom.condition);\n      }\n\n      this.s.value = [];\n      this.dom.value = [$$2('<select disabled/>').addClass(this.classes.value).addClass(this.classes.dropDown).addClass(this.classes.italic).addClass(this.classes.select).append($$2(this.dom.valueTitle).clone())];\n    };\n    /**\n     * Gets the options for the column\n     *\n     * @returns {object} The options for the column\n     */\n\n\n    Criteria.prototype._getOptions = function () {\n      var table = this.s.dt;\n      return $$2.extend(true, {}, Criteria.defaults, table.settings()[0].aoColumns[this.s.dataIdx].searchBuilder);\n    };\n    /**\n     * Populates the condition dropdown\n     */\n\n\n    Criteria.prototype._populateCondition = function () {\n      var conditionOpts = [];\n      var conditionsLength = Object.keys(this.s.conditions).length; // If there are no conditions stored then we need to get them from the appropriate type\n\n      if (conditionsLength === 0) {\n        var column = $$2(this.dom.data).children('option:selected').val();\n        this.s.type = this.s.dt.columns().type().toArray()[column]; // If the column type is unknown, call a draw to try reading it again\n\n        if (this.s.type === null) {\n          this.s.dt.draw();\n          this.setListeners();\n          this.s.type = this.s.dt.columns().type().toArray()[column];\n        } // Enable the condition element\n\n\n        $$2(this.dom.condition).attr('disabled', false).empty().append(this.dom.conditionTitle).addClass(this.classes.italic);\n        $$2(this.dom.conditionTitle).attr('selected', true);\n        var decimal = this.s.dt.settings()[0].oLanguage.sDecimal; // This check is in place for if a custom decimal character is in place\n\n        if (decimal !== '' && this.s.type.indexOf(decimal) === this.s.type.length - decimal.length) {\n          if (this.s.type.indexOf('num-fmt') !== -1) {\n            this.s.type = this.s.type.replace(decimal, '');\n          } else if (this.s.type.indexOf('num') !== -1) {\n            this.s.type = this.s.type.replace(decimal, '');\n          }\n        } // Select which conditions are going to be used based on the column type\n\n\n        var conditionObj = this.c.conditions[this.s.type] !== undefined ? this.c.conditions[this.s.type] : this.s.type.indexOf('moment') !== -1 ? this.c.conditions.moment : this.s.type.indexOf('luxon') !== -1 ? this.c.conditions.luxon : this.c.conditions.string; // If it is a moment format then extract the date format\n\n        if (this.s.type.indexOf('moment') !== -1) {\n          this.s.dateFormat = this.s.type.replace(/moment-/g, '');\n        } else if (this.s.type.indexOf('luxon') !== -1) {\n          this.s.dateFormat = this.s.type.replace(/luxon-/g, '');\n        } // Add all of the conditions to the select element\n\n\n        for (var _i = 0, _a = Object.keys(conditionObj); _i < _a.length; _i++) {\n          var condition = _a[_i];\n\n          if (conditionObj[condition] !== null) {\n            this.s.conditions[condition] = conditionObj[condition];\n            var condName = conditionObj[condition].conditionName;\n\n            if (typeof condName === 'function') {\n              condName = condName(this.s.dt, this.c.i18n);\n            }\n\n            conditionOpts.push($$2('<option>', {\n              text: condName,\n              value: condition\n            }).addClass(this.classes.option).addClass(this.classes.notItalic));\n          }\n        }\n      } // Otherwise we can just load them in\n      else if (conditionsLength > 0) {\n        $$2(this.dom.condition).empty().attr('disabled', false).addClass(this.classes.italic);\n\n        for (var _b = 0, _c = Object.keys(this.s.conditions); _b < _c.length; _b++) {\n          var condition = _c[_b];\n          var condName = this.s.conditions[condition].conditionName;\n\n          if (typeof condName === 'function') {\n            condName = condName(this.s.dt, this.c.i18n);\n          }\n\n          var newOpt = $$2('<option>', {\n            text: condName,\n            value: condition\n          }).addClass(this.classes.option).addClass(this.classes.notItalic);\n\n          if (this.s.condition !== undefined && this.s.condition === condName) {\n            $$2(newOpt).attr('selected', true);\n            $$2(this.dom.condition).removeClass(this.classes.italic);\n          }\n\n          conditionOpts.push(newOpt);\n        }\n      } else {\n        $$2(this.dom.condition).attr('disabled', true).addClass(this.classes.italic);\n        return;\n      }\n\n      for (var _d = 0, conditionOpts_1 = conditionOpts; _d < conditionOpts_1.length; _d++) {\n        var opt = conditionOpts_1[_d];\n        $$2(this.dom.condition).append(opt);\n      }\n\n      $$2(this.dom.condition).prop('selectedIndex', 0);\n    };\n    /**\n     * Populates the data select element\n     */\n\n\n    Criteria.prototype._populateData = function () {\n      var _this = this;\n\n      $$2(this.dom.data).empty().append(this.dom.dataTitle); // If there are no datas stored then we need to get them from the table\n\n      if (this.s.dataPoints.length === 0) {\n        this.s.dt.columns().every(function (index) {\n          // Need to check that the column can be filtered on before adding it\n          if (_this.c.columns === true || _this.s.dt.columns(_this.c.columns).indexes().toArray().indexOf(index) !== -1) {\n            var found = false;\n\n            for (var _i = 0, _a = _this.s.dataPoints; _i < _a.length; _i++) {\n              var val = _a[_i];\n\n              if (val.index === index) {\n                found = true;\n                break;\n              }\n            }\n\n            if (!found) {\n              var col = _this.s.dt.settings()[0].aoColumns[index];\n\n              var opt = {\n                index: index,\n                text: (col.searchBuilderTitle === undefined ? col.sTitle : col.searchBuilderTitle).replace(/(<([^>]+)>)/ig, '')\n              };\n\n              _this.s.dataPoints.push(opt);\n\n              $$2(_this.dom.data).append($$2('<option>', {\n                text: opt.text,\n                value: opt.index\n              }).addClass(_this.classes.option).addClass(_this.classes.notItalic));\n            }\n          }\n        });\n      } // Otherwise we can just load them in\n      else {\n        var _loop_3 = function (data) {\n          this_1.s.dt.columns().every(function (index) {\n            var col = _this.s.dt.settings()[0].aoColumns[index];\n\n            if ((col.searchBuilderTitle === undefined ? col.sTitle : col.searchBuilderTitle).replace(/(<([^>]+)>)/ig, '') === data.text) {\n              data.index = index;\n            }\n          });\n          var newOpt = $$2('<option>', {\n            text: data.text.replace(/(<([^>]+)>)/ig, ''),\n            value: data.index\n          }).addClass(this_1.classes.option).addClass(this_1.classes.notItalic);\n\n          if (this_1.s.data === data.text) {\n            this_1.s.dataIdx = data.index;\n            $$2(newOpt).attr('selected', true);\n            $$2(this_1.dom.data).removeClass(this_1.classes.italic);\n          }\n\n          $$2(this_1.dom.data).append(newOpt);\n        };\n\n        var this_1 = this;\n\n        for (var _i = 0, _a = this.s.dataPoints; _i < _a.length; _i++) {\n          var data = _a[_i];\n\n          _loop_3(data);\n        }\n      }\n    };\n    /**\n     * Populates the Value select element\n     *\n     * @param loadedCriteria optional, used to reload criteria from predefined filters\n     */\n\n\n    Criteria.prototype._populateValue = function (loadedCriteria) {\n      var _this = this;\n\n      var prevFilled = this.s.filled;\n      this.s.filled = false; // Remove any previous value elements\n      // Timeout is annoying but because of IOS\n\n      setTimeout(function () {\n        $$2(_this.dom.defaultValue).remove();\n      }, 50);\n\n      var _loop_4 = function (val) {\n        // Timeout is annoying but because of IOS\n        setTimeout(function () {\n          $$2(val).remove();\n        }, 50);\n      };\n\n      for (var _i = 0, _a = this.dom.value; _i < _a.length; _i++) {\n        var val = _a[_i];\n\n        _loop_4(val);\n      }\n\n      var children = $$2(this.dom.container).children();\n\n      if (children.length > 3) {\n        for (var i = 2; i < children.length - 1; i++) {\n          $$2(children[i]).remove();\n        }\n      } // Find the column with the title matching the data for the criteria and take note of the index\n\n\n      if (loadedCriteria !== undefined) {\n        this.s.dt.columns().every(function (index) {\n          if (_this.s.dt.settings()[0].aoColumns[index].sTitle === loadedCriteria.data) {\n            _this.s.dataIdx = index;\n          }\n        });\n      } // Initialise the value elements based on the condition\n\n\n      this.dom.value = [].concat(this.s.conditions[this.s.condition].init(this, Criteria.updateListener, loadedCriteria !== undefined ? loadedCriteria.value : undefined));\n\n      if (loadedCriteria !== undefined && loadedCriteria.value !== undefined) {\n        this.s.value = loadedCriteria.value;\n      } // Insert value elements and trigger the inserted event\n\n\n      $$2(this.dom.value[0]).insertAfter(this.dom.condition).trigger('dtsb-inserted');\n\n      for (var i = 1; i < this.dom.value.length; i++) {\n        $$2(this.dom.value[i]).insertAfter(this.dom.value[i - 1]).trigger('dtsb-inserted');\n      } // Check if the criteria can be used in a search\n\n\n      this.s.filled = this.s.conditions[this.s.condition].isInputValid(this.dom.value, this);\n      this.setListeners(); // If it can and this is different to before then trigger a draw\n\n      if (prevFilled !== this.s.filled) {\n        this.s.dt.draw();\n        this.setListeners();\n      }\n    };\n\n    Criteria.version = '1.1.0';\n    Criteria.classes = {\n      button: 'dtsb-button',\n      buttonContainer: 'dtsb-buttonContainer',\n      condition: 'dtsb-condition',\n      container: 'dtsb-criteria',\n      data: 'dtsb-data',\n      \"delete\": 'dtsb-delete',\n      dropDown: 'dtsb-dropDown',\n      greyscale: 'dtsb-greyscale',\n      input: 'dtsb-input',\n      italic: 'dtsb-italic',\n      joiner: 'dtsp-joiner',\n      left: 'dtsb-left',\n      notItalic: 'dtsb-notItalic',\n      option: 'dtsb-option',\n      right: 'dtsb-right',\n      select: 'dtsb-select',\n      value: 'dtsb-value',\n      vertical: 'dtsb-vertical'\n    };\n    /**\n     * Default initialisation function for select conditions\n     */\n\n    Criteria.initSelect = function (that, fn, preDefined, array) {\n      if (preDefined === void 0) {\n        preDefined = null;\n      }\n\n      if (array === void 0) {\n        array = false;\n      }\n\n      var column = $$2(that.dom.data).children('option:selected').val();\n      var indexArray = that.s.dt.rows().indexes().toArray();\n      var settings = that.s.dt.settings()[0]; // Declare select element to be used with all of the default classes and listeners.\n\n      var el = $$2('<select/>').addClass(Criteria.classes.value).addClass(Criteria.classes.dropDown).addClass(Criteria.classes.italic).addClass(Criteria.classes.select).append(that.dom.valueTitle).on('input change', function () {\n        $$2(this).removeClass(Criteria.classes.italic);\n        fn(that, this);\n      });\n\n      if (that.c.greyscale) {\n        $$2(el).addClass(Criteria.classes.greyscale);\n      }\n\n      var added = [];\n      var options = []; // Add all of the options from the table to the select element.\n      // Only add one option for each possible value\n\n      for (var _i = 0, indexArray_1 = indexArray; _i < indexArray_1.length; _i++) {\n        var index = indexArray_1[_i];\n\n        var filter = settings.oApi._fnGetCellData(settings, index, column, typeof that.c.orthogonal === 'string' ? that.c.orthogonal : that.c.orthogonal.search);\n\n        var value = {\n          filter: typeof filter === 'string' ? filter.replace(/[\\r\\n\\u2028]/g, ' ') : // Need to replace certain characters to match search values\n          filter,\n          index: index,\n          text: settings.oApi._fnGetCellData(settings, index, column, typeof that.c.orthogonal === 'string' ? that.c.orthogonal : that.c.orthogonal.display)\n        }; // If we are dealing with an array type, either make sure we are working with arrays, or sort them\n\n        if (that.s.type === 'array') {\n          value.filter = !Array.isArray(value.filter) ? [value.filter] : value.filter = value.filter.sort();\n          value.text = !Array.isArray(value.text) ? [value.text] : value.text = value.text.sort();\n        } // Function to add an option to the select element\n\n\n        var addOption = function (filt, text) {\n          // Add text and value, stripping out any html if that is the column type\n          var opt = $$2('<option>', {\n            type: Array.isArray(filt) ? 'Array' : 'String',\n            value: that.s.type.indexOf('html') !== -1 && filt !== null && typeof filt === 'string' ? filt.replace(/(<([^>]+)>)/ig, '') : filt\n          }).addClass(that.classes.option).addClass(that.classes.notItalic) // Have to add the text this way so that special html characters are not escaped - &amp; etc.\n          .html(typeof text === 'string' ? text.replace(/(<([^>]+)>)/ig, '') : text);\n          var val = $$2(opt).val(); // Check that this value has not already been added\n\n          if (added.indexOf(val) === -1) {\n            added.push(val);\n            options.push(opt);\n\n            if (preDefined !== null && Array.isArray(preDefined[0])) {\n              preDefined[0] = preDefined[0].sort().join(',');\n            } // If this value was previously selected as indicated by preDefined, then select it again\n\n\n            if (preDefined !== null && opt.val() === preDefined[0]) {\n              opt.attr('selected', true);\n              $$2(el).removeClass(Criteria.classes.italic);\n            }\n          }\n        }; // If this is to add the individual values within the array we need to loop over the array\n\n\n        if (array) {\n          for (var i = 0; i < value.filter.length; i++) {\n            addOption(value.filter[i], value.text[i]);\n          }\n        } // Otherwise the value that is in the cell is to be added\n        else {\n          addOption(value.filter, value.text);\n        }\n      }\n\n      options.sort(function (a, b) {\n        if (that.s.type === 'array' || that.s.type === 'string' || that.s.type === 'num' || that.s.type === 'html' || that.s.type === 'html-num') {\n          if ($$2(a).val() < $$2(b).val()) {\n            return -1;\n          } else if ($$2(a).val() > $$2(b).val()) {\n            return 1;\n          } else {\n            return 0;\n          }\n        } else if (that.s.type === 'num-fmt' || that.s.type === 'html-num-fmt') {\n          if (+$$2(a).val().replace(/[^0-9.]/g, '') < +$$2(b).val().replace(/[^0-9.]/g, '')) {\n            return -1;\n          } else if (+$$2(a).val().replace(/[^0-9.]/g, '') > +$$2(b).val().replace(/[^0-9.]/g, '')) {\n            return 1;\n          } else {\n            return 0;\n          }\n        }\n      });\n\n      for (var _a = 0, options_1 = options; _a < options_1.length; _a++) {\n        var opt = options_1[_a];\n        $$2(el).append(opt);\n      }\n\n      return el;\n    };\n    /**\n     * Default initialisation function for select array conditions\n     *\n     * This exists because there needs to be different select functionality for contains/without and equals/not\n     */\n\n\n    Criteria.initSelectArray = function (that, fn, preDefined) {\n      if (preDefined === void 0) {\n        preDefined = null;\n      }\n\n      return Criteria.initSelect(that, fn, preDefined, true);\n    };\n    /**\n     * Default initialisation function for input conditions\n     */\n\n\n    Criteria.initInput = function (that, fn, preDefined) {\n      var _this = this;\n\n      if (preDefined === void 0) {\n        preDefined = null;\n      } // Declare the input element\n\n\n      var searchDelay = that.s.dt.settings()[0].searchDelay;\n      var el = $$2('<input/>').addClass(Criteria.classes.value).addClass(Criteria.classes.input).on('input keypress', !that.c.enterSearch || searchDelay !== null ? that.s.dt.settings()[0].oApi._fnThrottle(function () {\n        return fn(that, this);\n      }, searchDelay) : that.c.enterSearch ? function (e) {\n        var code = e.keyCode || e.which;\n\n        if (code === 13) {\n          fn(that, _this);\n        }\n      } : function () {\n        fn(that, _this);\n      });\n\n      if (that.c.greyscale) {\n        $$2(el).addClass(Criteria.classes.greyscale);\n      } // If there is a preDefined value then add it\n\n\n      if (preDefined !== null) {\n        $$2(el).val(preDefined[0]);\n      } // This is add responsive functionality to the logic button without redrawing everything else\n\n\n      that.s.dt.one('draw', function () {\n        $$2(that.s.topGroup).trigger('dtsb-redrawLogic');\n      });\n      return el;\n    };\n    /**\n     * Default initialisation function for conditions requiring 2 inputs\n     */\n\n\n    Criteria.init2Input = function (that, fn, preDefined) {\n      var _this = this;\n\n      if (preDefined === void 0) {\n        preDefined = null;\n      } // Declare all of the necessary jQuery elements\n\n\n      var searchDelay = that.s.dt.settings()[0].searchDelay;\n      var els = [$$2('<input/>').addClass(Criteria.classes.value).addClass(Criteria.classes.input).on('input keypress', searchDelay !== null ? that.s.dt.settings()[0].oApi._fnThrottle(function () {\n        return fn(that, this);\n      }, searchDelay) : that.c.enterSearch ? function (e) {\n        var code = e.keyCode || e.which;\n\n        if (code === 13) {\n          fn(that, _this);\n        }\n      } : function () {\n        fn(that, _this);\n      }), $$2('<span>').addClass(that.classes.joiner).text(that.s.dt.i18n('searchBuilder.valueJoiner', that.c.i18n.valueJoiner)), $$2('<input/>').addClass(Criteria.classes.value).addClass(Criteria.classes.input).on('input keypress', searchDelay !== null ? that.s.dt.settings()[0].oApi._fnThrottle(function () {\n        return fn(that, this);\n      }, searchDelay) : that.c.enterSearch ? function (e) {\n        var code = e.keyCode || e.which;\n\n        if (code === 13) {\n          fn(that, _this);\n        }\n      } : function () {\n        fn(that, _this);\n      })];\n\n      if (that.c.greyscale) {\n        $$2(els[0]).addClass(Criteria.classes.greyscale);\n        $$2(els[2]).addClass(Criteria.classes.greyscale);\n      } // If there is a preDefined value then add it\n\n\n      if (preDefined !== null) {\n        $$2(els[0]).val(preDefined[0]);\n        $$2(els[2]).val(preDefined[1]);\n      } // This is add responsive functionality to the logic button without redrawing everything else\n\n\n      that.s.dt.one('draw', function () {\n        $$2(that.s.topGroup).trigger('dtsb-redrawLogic');\n      });\n      return els;\n    };\n    /**\n     * Default initialisation function for date conditions\n     */\n\n\n    Criteria.initDate = function (that, fn, preDefined) {\n      var _this = this;\n\n      if (preDefined === void 0) {\n        preDefined = null;\n      }\n\n      var searchDelay = that.s.dt.settings()[0].searchDelay; // Declare date element using DataTables dateTime plugin\n\n      var el = $$2('<input/>').addClass(Criteria.classes.value).addClass(Criteria.classes.input).dtDateTime({\n        attachTo: 'input',\n        format: that.s.dateFormat ? that.s.dateFormat : undefined\n      }).on('change', searchDelay !== null ? that.s.dt.settings()[0].oApi._fnThrottle(function () {\n        return fn(that, this);\n      }, searchDelay) : function () {\n        fn(that, _this);\n      }).on('input keypress', !that.c.enterSearch && searchDelay !== null ? that.s.dt.settings()[0].oApi._fnThrottle(function () {\n        return fn(that, this);\n      }, searchDelay) : that.c.enterSearch ? function (e) {\n        var code = e.keyCode || e.which;\n\n        if (code === 13) {\n          fn(that, _this);\n        }\n      } : function () {\n        fn(that, _this);\n      });\n\n      if (that.c.greyscale) {\n        $$2(el).addClass(Criteria.classes.greyscale);\n      } // If there is a preDefined value then add it\n\n\n      if (preDefined !== null) {\n        $$2(el).val(preDefined[0]);\n      } // This is add responsive functionality to the logic button without redrawing everything else\n\n\n      that.s.dt.one('draw', function () {\n        $$2(that.s.topGroup).trigger('dtsb-redrawLogic');\n      });\n      return el;\n    };\n\n    Criteria.initNoValue = function (that) {\n      // This is add responsive functionality to the logic button without redrawing everything else\n      that.s.dt.one('draw', function () {\n        $$2(that.s.topGroup).trigger('dtsb-redrawLogic');\n      });\n    };\n\n    Criteria.init2Date = function (that, fn, preDefined) {\n      var _this = this;\n\n      if (preDefined === void 0) {\n        preDefined = null;\n      }\n\n      var searchDelay = that.s.dt.settings()[0].searchDelay; // Declare all of the date elements that are required using DataTables dateTime plugin\n\n      var els = [$$2('<input/>').addClass(Criteria.classes.value).addClass(Criteria.classes.input).dtDateTime({\n        attachTo: 'input',\n        format: that.s.dateFormat ? that.s.dateFormat : undefined\n      }).on('change', searchDelay !== null ? that.s.dt.settings()[0].oApi._fnThrottle(function () {\n        return fn(that, this);\n      }, searchDelay) : function () {\n        fn(that, _this);\n      }).on('input keypress', !that.c.enterSearch && searchDelay !== null ? that.s.dt.settings()[0].oApi._fnThrottle(function () {\n        return fn(that, this);\n      }, searchDelay) : that.c.enterSearch ? function (e) {\n        var code = e.keyCode || e.which;\n\n        if (code === 13) {\n          fn(that, _this);\n        }\n      } : function () {\n        fn(that, _this);\n      }), $$2('<span>').addClass(that.classes.joiner).text(that.s.dt.i18n('searchBuilder.valueJoiner', that.c.i18n.valueJoiner)), $$2('<input/>').addClass(Criteria.classes.value).addClass(Criteria.classes.input).dtDateTime({\n        attachTo: 'input',\n        format: that.s.dateFormat ? that.s.dateFormat : undefined\n      }).on('change', searchDelay !== null ? that.s.dt.settings()[0].oApi._fnThrottle(function () {\n        return fn(that, this);\n      }, searchDelay) : function () {\n        fn(that, _this);\n      }).on('input keypress', !that.c.enterSearch && searchDelay !== null ? that.s.dt.settings()[0].oApi._fnThrottle(function () {\n        return fn(that, this);\n      }, searchDelay) : that.c.enterSearch ? function (e) {\n        var code = e.keyCode || e.which;\n\n        if (code === 13) {\n          fn(that, _this);\n        }\n      } : function () {\n        fn(that, _this);\n      })];\n\n      if (that.c.greyscale) {\n        $$2(els[0]).addClass(Criteria.classes.greyscale);\n        $$2(els[2]).addClass(Criteria.classes.greyscale);\n      } // If there are and preDefined values then add them\n\n\n      if (preDefined !== null && preDefined.length > 0) {\n        $$2(els[0]).val(preDefined[0]);\n        $$2(els[2]).val(preDefined[1]);\n      } // This is add responsive functionality to the logic button without redrawing everything else\n\n\n      that.s.dt.one('draw', function () {\n        $$2(that.s.topGroup).trigger('dtsb-redrawLogic');\n      });\n      return els;\n    };\n    /**\n     * Default function for select elements to validate condition\n     */\n\n\n    Criteria.isInputValidSelect = function (el) {\n      var allFilled = true; // Check each element to make sure that the selections are valid\n\n      for (var _i = 0, el_1 = el; _i < el_1.length; _i++) {\n        var element = el_1[_i];\n\n        if ($$2(element).children('option:selected').length === $$2(element).children('option').length - $$2(element).children('option.' + Criteria.classes.notItalic).length && $$2(element).children('option:selected').length === 1 && $$2(element).children('option:selected')[0] === $$2(element).children('option:hidden')[0]) {\n          allFilled = false;\n        }\n      }\n\n      return allFilled;\n    };\n    /**\n     * Default function for input and date elements to validate condition\n     */\n\n\n    Criteria.isInputValidInput = function (el) {\n      var allFilled = true; // Check each element to make sure that the inputs are valid\n\n      for (var _i = 0, el_2 = el; _i < el_2.length; _i++) {\n        var element = el_2[_i];\n\n        if ($$2(element).is('input') && $$2(element).val().length === 0) {\n          allFilled = false;\n        }\n      }\n\n      return allFilled;\n    };\n    /**\n     * Default function for getting select conditions\n     */\n\n\n    Criteria.inputValueSelect = function (el) {\n      var values = []; // Go through the select elements and push each selected option to the return array\n\n      for (var _i = 0, el_3 = el; _i < el_3.length; _i++) {\n        var element = el_3[_i];\n\n        if ($$2(element).is('select')) {\n          var val = $$2(element).children('option:selected').val(); // If the type of the option is an array we need to split it up and sort it\n\n          values.push($$2(element).children('option:selected').attr('type') === 'Array' ? val.split(',').sort() : val);\n        }\n      }\n\n      return values;\n    };\n    /**\n     * Default function for getting input conditions\n     */\n\n\n    Criteria.inputValueInput = function (el) {\n      var values = []; // Go through the input elements and push each value to the return array\n\n      for (var _i = 0, el_4 = el; _i < el_4.length; _i++) {\n        var element = el_4[_i];\n\n        if ($$2(element).is('input')) {\n          values.push($$2(element).val());\n        }\n      }\n\n      return values;\n    };\n    /**\n     * Function that is run on each element as a call back when a search should be triggered\n     */\n\n\n    Criteria.updateListener = function (that, el) {\n      // When the value is changed the criteria is now complete so can be included in searches\n      // Get the condition from the map based on the key that has been selected for the condition\n      var condition = that.s.conditions[that.s.condition];\n      that.s.filled = condition.isInputValid(that.dom.value, that);\n      that.s.value = condition.inputValue(that.dom.value, that);\n\n      if (!Array.isArray(that.s.value)) {\n        that.s.value = [that.s.value];\n      }\n\n      for (var i = 0; i < that.s.value.length; i++) {\n        // If the value is an array we need to sort it\n        if (Array.isArray(that.s.value[i])) {\n          that.s.value[i].sort();\n        } // Otherwise replace the decimal place character for i18n\n        else if (that.s.type.indexOf('num') !== -1 && (that.s.dt.settings()[0].oLanguage.sDecimal !== '' || that.s.dt.settings()[0].oLanguage.sThousands !== '')) {\n          var splitRD = [that.s.value[i].toString()];\n\n          if (that.s.dt.settings()[0].oLanguage.sDecimal !== '') {\n            splitRD = that.s.value[i].split(that.s.dt.settings()[0].oLanguage.sDecimal);\n          }\n\n          if (that.s.dt.settings()[0].oLanguage.sThousands !== '') {\n            for (var j = 0; j < splitRD.length; j++) {\n              splitRD[j] = splitRD[j].replace(that.s.dt.settings()[0].oLanguage.sThousands, ',');\n            }\n          }\n\n          that.s.value[i] = splitRD.join('.');\n        }\n      } // Take note of the cursor position so that we can refocus there later\n\n\n      var idx = null;\n      var cursorPos = null;\n\n      for (var i = 0; i < that.dom.value.length; i++) {\n        if (el === that.dom.value[i][0]) {\n          idx = i;\n\n          if (el.selectionStart !== undefined) {\n            cursorPos = el.selectionStart;\n          }\n        }\n      } // Trigger a search\n\n\n      that.s.dt.draw(); // Refocus the element and set the correct cursor position\n\n      if (idx !== null) {\n        $$2(that.dom.value[idx]).removeClass(that.classes.italic);\n        $$2(that.dom.value[idx]).focus();\n\n        if (cursorPos !== null) {\n          $$2(that.dom.value[idx])[0].setSelectionRange(cursorPos, cursorPos);\n        }\n      }\n    }; // The order of the conditions will make eslint sad :(\n    // Has to be in this order so that they are displayed correctly in select elements\n    // Also have to disable member ordering for this as the private methods used are not yet declared otherwise\n    // eslint-disable-next-line @typescript-eslint/member-ordering\n\n\n    Criteria.dateConditions = {\n      '=': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.date.equals', i18n.conditions.date.equals);\n        },\n        init: Criteria.initDate,\n        inputValue: Criteria.inputValueInput,\n        isInputValid: Criteria.isInputValidInput,\n        search: function (value, comparison) {\n          value = value.replace(/(\\/|-|,)/g, '-');\n          return value === comparison[0];\n        }\n      },\n      // eslint-disable-next-line sort-keys\n      '!=': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.date.not', i18n.conditions.date.not);\n        },\n        init: Criteria.initDate,\n        inputValue: Criteria.inputValueInput,\n        isInputValid: Criteria.isInputValidInput,\n        search: function (value, comparison) {\n          value = value.replace(/(\\/|-|,)/g, '-');\n          return value !== comparison[0];\n        }\n      },\n      '<': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.date.before', i18n.conditions.date.before);\n        },\n        init: Criteria.initDate,\n        inputValue: Criteria.inputValueInput,\n        isInputValid: Criteria.isInputValidInput,\n        search: function (value, comparison) {\n          value = value.replace(/(\\/|-|,)/g, '-');\n          return value < comparison[0];\n        }\n      },\n      '>': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.date.after', i18n.conditions.date.after);\n        },\n        init: Criteria.initDate,\n        inputValue: Criteria.inputValueInput,\n        isInputValid: Criteria.isInputValidInput,\n        search: function (value, comparison) {\n          value = value.replace(/(\\/|-|,)/g, '-');\n          return value > comparison[0];\n        }\n      },\n      'between': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.date.between', i18n.conditions.date.between);\n        },\n        init: Criteria.init2Date,\n        inputValue: Criteria.inputValueInput,\n        isInputValid: Criteria.isInputValidInput,\n        search: function (value, comparison) {\n          value = value.replace(/(\\/|-|,)/g, '-');\n\n          if (comparison[0] < comparison[1]) {\n            return comparison[0] <= value && value <= comparison[1];\n          } else {\n            return comparison[1] <= value && value <= comparison[0];\n          }\n        }\n      },\n      // eslint-disable-next-line sort-keys\n      '!between': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.date.notBetween', i18n.conditions.date.notBetween);\n        },\n        init: Criteria.init2Date,\n        inputValue: Criteria.inputValueInput,\n        isInputValid: Criteria.isInputValidInput,\n        search: function (value, comparison) {\n          value = value.replace(/(\\/|-|,)/g, '-');\n\n          if (comparison[0] < comparison[1]) {\n            return !(comparison[0] <= value && value <= comparison[1]);\n          } else {\n            return !(comparison[1] <= value && value <= comparison[0]);\n          }\n        }\n      },\n      'null': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.date.empty', i18n.conditions.date.empty);\n        },\n        init: Criteria.initNoValue,\n        inputValue: function () {\n          return;\n        },\n        isInputValid: function () {\n          return true;\n        },\n        search: function (value) {\n          return value === null || value === undefined || value.length === 0;\n        }\n      },\n      // eslint-disable-next-line sort-keys\n      '!null': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.date.notEmpty', i18n.conditions.date.notEmpty);\n        },\n        init: Criteria.initNoValue,\n        inputValue: function () {\n          return;\n        },\n        isInputValid: function () {\n          return true;\n        },\n        search: function (value) {\n          return !(value === null || value === undefined || value.length === 0);\n        }\n      }\n    }; // The order of the conditions will make eslint sad :(\n    // Has to be in this order so that they are displayed correctly in select elements\n    // Also have to disable member ordering for this as the private methods used are not yet declared otherwise\n    // eslint-disable-next-line @typescript-eslint/member-ordering\n\n    Criteria.momentDateConditions = {\n      '=': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.date.equals', i18n.conditions.date.equals);\n        },\n        init: Criteria.initDate,\n        inputValue: Criteria.inputValueInput,\n        isInputValid: Criteria.isInputValidInput,\n        search: function (value, comparison, that) {\n          return moment(value, that.s.dateFormat).valueOf() === moment(comparison[0], that.s.dateFormat).valueOf();\n        }\n      },\n      // eslint-disable-next-line sort-keys\n      '!=': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.date.not', i18n.conditions.date.not);\n        },\n        init: Criteria.initDate,\n        inputValue: Criteria.inputValueInput,\n        isInputValid: Criteria.isInputValidInput,\n        search: function (value, comparison, that) {\n          return moment(value, that.s.dateFormat).valueOf() !== moment(comparison[0], that.s.dateFormat).valueOf();\n        }\n      },\n      '<': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.date.before', i18n.conditions.date.before);\n        },\n        init: Criteria.initDate,\n        inputValue: Criteria.inputValueInput,\n        isInputValid: Criteria.isInputValidInput,\n        search: function (value, comparison, that) {\n          return moment(value, that.s.dateFormat).valueOf() < moment(comparison[0], that.s.dateFormat).valueOf();\n        }\n      },\n      '>': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.date.after', i18n.conditions.date.after);\n        },\n        init: Criteria.initDate,\n        inputValue: Criteria.inputValueInput,\n        isInputValid: Criteria.isInputValidInput,\n        search: function (value, comparison, that) {\n          return moment(value, that.s.dateFormat).valueOf() > moment(comparison[0], that.s.dateFormat).valueOf();\n        }\n      },\n      'between': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.date.between', i18n.conditions.date.between);\n        },\n        init: Criteria.init2Date,\n        inputValue: Criteria.inputValueInput,\n        isInputValid: Criteria.isInputValidInput,\n        search: function (value, comparison, that) {\n          var val = moment(value, that.s.dateFormat).valueOf();\n          var comp0 = moment(comparison[0], that.s.dateFormat).valueOf();\n          var comp1 = moment(comparison[1], that.s.dateFormat).valueOf();\n\n          if (comp0 < comp1) {\n            return comp0 <= val && val <= comp1;\n          } else {\n            return comp1 <= val && val <= comp0;\n          }\n        }\n      },\n      // eslint-disable-next-line sort-keys\n      '!between': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.date.notBetween', i18n.conditions.date.notBetween);\n        },\n        init: Criteria.init2Date,\n        inputValue: Criteria.inputValueInput,\n        isInputValid: Criteria.isInputValidInput,\n        search: function (value, comparison, that) {\n          var val = moment(value, that.s.dateFormat).valueOf();\n          var comp0 = moment(comparison[0], that.s.dateFormat).valueOf();\n          var comp1 = moment(comparison[1], that.s.dateFormat).valueOf();\n\n          if (comp0 < comp1) {\n            return !(+comp0 <= +val && +val <= +comp1);\n          } else {\n            return !(+comp1 <= +val && +val <= +comp0);\n          }\n        }\n      },\n      'null': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.date.empty', i18n.conditions.date.empty);\n        },\n        init: Criteria.initNoValue,\n        inputValue: function () {\n          return;\n        },\n        isInputValid: function () {\n          return true;\n        },\n        search: function (value) {\n          return value === null || value === undefined || value.length === 0;\n        }\n      },\n      // eslint-disable-next-line sort-keys\n      '!null': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.date.notEmpty', i18n.conditions.date.notEmpty);\n        },\n        init: Criteria.initNoValue,\n        inputValue: function () {\n          return;\n        },\n        isInputValid: function () {\n          return true;\n        },\n        search: function (value) {\n          return !(value === null || value === undefined || value.length === 0);\n        }\n      }\n    }; // The order of the conditions will make eslint sad :(\n    // Has to be in this order so that they are displayed correctly in select elements\n    // Also have to disable member ordering for this as the private methods used are not yet declared otherwise\n    // eslint-disable-next-line @typescript-eslint/member-ordering\n\n    Criteria.luxonDateConditions = {\n      '=': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.date.equals', i18n.conditions.date.equals);\n        },\n        init: Criteria.initDate,\n        inputValue: Criteria.inputValueInput,\n        isInputValid: Criteria.isInputValidInput,\n        search: function (value, comparison, that) {\n          return luxon.DateTime.fromFormat(value, that.s.dateFormat).ts === luxon.DateTime.fromFormat(comparison[0], that.s.dateFormat).ts;\n        }\n      },\n      // eslint-disable-next-line sort-keys\n      '!=': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.date.not', i18n.conditions.date.not);\n        },\n        init: Criteria.initDate,\n        inputValue: Criteria.inputValueInput,\n        isInputValid: Criteria.isInputValidInput,\n        search: function (value, comparison, that) {\n          return luxon.DateTime.fromFormat(value, that.s.dateFormat).ts !== luxon.DateTime.fromFormat(comparison[0], that.s.dateFormat).ts;\n        }\n      },\n      '<': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.date.before', i18n.conditions.date.before);\n        },\n        init: Criteria.initDate,\n        inputValue: Criteria.inputValueInput,\n        isInputValid: Criteria.isInputValidInput,\n        search: function (value, comparison, that) {\n          return luxon.DateTime.fromFormat(value, that.s.dateFormat).ts < luxon.DateTime.fromFormat(comparison[0], that.s.dateFormat).ts;\n        }\n      },\n      '>': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.date.after', i18n.conditions.date.after);\n        },\n        init: Criteria.initDate,\n        inputValue: Criteria.inputValueInput,\n        isInputValid: Criteria.isInputValidInput,\n        search: function (value, comparison, that) {\n          return luxon.DateTime.fromFormat(value, that.s.dateFormat).ts > luxon.DateTime.fromFormat(comparison[0], that.s.dateFormat).ts;\n        }\n      },\n      'between': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.date.between', i18n.conditions.date.between);\n        },\n        init: Criteria.init2Date,\n        inputValue: Criteria.inputValueInput,\n        isInputValid: Criteria.isInputValidInput,\n        search: function (value, comparison, that) {\n          var val = luxon.DateTime.fromFormat(value, that.s.dateFormat).ts;\n          var comp0 = luxon.DateTime.fromFormat(comparison[0], that.s.dateFormat).ts;\n          var comp1 = luxon.DateTime.fromFormat(comparison[1], that.s.dateFormat).ts;\n\n          if (comp0 < comp1) {\n            return comp0 <= val && val <= comp1;\n          } else {\n            return comp1 <= val && val <= comp0;\n          }\n        }\n      },\n      // eslint-disable-next-line sort-keys\n      '!between': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.date.notBetween', i18n.conditions.date.notBetween);\n        },\n        init: Criteria.init2Date,\n        inputValue: Criteria.inputValueInput,\n        isInputValid: Criteria.isInputValidInput,\n        search: function (value, comparison, that) {\n          var val = luxon.DateTime.fromFormat(value, that.s.dateFormat).ts;\n          var comp0 = luxon.DateTime.fromFormat(comparison[0], that.s.dateFormat).ts;\n          var comp1 = luxon.DateTime.fromFormat(comparison[1], that.s.dateFormat).ts;\n\n          if (comp0 < comp1) {\n            return !(+comp0 <= +val && +val <= +comp1);\n          } else {\n            return !(+comp1 <= +val && +val <= +comp0);\n          }\n        }\n      },\n      'null': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.date.empty', i18n.conditions.date.empty);\n        },\n        init: Criteria.initNoValue,\n        inputValue: function () {\n          return;\n        },\n        isInputValid: function () {\n          return true;\n        },\n        search: function (value) {\n          return value === null || value === undefined || value.length === 0;\n        }\n      },\n      // eslint-disable-next-line sort-keys\n      '!null': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.date.notEmpty', i18n.conditions.date.notEmpty);\n        },\n        init: Criteria.initNoValue,\n        inputValue: function () {\n          return;\n        },\n        isInputValid: function () {\n          return true;\n        },\n        search: function (value) {\n          return !(value === null || value === undefined || value.length === 0);\n        }\n      }\n    }; // The order of the conditions will make eslint sad :(\n    // Has to be in this order so that they are displayed correctly in select elements\n    // Also have to disable member ordering for this as the private methods used are not yet declared otherwise\n    // eslint-disable-next-line @typescript-eslint/member-ordering\n\n    Criteria.numConditions = {\n      '=': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.number.equals', i18n.conditions.number.equals);\n        },\n        init: Criteria.initSelect,\n        inputValue: Criteria.inputValueSelect,\n        isInputValid: Criteria.isInputValidSelect,\n        search: function (value, comparison) {\n          return +value === +comparison[0];\n        }\n      },\n      // eslint-disable-next-line sort-keys\n      '!=': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.number.not', i18n.conditions.number.not);\n        },\n        init: Criteria.initSelect,\n        inputValue: Criteria.inputValueSelect,\n        isInputValid: Criteria.isInputValidSelect,\n        search: function (value, comparison) {\n          return +value !== +comparison[0];\n        }\n      },\n      '<': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.number.lt', i18n.conditions.number.lt);\n        },\n        init: Criteria.initInput,\n        inputValue: Criteria.inputValueInput,\n        isInputValid: Criteria.isInputValidInput,\n        search: function (value, comparison) {\n          return +value < +comparison[0];\n        }\n      },\n      '<=': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.number.lte', i18n.conditions.number.lte);\n        },\n        init: Criteria.initInput,\n        inputValue: Criteria.inputValueInput,\n        isInputValid: Criteria.isInputValidInput,\n        search: function (value, comparison) {\n          return +value <= +comparison[0];\n        }\n      },\n      '>=': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.number.gte', i18n.conditions.number.gte);\n        },\n        init: Criteria.initInput,\n        inputValue: Criteria.inputValueInput,\n        isInputValid: Criteria.isInputValidInput,\n        search: function (value, comparison) {\n          return +value >= +comparison[0];\n        }\n      },\n      // eslint-disable-next-line sort-keys\n      '>': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.number.gt', i18n.conditions.number.gt);\n        },\n        init: Criteria.initInput,\n        inputValue: Criteria.inputValueInput,\n        isInputValid: Criteria.isInputValidInput,\n        search: function (value, comparison) {\n          return +value > +comparison[0];\n        }\n      },\n      'between': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.number.between', i18n.conditions.number.between);\n        },\n        init: Criteria.init2Input,\n        inputValue: Criteria.inputValueInput,\n        isInputValid: Criteria.isInputValidInput,\n        search: function (value, comparison) {\n          if (+comparison[0] < +comparison[1]) {\n            return +comparison[0] <= +value && +value <= +comparison[1];\n          } else {\n            return +comparison[1] <= +value && +value <= +comparison[0];\n          }\n        }\n      },\n      // eslint-disable-next-line sort-keys\n      '!between': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.number.notBetween', i18n.conditions.number.notBetween);\n        },\n        init: Criteria.init2Input,\n        inputValue: Criteria.inputValueInput,\n        isInputValid: Criteria.isInputValidInput,\n        search: function (value, comparison) {\n          if (+comparison[0] < +comparison[1]) {\n            return !(+comparison[0] <= +value && +value <= +comparison[1]);\n          } else {\n            return !(+comparison[1] <= +value && +value <= +comparison[0]);\n          }\n        }\n      },\n      'null': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.number.empty', i18n.conditions.number.empty);\n        },\n        init: Criteria.initNoValue,\n        inputValue: function () {\n          return;\n        },\n        isInputValid: function () {\n          return true;\n        },\n        search: function (value) {\n          return value === null || value === undefined || value.length === 0;\n        }\n      },\n      // eslint-disable-next-line sort-keys\n      '!null': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.number.notEmpty', i18n.conditions.number.notEmpty);\n        },\n        init: Criteria.initNoValue,\n        inputValue: function () {\n          return;\n        },\n        isInputValid: function () {\n          return true;\n        },\n        search: function (value) {\n          return !(value === null || value === undefined || value.length === 0);\n        }\n      }\n    }; // The order of the conditions will make eslint sad :(\n    // Has to be in this order so that they are displayed correctly in select elements\n    // Also have to disable member ordering for this as the private methods used are not yet declared otherwise\n    // eslint-disable-next-line @typescript-eslint/member-ordering\n\n    Criteria.numFmtConditions = {\n      '=': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.number.equals', i18n.conditions.number.equals);\n        },\n        init: Criteria.initSelect,\n        inputValue: Criteria.inputValueSelect,\n        isInputValid: Criteria.isInputValidSelect,\n        search: function (value, comparison) {\n          var val = value.indexOf('-') === 0 ? '-' + value.replace(/[^0-9.]/g, '') : value.replace(/[^0-9.]/g, '');\n          var comp = comparison[0].indexOf('-') === 0 ? '-' + comparison[0].replace(/[^0-9.]/g, '') : comparison[0].replace(/[^0-9.]/g, '');\n          return +val === +comp;\n        }\n      },\n      // eslint-disable-next-line sort-keys\n      '!=': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.number.not', i18n.conditions.number.not);\n        },\n        init: Criteria.initSelect,\n        inputValue: Criteria.inputValueSelect,\n        isInputValid: Criteria.isInputValidSelect,\n        search: function (value, comparison) {\n          var val = value.indexOf('-') === 0 ? '-' + value.replace(/[^0-9.]/g, '') : value.replace(/[^0-9.]/g, '');\n          var comp = comparison[0].indexOf('-') === 0 ? '-' + comparison[0].replace(/[^0-9.]/g, '') : comparison[0].replace(/[^0-9.]/g, '');\n          return +val !== +comp;\n        }\n      },\n      '<': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.number.lt', i18n.conditions.number.lt);\n        },\n        init: Criteria.initInput,\n        inputValue: Criteria.inputValueInput,\n        isInputValid: Criteria.isInputValidInput,\n        search: function (value, comparison) {\n          var val = value.indexOf('-') === 0 ? '-' + value.replace(/[^0-9.]/g, '') : value.replace(/[^0-9.]/g, '');\n          var comp = comparison[0].indexOf('-') === 0 ? '-' + comparison[0].replace(/[^0-9.]/g, '') : comparison[0].replace(/[^0-9.]/g, '');\n          return +val < +comp;\n        }\n      },\n      '<=': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.number.lte', i18n.conditions.number.lte);\n        },\n        init: Criteria.initInput,\n        inputValue: Criteria.inputValueInput,\n        isInputValid: Criteria.isInputValidInput,\n        search: function (value, comparison) {\n          var val = value.indexOf('-') === 0 ? '-' + value.replace(/[^0-9.]/g, '') : value.replace(/[^0-9.]/g, '');\n          var comp = comparison[0].indexOf('-') === 0 ? '-' + comparison[0].replace(/[^0-9.]/g, '') : comparison[0].replace(/[^0-9.]/g, '');\n          return +val <= +comp;\n        }\n      },\n      '>=': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.number.gte', i18n.conditions.number.gte);\n        },\n        init: Criteria.initInput,\n        inputValue: Criteria.inputValueInput,\n        isInputValid: Criteria.isInputValidInput,\n        search: function (value, comparison) {\n          var val = value.indexOf('-') === 0 ? '-' + value.replace(/[^0-9.]/g, '') : value.replace(/[^0-9.]/g, '');\n          var comp = comparison[0].indexOf('-') === 0 ? '-' + comparison[0].replace(/[^0-9.]/g, '') : comparison[0].replace(/[^0-9.]/g, '');\n          return +val >= +comp;\n        }\n      },\n      // eslint-disable-next-line sort-keys\n      '>': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.number.gt', i18n.conditions.number.gt);\n        },\n        init: Criteria.initInput,\n        inputValue: Criteria.inputValueInput,\n        isInputValid: Criteria.isInputValidInput,\n        search: function (value, comparison) {\n          var val = value.indexOf('-') === 0 ? '-' + value.replace(/[^0-9.]/g, '') : value.replace(/[^0-9.]/g, '');\n          var comp = comparison[0].indexOf('-') === 0 ? '-' + comparison[0].replace(/[^0-9.]/g, '') : comparison[0].replace(/[^0-9.]/g, '');\n          return +val > +comp;\n        }\n      },\n      'between': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.number.between', i18n.conditions.number.between);\n        },\n        init: Criteria.init2Input,\n        inputValue: Criteria.inputValueInput,\n        isInputValid: Criteria.isInputValidInput,\n        search: function (value, comparison) {\n          var val = value.indexOf('-') === 0 ? '-' + value.replace(/[^0-9.]/g, '') : value.replace(/[^0-9.]/g, '');\n          var comp0 = comparison[0].indexOf('-') === 0 ? '-' + comparison[0].replace(/[^0-9.]/g, '') : comparison[0].replace(/[^0-9.]/g, '');\n          var comp1 = comparison[1].indexOf('-') === 0 ? '-' + comparison[1].replace(/[^0-9.]/g, '') : comparison[1].replace(/[^0-9.]/g, '');\n\n          if (+comp0 < +comp1) {\n            return +comp0 <= +val && +val <= +comp1;\n          } else {\n            return +comp1 <= +val && +val <= +comp0;\n          }\n        }\n      },\n      // eslint-disable-next-line sort-keys\n      '!between': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.number.notBetween', i18n.conditions.number.notBetween);\n        },\n        init: Criteria.init2Input,\n        inputValue: Criteria.inputValueInput,\n        isInputValid: Criteria.isInputValidInput,\n        search: function (value, comparison) {\n          var val = value.indexOf('-') === 0 ? '-' + value.replace(/[^0-9.]/g, '') : value.replace(/[^0-9.]/g, '');\n          var comp0 = comparison[0].indexOf('-') === 0 ? '-' + comparison[0].replace(/[^0-9.]/g, '') : comparison[0].replace(/[^0-9.]/g, '');\n          var comp1 = comparison[1].indexOf('-') === 0 ? '-' + comparison[1].replace(/[^0-9.]/g, '') : comparison[1].replace(/[^0-9.]/g, '');\n\n          if (+comp0 < +comp1) {\n            return !(+comp0 <= +val && +val <= +comp1);\n          } else {\n            return !(+comp1 <= +val && +val <= +comp0);\n          }\n        }\n      },\n      'null': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.number.empty', i18n.conditions.number.empty);\n        },\n        init: Criteria.initNoValue,\n        inputValue: function () {\n          return;\n        },\n        isInputValid: function () {\n          return true;\n        },\n        search: function (value) {\n          return value === null || value === undefined || value.length === 0;\n        }\n      },\n      // eslint-disable-next-line sort-keys\n      '!null': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.number.notEmpty', i18n.conditions.number.notEmpty);\n        },\n        init: Criteria.initNoValue,\n        inputValue: function () {\n          return;\n        },\n        isInputValid: function () {\n          return true;\n        },\n        search: function (value) {\n          return !(value === null || value === undefined || value.length === 0);\n        }\n      }\n    }; // The order of the conditions will make eslint sad :(\n    // Has to be in this order so that they are displayed correctly in select elements\n    // Also have to disable member ordering for this as the private methods used are not yet declared otherwise\n    // eslint-disable-next-line @typescript-eslint/member-ordering\n\n    Criteria.stringConditions = {\n      '=': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.string.equals', i18n.conditions.string.equals);\n        },\n        init: Criteria.initSelect,\n        inputValue: Criteria.inputValueSelect,\n        isInputValid: Criteria.isInputValidSelect,\n        search: function (value, comparison) {\n          return value === comparison[0];\n        }\n      },\n      // eslint-disable-next-line sort-keys\n      '!=': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.string.not', i18n.conditions.string.not);\n        },\n        init: Criteria.initSelect,\n        inputValue: Criteria.inputValueSelect,\n        isInputValid: Criteria.isInputValidInput,\n        search: function (value, comparison) {\n          return value !== comparison[0];\n        }\n      },\n      'starts': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.string.startsWith', i18n.conditions.string.startsWith);\n        },\n        init: Criteria.initInput,\n        inputValue: Criteria.inputValueInput,\n        isInputValid: Criteria.isInputValidInput,\n        search: function (value, comparison) {\n          return value.toLowerCase().indexOf(comparison[0].toLowerCase()) === 0;\n        }\n      },\n      // eslint-disable-next-line sort-keys\n      'contains': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.string.contains', i18n.conditions.string.contains);\n        },\n        init: Criteria.initInput,\n        inputValue: Criteria.inputValueInput,\n        isInputValid: Criteria.isInputValidInput,\n        search: function (value, comparison) {\n          return value.toLowerCase().indexOf(comparison[0].toLowerCase()) !== -1;\n        }\n      },\n      'ends': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.string.endsWith', i18n.conditions.string.endsWith);\n        },\n        init: Criteria.initInput,\n        inputValue: Criteria.inputValueInput,\n        isInputValid: Criteria.isInputValidInput,\n        search: function (value, comparison) {\n          return value.toLowerCase().endsWith(comparison[0].toLowerCase());\n        }\n      },\n      'null': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.string.empty', i18n.conditions.string.empty);\n        },\n        init: Criteria.initNoValue,\n        inputValue: function () {\n          return;\n        },\n        isInputValid: function () {\n          return true;\n        },\n        search: function (value) {\n          return value === null || value === undefined || value.length === 0;\n        }\n      },\n      // eslint-disable-next-line sort-keys\n      '!null': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.string.notEmpty', i18n.conditions.string.notEmpty);\n        },\n        init: Criteria.initNoValue,\n        inputValue: function () {\n          return;\n        },\n        isInputValid: function () {\n          return true;\n        },\n        search: function (value) {\n          return !(value === null || value === undefined || value.length === 0);\n        }\n      }\n    }; // The order of the conditions will make eslint sad :(\n    // Also have to disable member ordering for this as the private methods used are not yet declared otherwise\n    // eslint-disable-next-line @typescript-eslint/member-ordering\n\n    Criteria.arrayConditions = {\n      'contains': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.array.contains', i18n.conditions.array.contains);\n        },\n        init: Criteria.initSelectArray,\n        inputValue: Criteria.inputValueSelect,\n        isInputValid: Criteria.isInputValidSelect,\n        search: function (value, comparison) {\n          return value.indexOf(comparison[0]) !== -1;\n        }\n      },\n      'without': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.array.without', i18n.conditions.array.without);\n        },\n        init: Criteria.initSelectArray,\n        inputValue: Criteria.inputValueSelect,\n        isInputValid: Criteria.isInputValidSelect,\n        search: function (value, comparison) {\n          return value.indexOf(comparison[0]) === -1;\n        }\n      },\n      // eslint-disable-next-line sort-keys\n      '=': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.array.equals', i18n.conditions.array.equals);\n        },\n        init: Criteria.initSelect,\n        inputValue: Criteria.inputValueSelect,\n        isInputValid: Criteria.isInputValidSelect,\n        search: function (value, comparison) {\n          if (value.length === comparison[0].length) {\n            for (var i = 0; i < value.length; i++) {\n              if (value[i] !== comparison[0][i]) {\n                return false;\n              }\n            }\n\n            return true;\n          }\n\n          return false;\n        }\n      },\n      // eslint-disable-next-line sort-keys\n      '!=': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.array.not', i18n.conditions.array.not);\n        },\n        init: Criteria.initSelect,\n        inputValue: Criteria.inputValueSelect,\n        isInputValid: Criteria.isInputValidSelect,\n        search: function (value, comparison) {\n          if (value.length === comparison[0].length) {\n            for (var i = 0; i < value.length; i++) {\n              if (value[i] !== comparison[0][i]) {\n                return true;\n              }\n            }\n\n            return false;\n          }\n\n          return true;\n        }\n      },\n      'null': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.array.empty', i18n.conditions.array.empty);\n        },\n        init: Criteria.initNoValue,\n        inputValue: function () {\n          return;\n        },\n        isInputValid: function () {\n          return true;\n        },\n        search: function (value) {\n          return value === null || value === undefined || value.length === 0;\n        }\n      },\n      // eslint-disable-next-line sort-keys\n      '!null': {\n        conditionName: function (dt, i18n) {\n          return dt.i18n('searchBuilder.conditions.array.notEmpty', i18n.conditions.array.notEmpty);\n        },\n        init: Criteria.initNoValue,\n        inputValue: function () {\n          return;\n        },\n        isInputValid: function () {\n          return true;\n        },\n        search: function (value) {\n          return value !== null && value !== undefined && value.length !== 0;\n        }\n      }\n    }; // eslint will be sad because we have to disable member ordering for this as the\n    // private static properties used are not yet declared otherwise\n    // eslint-disable-next-line @typescript-eslint/member-ordering\n\n    Criteria.defaults = {\n      columns: true,\n      conditions: {\n        'array': Criteria.arrayConditions,\n        'date': Criteria.dateConditions,\n        'html': Criteria.stringConditions,\n        'html-num': Criteria.numConditions,\n        'html-num-fmt': Criteria.numFmtConditions,\n        'luxon': Criteria.luxonDateConditions,\n        'moment': Criteria.momentDateConditions,\n        'num': Criteria.numConditions,\n        'num-fmt': Criteria.numFmtConditions,\n        'string': Criteria.stringConditions\n      },\n      depthLimit: false,\n      enterSearch: false,\n      filterChanged: undefined,\n      greyscale: false,\n      i18n: {\n        add: 'Add Condition',\n        button: {\n          0: 'Search Builder',\n          _: 'Search Builder (%d)'\n        },\n        clearAll: 'Clear All',\n        condition: 'Condition',\n        data: 'Data',\n        deleteTitle: 'Delete filtering rule',\n        leftTitle: 'Outdent criteria',\n        logicAnd: 'And',\n        logicOr: 'Or',\n        rightTitle: 'Indent criteria',\n        title: {\n          0: 'Custom Search Builder',\n          _: 'Custom Search Builder (%d)'\n        },\n        value: 'Value',\n        valueJoiner: 'and'\n      },\n      logic: 'AND',\n      orthogonal: {\n        display: 'display',\n        search: 'filter'\n      },\n      preDefined: false\n    };\n    return Criteria;\n  }();\n\n  var $$1;\n  var dataTable$1;\n  /**\n   * Sets the value of jQuery for use in the file\n   *\n   * @param jq the instance of jQuery to be set\n   */\n\n  function setJQuery$1(jq) {\n    $$1 = jq;\n    dataTable$1 = jq.fn.dataTable;\n  }\n  /**\n   * The Group class is used within SearchBuilder to represent a group of criteria\n   */\n\n\n  var Group = function () {\n    function Group(table, opts, topGroup, index, isChild, depth) {\n      if (index === void 0) {\n        index = 0;\n      }\n\n      if (isChild === void 0) {\n        isChild = false;\n      }\n\n      if (depth === void 0) {\n        depth = 1;\n      } // Check that the required version of DataTables is included\n\n\n      if (!dataTable$1 || !dataTable$1.versionCheck || !dataTable$1.versionCheck('1.10.0')) {\n        throw new Error('SearchBuilder requires DataTables 1.10 or newer');\n      }\n\n      this.classes = $$1.extend(true, {}, Group.classes); // Get options from user\n\n      this.c = $$1.extend(true, {}, Group.defaults, opts);\n      this.s = {\n        criteria: [],\n        depth: depth,\n        dt: table,\n        index: index,\n        isChild: isChild,\n        logic: undefined,\n        opts: opts,\n        toDrop: undefined,\n        topGroup: topGroup\n      };\n      this.dom = {\n        add: $$1('<button/>').addClass(this.classes.add).addClass(this.classes.button).attr('type', 'button'),\n        clear: $$1('<button>&times</button>').addClass(this.classes.button).addClass(this.classes.clearGroup).attr('type', 'button'),\n        container: $$1('<div/>').addClass(this.classes.group),\n        logic: $$1('<button/>').addClass(this.classes.logic).addClass(this.classes.button).attr('type', 'button'),\n        logicContainer: $$1('<div/>').addClass(this.classes.logicContainer)\n      }; // A reference to the top level group is maintained throughout any subgroups and criteria that may be created\n\n      if (this.s.topGroup === undefined) {\n        this.s.topGroup = this.dom.container;\n      }\n\n      this._setup();\n\n      return this;\n    }\n    /**\n     * Destroys the groups buttons, clears the internal criteria and removes it from the dom\n     */\n\n\n    Group.prototype.destroy = function () {\n      // Turn off listeners\n      $$1(this.dom.add).off('.dtsb');\n      $$1(this.dom.logic).off('.dtsb'); // Trigger event for groups at a higher level to pick up on\n\n      $$1(this.dom.container).trigger('dtsb-destroy').remove();\n      this.s.criteria = [];\n    };\n    /**\n     * Gets the details required to rebuild the group\n     */\n    // Eslint upset at empty object but needs to be done\n    // eslint-disable-next-line @typescript-eslint/ban-types\n\n\n    Group.prototype.getDetails = function () {\n      if (this.s.criteria.length === 0) {\n        return {};\n      }\n\n      var details = {\n        criteria: [],\n        logic: this.s.logic\n      }; // NOTE here crit could be either a subgroup or a criteria\n\n      for (var _i = 0, _a = this.s.criteria; _i < _a.length; _i++) {\n        var crit = _a[_i];\n        details.criteria.push(crit.criteria.getDetails());\n      }\n\n      return details;\n    };\n    /**\n     * Getter for the node for the container of the group\n     *\n     * @returns Node for the container of the group\n     */\n\n\n    Group.prototype.getNode = function () {\n      return this.dom.container;\n    };\n    /**\n     * Rebuilds the group based upon the details passed in\n     *\n     * @param loadedDetails the details required to rebuild the group\n     */\n\n\n    Group.prototype.rebuild = function (loadedDetails) {\n      // If no criteria are stored then just return\n      if (loadedDetails.criteria === undefined || loadedDetails.criteria === null || Array.isArray(loadedDetails.criteria) && loadedDetails.criteria.length === 0) {\n        return;\n      }\n\n      this.s.logic = loadedDetails.logic;\n      $$1(this.dom.logic).text(this.s.logic === 'OR' ? this.s.dt.i18n('searchBuilder.logicOr', this.c.i18n.logicOr) : this.s.dt.i18n('searchBuilder.logicAnd', this.c.i18n.logicAnd)); // Add all of the criteria, be it a sub group or a criteria\n\n      if (Array.isArray(loadedDetails.criteria)) {\n        for (var _i = 0, _a = loadedDetails.criteria; _i < _a.length; _i++) {\n          var crit = _a[_i];\n\n          if (crit.logic !== undefined) {\n            this._addPrevGroup(crit);\n          } else if (crit.logic === undefined) {\n            this._addPrevCriteria(crit);\n          }\n        }\n      } // For all of the criteria children, update the arrows incase they require changing and set the listeners\n\n\n      for (var _b = 0, _c = this.s.criteria; _b < _c.length; _b++) {\n        var crit = _c[_b];\n\n        if (crit.criteria instanceof Criteria) {\n          crit.criteria.updateArrows(this.s.criteria.length > 1, false);\n\n          this._setCriteriaListeners(crit.criteria);\n        }\n      }\n    };\n    /**\n     * Redraws the Contents of the searchBuilder Groups and Criteria\n     */\n\n\n    Group.prototype.redrawContents = function () {\n      // Clear the container out and add the basic elements\n      $$1(this.dom.container).empty().append(this.dom.logicContainer).append(this.dom.add); // Sort the criteria by index so that they appear in the correct order\n\n      this.s.criteria.sort(function (a, b) {\n        if (a.criteria.s.index < b.criteria.s.index) {\n          return -1;\n        } else if (a.criteria.s.index > b.criteria.s.index) {\n          return 1;\n        }\n\n        return 0;\n      });\n      this.setListeners();\n\n      for (var i = 0; i < this.s.criteria.length; i++) {\n        var crit = this.s.criteria[i].criteria;\n\n        if (crit instanceof Criteria) {\n          // Reset the index to the new value\n          this.s.criteria[i].index = i;\n          this.s.criteria[i].criteria.s.index = i; // Add to the group\n\n          $$1(this.s.criteria[i].criteria.dom.container).insertBefore(this.dom.add); // Set listeners for various points\n\n          this._setCriteriaListeners(crit);\n\n          this.s.criteria[i].criteria.rebuild(this.s.criteria[i].criteria.getDetails());\n        } else if (crit instanceof Group && crit.s.criteria.length > 0) {\n          // Reset the index to the new value\n          this.s.criteria[i].index = i;\n          this.s.criteria[i].criteria.s.index = i; // Add the sub group to the group\n\n          $$1(this.s.criteria[i].criteria.dom.container).insertBefore(this.dom.add); // Redraw the contents of the group\n\n          crit.redrawContents();\n\n          this._setGroupListeners(crit);\n        } else {\n          // The group is empty so remove it\n          this.s.criteria.splice(i, 1);\n          i--;\n        }\n      }\n\n      this.setupLogic();\n    };\n    /**\n     * Resizes the logic button only rather than the entire dom.\n     */\n\n\n    Group.prototype.redrawLogic = function () {\n      for (var _i = 0, _a = this.s.criteria; _i < _a.length; _i++) {\n        var crit = _a[_i];\n\n        if (crit instanceof Group) {\n          crit.redrawLogic();\n        }\n      }\n\n      this.setupLogic();\n    };\n    /**\n     * Search method, checking the row data against the criteria in the group\n     *\n     * @param rowData The row data to be compared\n     * @returns boolean The result of the search\n     */\n\n\n    Group.prototype.search = function (rowData, rowIdx) {\n      if (this.s.logic === 'AND') {\n        return this._andSearch(rowData, rowIdx);\n      } else if (this.s.logic === 'OR') {\n        return this._orSearch(rowData, rowIdx);\n      }\n\n      return true;\n    };\n    /**\n     * Locates the groups logic button to the correct location on the page\n     */\n\n\n    Group.prototype.setupLogic = function () {\n      // Remove logic button\n      $$1(this.dom.logicContainer).remove();\n      $$1(this.dom.clear).remove(); // If there are no criteria in the group then keep the logic removed and return\n\n      if (this.s.criteria.length < 1) {\n        if (!this.s.isChild) {\n          $$1(this.dom.container).trigger('dtsb-destroy'); // Set criteria left margin\n\n          $$1(this.dom.container).css('margin-left', 0);\n        }\n\n        return;\n      } // Set width, take 2 for the border\n\n\n      var height = $$1(this.dom.container).height() - 1;\n      $$1(this.dom.clear).height('0px');\n      $$1(this.dom.logicContainer).append(this.dom.clear).width(height); // Prepend logic button\n\n      $$1(this.dom.container).prepend(this.dom.logicContainer);\n\n      this._setLogicListener(); // Set criteria left margin\n\n\n      $$1(this.dom.container).css('margin-left', $$1(this.dom.logicContainer).outerHeight(true));\n      var logicOffset = $$1(this.dom.logicContainer).offset(); // Set horizontal alignment\n\n      var currentLeft = logicOffset.left;\n      var groupLeft = $$1(this.dom.container).offset().left;\n      var shuffleLeft = currentLeft - groupLeft;\n      var newPos = currentLeft - shuffleLeft - $$1(this.dom.logicContainer).outerHeight(true);\n      $$1(this.dom.logicContainer).offset({\n        left: newPos\n      }); // Set vertical alignment\n\n      var firstCrit = $$1(this.dom.logicContainer).next();\n      var currentTop = logicOffset.top;\n      var firstTop = $$1(firstCrit).offset().top;\n      var shuffleTop = currentTop - firstTop;\n      var newTop = currentTop - shuffleTop;\n      $$1(this.dom.logicContainer).offset({\n        top: newTop\n      });\n      $$1(this.dom.clear).outerHeight($$1(this.dom.logicContainer).height());\n\n      this._setClearListener();\n    };\n    /**\n     * Sets listeners on the groups elements\n     */\n\n\n    Group.prototype.setListeners = function () {\n      var _this = this;\n\n      $$1(this.dom.add).unbind('click');\n      $$1(this.dom.add).on('click', function () {\n        // If this is the parent group then the logic button has not been added yet\n        if (!_this.s.isChild) {\n          $$1(_this.dom.container).prepend(_this.dom.logicContainer);\n        }\n\n        _this.addCriteria();\n\n        $$1(_this.dom.container).trigger('dtsb-add');\n\n        _this.s.dt.state.save();\n\n        return false;\n      });\n\n      for (var _i = 0, _a = this.s.criteria; _i < _a.length; _i++) {\n        var crit = _a[_i];\n        crit.criteria.setListeners();\n      }\n\n      this._setClearListener();\n\n      this._setLogicListener();\n    };\n    /**\n     * Adds a criteria to the group\n     *\n     * @param crit Instance of Criteria to be added to the group\n     */\n\n\n    Group.prototype.addCriteria = function (crit, redraw) {\n      if (crit === void 0) {\n        crit = null;\n      }\n\n      if (redraw === void 0) {\n        redraw = true;\n      }\n\n      var index = crit === null ? this.s.criteria.length : crit.s.index;\n      var criteria = new Criteria(this.s.dt, this.s.opts, this.s.topGroup, index, this.s.depth); // If a Criteria has been passed in then set the values to continue that\n\n      if (crit !== null) {\n        criteria.c = crit.c;\n        criteria.s = crit.s;\n        criteria.s.depth = this.s.depth;\n        criteria.classes = crit.classes;\n      }\n\n      criteria.populate();\n      var inserted = false;\n\n      for (var i = 0; i < this.s.criteria.length; i++) {\n        if (i === 0 && this.s.criteria[i].criteria.s.index > criteria.s.index) {\n          // Add the node for the criteria at the start of the group\n          $$1(criteria.getNode()).insertBefore(this.s.criteria[i].criteria.dom.container);\n          inserted = true;\n        } else if (i < this.s.criteria.length - 1 && this.s.criteria[i].criteria.s.index < criteria.s.index && this.s.criteria[i + 1].criteria.s.index > criteria.s.index) {\n          // Add the node for the criteria in the correct location\n          $$1(criteria.getNode()).insertAfter(this.s.criteria[i].criteria.dom.container);\n          inserted = true;\n        }\n      }\n\n      if (!inserted) {\n        $$1(criteria.getNode()).insertBefore(this.dom.add);\n      } // Add the details for this criteria to the array\n\n\n      this.s.criteria.push({\n        criteria: criteria,\n        index: index\n      });\n      this.s.criteria = this.s.criteria.sort(function (a, b) {\n        return a.criteria.s.index - b.criteria.s.index;\n      });\n\n      for (var _i = 0, _a = this.s.criteria; _i < _a.length; _i++) {\n        var opt = _a[_i];\n\n        if (opt.criteria instanceof Criteria) {\n          opt.criteria.updateArrows(this.s.criteria.length > 1, redraw);\n        }\n      }\n\n      this._setCriteriaListeners(criteria);\n\n      criteria.setListeners();\n      this.setupLogic();\n    };\n    /**\n     * Checks the group to see if it has any filled criteria\n     */\n\n\n    Group.prototype.checkFilled = function () {\n      for (var _i = 0, _a = this.s.criteria; _i < _a.length; _i++) {\n        var crit = _a[_i];\n\n        if (crit.criteria instanceof Criteria && crit.criteria.s.filled || crit.criteria instanceof Group && crit.criteria.checkFilled()) {\n          return true;\n        }\n      }\n\n      return false;\n    };\n    /**\n     * Gets the count for the number of criteria in this group and any sub groups\n     */\n\n\n    Group.prototype.count = function () {\n      var count = 0;\n\n      for (var _i = 0, _a = this.s.criteria; _i < _a.length; _i++) {\n        var crit = _a[_i];\n\n        if (crit.criteria instanceof Group) {\n          count += crit.criteria.count();\n        } else {\n          count++;\n        }\n      }\n\n      return count;\n    };\n    /**\n     * Rebuilds a sub group that previously existed\n     *\n     * @param loadedGroup The details of a group within this group\n     */\n\n\n    Group.prototype._addPrevGroup = function (loadedGroup) {\n      var idx = this.s.criteria.length;\n      var group = new Group(this.s.dt, this.c, this.s.topGroup, idx, true, this.s.depth + 1); // Add the new group to the criteria array\n\n      this.s.criteria.push({\n        criteria: group,\n        index: idx,\n        logic: group.s.logic\n      }); // Rebuild it with the previous conditions for that group\n\n      group.rebuild(loadedGroup);\n      this.s.criteria[idx].criteria = group;\n      $$1(this.s.topGroup).trigger('dtsb-redrawContents');\n\n      this._setGroupListeners(group);\n    };\n    /**\n     * Rebuilds a criteria of this group that previously existed\n     *\n     * @param loadedCriteria The details of a criteria within the group\n     */\n\n\n    Group.prototype._addPrevCriteria = function (loadedCriteria) {\n      var idx = this.s.criteria.length;\n      var criteria = new Criteria(this.s.dt, this.s.opts, this.s.topGroup, idx, this.s.depth);\n      criteria.populate(); // Add the new criteria to the criteria array\n\n      this.s.criteria.push({\n        criteria: criteria,\n        index: idx\n      }); // Rebuild it with the previous conditions for that criteria\n\n      criteria.rebuild(loadedCriteria);\n      this.s.criteria[idx].criteria = criteria;\n      $$1(this.s.topGroup).trigger('dtsb-redrawContents');\n    };\n    /**\n     * Checks And the criteria using AND logic\n     *\n     * @param rowData The row data to be checked against the search criteria\n     * @returns boolean The result of the AND search\n     */\n\n\n    Group.prototype._andSearch = function (rowData, rowIdx) {\n      // If there are no criteria then return true for this group\n      if (this.s.criteria.length === 0) {\n        return true;\n      }\n\n      for (var _i = 0, _a = this.s.criteria; _i < _a.length; _i++) {\n        var crit = _a[_i]; // If the criteria is not complete then skip it\n\n        if (crit.criteria instanceof Criteria && !crit.criteria.s.filled) {\n          continue;\n        } // Otherwise if a single one fails return false\n        else if (!crit.criteria.search(rowData, rowIdx)) {\n          return false;\n        }\n      } // If we get to here then everything has passed, so return true for the group\n\n\n      return true;\n    };\n    /**\n     * Checks And the criteria using OR logic\n     *\n     * @param rowData The row data to be checked against the search criteria\n     * @returns boolean The result of the OR search\n     */\n\n\n    Group.prototype._orSearch = function (rowData, rowIdx) {\n      // If there are no criteria in the group then return true\n      if (this.s.criteria.length === 0) {\n        return true;\n      } // This will check to make sure that at least one criteria in the group is complete\n\n\n      var filledfound = false;\n\n      for (var _i = 0, _a = this.s.criteria; _i < _a.length; _i++) {\n        var crit = _a[_i];\n\n        if (crit.criteria instanceof Criteria && crit.criteria.s.filled) {\n          // A completed criteria has been found so set the flag\n          filledfound = true; // If the search passes then return true\n\n          if (crit.criteria.search(rowData, rowIdx)) {\n            return true;\n          }\n        } else if (crit.criteria instanceof Group && crit.criteria.checkFilled()) {\n          filledfound = true;\n\n          if (crit.criteria.search(rowData, rowIdx)) {\n            return true;\n          }\n        }\n      } // If we get here we need to return the inverse of filledfound,\n      //  as if any have been found and we are here then none have passed\n\n\n      return !filledfound;\n    };\n    /**\n     * Removes a criteria from the group\n     *\n     * @param criteria The criteria instance to be removed\n     */\n\n\n    Group.prototype._removeCriteria = function (criteria, group) {\n      if (group === void 0) {\n        group = false;\n      } // If removing a criteria and there is only then then just destroy the group\n\n\n      if (this.s.criteria.length <= 1 && this.s.isChild) {\n        this.destroy();\n      } else {\n        // Otherwise splice the given criteria out and redo the indexes\n        var last = void 0;\n\n        for (var i = 0; i < this.s.criteria.length; i++) {\n          if (this.s.criteria[i].index === criteria.s.index && (!group || this.s.criteria[i].criteria instanceof Group)) {\n            last = i;\n          }\n        } // We want to remove the last element with the desired index, as its replacement will be inserted before it\n\n\n        if (last !== undefined) {\n          this.s.criteria.splice(last, 1);\n        }\n\n        for (var i = 0; i < this.s.criteria.length; i++) {\n          this.s.criteria[i].index = i;\n          this.s.criteria[i].criteria.s.index = i;\n        }\n      }\n    };\n    /**\n     * Sets the listeners in group for a criteria\n     *\n     * @param criteria The criteria for the listeners to be set on\n     */\n\n\n    Group.prototype._setCriteriaListeners = function (criteria) {\n      var _this = this;\n\n      $$1(criteria.dom[\"delete\"]).unbind('click').on('click', function () {\n        _this._removeCriteria(criteria);\n\n        $$1(criteria.dom.container).remove();\n\n        for (var _i = 0, _a = _this.s.criteria; _i < _a.length; _i++) {\n          var crit = _a[_i];\n\n          if (crit.criteria instanceof Criteria) {\n            crit.criteria.updateArrows(_this.s.criteria.length > 1);\n          }\n        }\n\n        criteria.destroy();\n\n        _this.s.dt.draw();\n\n        $$1(_this.s.topGroup).trigger('dtsb-redrawContents');\n        $$1(_this.s.topGroup).trigger('dtsb-updateTitle');\n        return false;\n      });\n      $$1(criteria.dom.right).unbind('click').on('click', function () {\n        var idx = criteria.s.index;\n        var group = new Group(_this.s.dt, _this.s.opts, _this.s.topGroup, criteria.s.index, true, _this.s.depth + 1); // Add the criteria that is to be moved to the new group\n\n        group.addCriteria(criteria); // Update the details in the current groups criteria array\n\n        _this.s.criteria[idx].criteria = group;\n        _this.s.criteria[idx].logic = 'AND';\n        $$1(_this.s.topGroup).trigger('dtsb-redrawContents');\n\n        _this._setGroupListeners(group);\n\n        return false;\n      });\n      $$1(criteria.dom.left).unbind('click').on('click', function () {\n        _this.s.toDrop = new Criteria(_this.s.dt, _this.s.opts, _this.s.topGroup, criteria.s.index);\n        _this.s.toDrop.s = criteria.s;\n        _this.s.toDrop.c = criteria.c;\n        _this.s.toDrop.classes = criteria.classes;\n\n        _this.s.toDrop.populate(); // The dropCriteria event mutates the reference to the index so need to store it\n\n\n        var index = _this.s.toDrop.s.index;\n        $$1(_this.dom.container).trigger('dtsb-dropCriteria');\n        criteria.s.index = index;\n\n        _this._removeCriteria(criteria); // By tracking the top level group we can directly trigger a redraw on it,\n        //  bubbling is also possible, but that is slow with deep levelled groups\n\n\n        $$1(_this.s.topGroup).trigger('dtsb-redrawContents');\n\n        _this.s.dt.draw();\n\n        return false;\n      });\n    };\n    /**\n     * Set's the listeners for the group clear button\n     */\n\n\n    Group.prototype._setClearListener = function () {\n      var _this = this;\n\n      $$1(this.dom.clear).unbind('click').on('click', function () {\n        if (!_this.s.isChild) {\n          $$1(_this.dom.container).trigger('dtsb-clearContents');\n          return false;\n        }\n\n        _this.destroy();\n\n        $$1(_this.s.topGroup).trigger('dtsb-updateTitle');\n        $$1(_this.s.topGroup).trigger('dtsb-redrawContents');\n        return false;\n      });\n    };\n    /**\n     * Sets listeners for sub groups of this group\n     *\n     * @param group The sub group that the listeners are to be set on\n     */\n\n\n    Group.prototype._setGroupListeners = function (group) {\n      var _this = this; // Set listeners for the new group\n\n\n      $$1(group.dom.add).unbind('click').on('click', function () {\n        _this.setupLogic();\n\n        $$1(_this.dom.container).trigger('dtsb-add');\n        return false;\n      });\n      $$1(group.dom.container).unbind('dtsb-add').on('dtsb-add', function () {\n        _this.setupLogic();\n\n        $$1(_this.dom.container).trigger('dtsb-add');\n        return false;\n      });\n      $$1(group.dom.container).unbind('dtsb-destroy').on('dtsb-destroy', function () {\n        _this._removeCriteria(group, true);\n\n        $$1(group.dom.container).remove();\n\n        _this.setupLogic();\n\n        return false;\n      });\n      $$1(group.dom.container).unbind('dtsb-dropCriteria').on('dtsb-dropCriteria', function () {\n        var toDrop = group.s.toDrop;\n        toDrop.s.index = group.s.index;\n        toDrop.updateArrows(_this.s.criteria.length > 1, false);\n\n        _this.addCriteria(toDrop, false);\n\n        return false;\n      });\n      group.setListeners();\n    };\n    /**\n     * Sets up the Group instance, setting listeners and appending elements\n     */\n\n\n    Group.prototype._setup = function () {\n      this.setListeners();\n      $$1(this.dom.add).text(this.s.dt.i18n('searchBuilder.add', this.c.i18n.add));\n      $$1(this.dom.logic).text(this.c.logic === 'OR' ? this.s.dt.i18n('searchBuilder.logicOr', this.c.i18n.logicOr) : this.s.dt.i18n('searchBuilder.logicAnd', this.c.i18n.logicAnd));\n      this.s.logic = this.c.logic === 'OR' ? 'OR' : 'AND';\n\n      if (this.c.greyscale) {\n        $$1(this.dom.logic).addClass(this.classes.greyscale);\n      }\n\n      $$1(this.dom.logicContainer).append(this.dom.logic).append(this.dom.clear); // Only append the logic button immediately if this is a sub group,\n      //  otherwise it will be prepended later when adding a criteria\n\n      if (this.s.isChild) {\n        $$1(this.dom.container).append(this.dom.logicContainer);\n      }\n\n      $$1(this.dom.container).append(this.dom.add);\n    };\n    /**\n     * Sets the listener for the logic button\n     */\n\n\n    Group.prototype._setLogicListener = function () {\n      var _this = this;\n\n      $$1(this.dom.logic).unbind('click').on('click', function () {\n        _this._toggleLogic();\n\n        _this.s.dt.draw();\n\n        for (var _i = 0, _a = _this.s.criteria; _i < _a.length; _i++) {\n          var crit = _a[_i];\n          crit.criteria.setListeners();\n        }\n      });\n    };\n    /**\n     * Toggles the logic for the group\n     */\n\n\n    Group.prototype._toggleLogic = function () {\n      if (this.s.logic === 'OR') {\n        this.s.logic = 'AND';\n        $$1(this.dom.logic).text(this.s.dt.i18n('searchBuilder.logicAnd', this.c.i18n.logicAnd));\n      } else if (this.s.logic === 'AND') {\n        this.s.logic = 'OR';\n        $$1(this.dom.logic).text(this.s.dt.i18n('searchBuilder.logicOr', this.c.i18n.logicOr));\n      }\n    };\n\n    Group.version = '1.1.0';\n    Group.classes = {\n      add: 'dtsb-add',\n      button: 'dtsb-button',\n      clearGroup: 'dtsb-clearGroup',\n      greyscale: 'dtsb-greyscale',\n      group: 'dtsb-group',\n      inputButton: 'dtsb-iptbtn',\n      logic: 'dtsb-logic',\n      logicContainer: 'dtsb-logicContainer'\n    };\n    Group.defaults = {\n      columns: true,\n      conditions: {\n        'date': Criteria.dateConditions,\n        'html': Criteria.stringConditions,\n        'html-num': Criteria.numConditions,\n        'html-num-fmt': Criteria.numFmtConditions,\n        'luxon': Criteria.luxonDateConditions,\n        'moment': Criteria.momentDateConditions,\n        'num': Criteria.numConditions,\n        'num-fmt': Criteria.numFmtConditions,\n        'string': Criteria.stringConditions\n      },\n      depthLimit: false,\n      enterSearch: false,\n      filterChanged: undefined,\n      greyscale: false,\n      i18n: {\n        add: 'Add Condition',\n        button: {\n          0: 'Search Builder',\n          _: 'Search Builder (%d)'\n        },\n        clearAll: 'Clear All',\n        condition: 'Condition',\n        data: 'Data',\n        deleteTitle: 'Delete filtering rule',\n        leftTitle: 'Outdent criteria',\n        logicAnd: 'And',\n        logicOr: 'Or',\n        rightTitle: 'Indent criteria',\n        title: {\n          0: 'Custom Search Builder',\n          _: 'Custom Search Builder (%d)'\n        },\n        value: 'Value',\n        valueJoiner: 'and'\n      },\n      logic: 'AND',\n      orthogonal: {\n        display: 'display',\n        search: 'filter'\n      },\n      preDefined: false\n    };\n    return Group;\n  }();\n\n  var $;\n  var dataTable;\n  /**\n   * Sets the value of jQuery for use in the file\n   *\n   * @param jq the instance of jQuery to be set\n   */\n\n  function setJQuery(jq) {\n    $ = jq;\n    dataTable = jq.fn.DataTable;\n  }\n  /**\n   * SearchBuilder class for DataTables.\n   * Allows for complex search queries to be constructed and implemented on a DataTable\n   */\n\n\n  var SearchBuilder = function () {\n    function SearchBuilder(builderSettings, opts) {\n      var _this = this; // Check that the required version of DataTables is included\n\n\n      if (!dataTable || !dataTable.versionCheck || !dataTable.versionCheck('1.10.0')) {\n        throw new Error('SearchBuilder requires DataTables 1.10 or newer');\n      }\n\n      var table = new dataTable.Api(builderSettings);\n      this.classes = $.extend(true, {}, SearchBuilder.classes); // Get options from user\n\n      this.c = $.extend(true, {}, SearchBuilder.defaults, opts);\n      this.dom = {\n        clearAll: $('<button type=\"button\">' + table.i18n('searchBuilder.clearAll', this.c.i18n.clearAll) + '</button>').addClass(this.classes.clearAll).addClass(this.classes.button).attr('type', 'button'),\n        container: $('<div/>').addClass(this.classes.container),\n        title: $('<div/>').addClass(this.classes.title),\n        titleRow: $('<div/>').addClass(this.classes.titleRow),\n        topGroup: undefined\n      };\n      this.s = {\n        dt: table,\n        opts: opts,\n        search: undefined,\n        topGroup: undefined\n      }; // If searchbuilder is already defined for this table then return\n\n      if (table.settings()[0]._searchBuilder !== undefined) {\n        return;\n      }\n\n      table.settings()[0]._searchBuilder = this; // Run the remaining setup when the table is initialised\n\n      if (this.s.dt.settings()[0]._bInitComplete) {\n        this._setUp();\n      } else {\n        table.one('init.dt', function () {\n          _this._setUp();\n        });\n      }\n\n      return this;\n    }\n    /**\n     * Gets the details required to rebuild the SearchBuilder as it currently is\n     */\n    // eslint upset at empty object but that is what it is\n    // eslint-disable-next-line @typescript-eslint/ban-types\n\n\n    SearchBuilder.prototype.getDetails = function () {\n      return this.s.topGroup.getDetails();\n    };\n    /**\n     * Getter for the node of the container for the searchBuilder\n     *\n     * @returns JQuery<HTMLElement> the node of the container\n     */\n\n\n    SearchBuilder.prototype.getNode = function () {\n      return this.dom.container;\n    };\n    /**\n     * Rebuilds the SearchBuilder to a state that is provided\n     *\n     * @param details The details required to perform a rebuild\n     */\n\n\n    SearchBuilder.prototype.rebuild = function (details) {\n      $(this.dom.clearAll).click(); // If there are no details to rebuild then return\n\n      if (details === undefined || details === null) {\n        return this;\n      }\n\n      this.s.topGroup.rebuild(details);\n      this.s.dt.draw();\n      this.s.topGroup.setListeners();\n      return this;\n    };\n    /**\n     * Applies the defaults to preDefined criteria\n     *\n     * @param preDef the array of criteria to be processed.\n     */\n\n\n    SearchBuilder.prototype._applyPreDefDefaults = function (preDef) {\n      var _this = this;\n\n      if (preDef.criteria !== undefined && preDef.logic === undefined) {\n        preDef.logic = 'AND';\n      }\n\n      var _loop_1 = function (crit) {\n        // Apply the defaults to any further criteria\n        if (crit.criteria !== undefined) {\n          crit = this_1._applyPreDefDefaults(crit);\n        } else {\n          this_1.s.dt.columns().every(function (index) {\n            if (_this.s.dt.settings()[0].aoColumns[index].sTitle === crit.data) {\n              crit.dataIdx = index;\n            }\n          });\n        }\n      };\n\n      var this_1 = this;\n\n      for (var _i = 0, _a = preDef.criteria; _i < _a.length; _i++) {\n        var crit = _a[_i];\n\n        _loop_1(crit);\n      }\n\n      return preDef;\n    };\n    /**\n     * Set's up the SearchBuilder\n     */\n\n\n    SearchBuilder.prototype._setUp = function (loadState) {\n      var _this = this;\n\n      if (loadState === void 0) {\n        loadState = true;\n      } // Register an Api method for getting the column type\n\n\n      $.fn.DataTable.Api.registerPlural('columns().type()', 'column().type()', function (selector, opts) {\n        return this.iterator('column', function (settings, column) {\n          return settings.aoColumns[column].sType;\n        }, 1);\n      }); // Check that DateTime is included, If not need to check if it could be used\n\n      if (!dataTable.DateTime) {\n        var types = this.s.dt.columns().type().toArray();\n        var columnIdxs = this.s.dt.columns().toArray(); // If the types are not yet set then draw to see if they can be retrieved then\n\n        if (types === undefined) {\n          this.s.dt.draw();\n          types = this.s.dt.columns().type().toArray();\n        }\n\n        for (var i = 0; i < columnIdxs[0].length; i++) {\n          var column = columnIdxs[0][i];\n          var type = types[column];\n\n          if ( // Check if this column can be filtered\n          (this.c.columns === true || Array.isArray(this.c.columns) && this.c.columns.indexOf(i) !== -1) && (type.indexOf('date') !== -1 || type.indexOf('moment') !== -1 || type.indexOf('luxon') !== -1)) {\n            alert('SearchBuilder Requires DateTime when used with dates.');\n            throw new Error('SearchBuilder requires DateTime');\n          }\n        }\n      }\n\n      this.s.topGroup = new Group(this.s.dt, this.c, undefined);\n\n      this._setClearListener();\n\n      this.s.dt.on('stateSaveParams', function (e, settings, data) {\n        data.searchBuilder = _this.getDetails();\n        data.page = _this.s.dt.page();\n      });\n\n      this._build();\n\n      if (loadState) {\n        var loadedState = this.s.dt.state.loaded(); // If the loaded State is not null rebuild based on it for statesave\n\n        if (loadedState !== null && loadedState.searchBuilder !== undefined) {\n          this.s.topGroup.rebuild(loadedState.searchBuilder);\n          $(this.s.topGroup.dom.container).trigger('dtsb-redrawContents');\n          this.s.dt.page(loadedState.page).draw('page');\n          this.s.topGroup.setListeners();\n        } // Otherwise load any predefined options\n        else if (this.c.preDefined !== false) {\n          this.c.preDefined = this._applyPreDefDefaults(this.c.preDefined);\n          this.rebuild(this.c.preDefined);\n        }\n      }\n\n      this._setEmptyListener();\n\n      this.s.dt.state.save();\n    };\n    /**\n     * Updates the title of the SearchBuilder\n     *\n     * @param count the number of filters in the SearchBuilder\n     */\n\n\n    SearchBuilder.prototype._updateTitle = function (count) {\n      $(this.dom.title).html(this.s.dt.i18n('searchBuilder.title', this.c.i18n.title, count));\n    };\n    /**\n     * Builds all of the dom elements together\n     */\n\n\n    SearchBuilder.prototype._build = function () {\n      var _this = this; // Empty and setup the container\n\n\n      $(this.dom.clearAll).remove();\n      $(this.dom.container).empty();\n      var count = this.s.topGroup.count();\n\n      this._updateTitle(count);\n\n      $(this.dom.titleRow).append(this.dom.title);\n      $(this.dom.container).append(this.dom.titleRow);\n      this.dom.topGroup = this.s.topGroup.getNode();\n      $(this.dom.container).append(this.dom.topGroup);\n\n      this._setRedrawListener();\n\n      var tableNode = this.s.dt.table(0).node();\n\n      if ($.fn.dataTable.ext.search.indexOf(this.s.search) === -1) {\n        // Custom search function for SearchBuilder\n        this.s.search = function (settings, searchData, dataIndex, origData) {\n          if (settings.nTable !== tableNode) {\n            return true;\n          }\n\n          return _this.s.topGroup.search(searchData, dataIndex);\n        }; // Add SearchBuilder search function to the dataTables search array\n\n\n        $.fn.dataTable.ext.search.push(this.s.search);\n      }\n\n      this.s.dt.on('destroy.dt', function () {\n        $(_this.dom.container).remove();\n        $(_this.dom.clearAll).remove();\n        var searchIdx = $.fn.dataTable.ext.search.indexOf(_this.s.search);\n\n        while (searchIdx !== -1) {\n          $.fn.dataTable.ext.search.splice(searchIdx, 1);\n          searchIdx = $.fn.dataTable.ext.search.indexOf(_this.s.search);\n        }\n      });\n    };\n    /**\n     * Checks if the clearAll button should be added or not\n     */\n\n\n    SearchBuilder.prototype._checkClear = function () {\n      if (this.s.topGroup.s.criteria.length > 0) {\n        $(this.dom.clearAll).insertAfter(this.dom.title);\n\n        this._setClearListener();\n      } else {\n        $(this.dom.clearAll).remove();\n      }\n    };\n    /**\n     * Update the count in the title/button\n     *\n     * @param count Number of filters applied\n     */\n\n\n    SearchBuilder.prototype._filterChanged = function (count) {\n      var fn = this.c.filterChanged;\n\n      if (typeof fn === 'function') {\n        fn(count, this.s.dt.i18n('searchBuilder.button', this.c.i18n.button, count));\n      }\n    };\n    /**\n     * Set the listener for the clear button\n     */\n\n\n    SearchBuilder.prototype._setClearListener = function () {\n      var _this = this;\n\n      $(this.dom.clearAll).unbind('click');\n      $(this.dom.clearAll).on('click', function () {\n        _this.s.topGroup = new Group(_this.s.dt, _this.c, undefined);\n\n        _this._build();\n\n        _this.s.dt.draw();\n\n        _this.s.topGroup.setListeners();\n\n        $(_this.dom.clearAll).remove();\n\n        _this._setEmptyListener();\n\n        _this._filterChanged(0);\n\n        return false;\n      });\n    };\n    /**\n     * Set the listener for the Redraw event\n     */\n\n\n    SearchBuilder.prototype._setRedrawListener = function () {\n      var _this = this;\n\n      $(this.s.topGroup.dom.container).unbind('dtsb-redrawContents');\n      $(this.s.topGroup.dom.container).on('dtsb-redrawContents', function () {\n        _this._checkClear();\n\n        _this.s.topGroup.redrawContents();\n\n        _this.s.topGroup.setupLogic();\n\n        _this._setEmptyListener();\n\n        var count = _this.s.topGroup.count();\n\n        _this._updateTitle(count);\n\n        _this._filterChanged(count);\n\n        _this.s.dt.state.save();\n      });\n      $(this.s.topGroup.dom.container).unbind('dtsb-redrawLogic');\n      $(this.s.topGroup.dom.container).on('dtsb-redrawLogic', function () {\n        _this.s.topGroup.redrawLogic();\n\n        var count = _this.s.topGroup.count();\n\n        _this._updateTitle(count);\n\n        _this._filterChanged(count);\n      });\n      $(this.s.topGroup.dom.container).on('dtsb-add', function () {\n        var count = _this.s.topGroup.count();\n\n        _this._updateTitle(count);\n\n        _this._filterChanged(count);\n      });\n      $(this.s.dt).on('postEdit postCreate postRemove', function () {\n        _this.s.topGroup.redrawContents();\n      });\n      $(this.s.topGroup.dom.container).unbind('dtsb-clearContents');\n      $(this.s.topGroup.dom.container).on('dtsb-clearContents', function () {\n        _this._setUp(false);\n\n        _this._filterChanged(0);\n\n        _this.s.dt.draw();\n      });\n      $(this.s.topGroup.dom.container).on('dtsb-updateTitle', function () {\n        var count = _this.s.topGroup.count();\n\n        _this._updateTitle(count);\n\n        _this._filterChanged(count);\n      });\n    };\n    /**\n     * Sets listeners to check whether clearAll should be added or removed\n     */\n\n\n    SearchBuilder.prototype._setEmptyListener = function () {\n      var _this = this;\n\n      $(this.s.topGroup.dom.add).on('click', function () {\n        _this._checkClear();\n      });\n      $(this.s.topGroup.dom.container).on('dtsb-destroy', function () {\n        $(_this.dom.clearAll).remove();\n      });\n    };\n\n    SearchBuilder.version = '1.1.0';\n    SearchBuilder.classes = {\n      button: 'dtsb-button',\n      clearAll: 'dtsb-clearAll',\n      container: 'dtsb-searchBuilder',\n      inputButton: 'dtsb-iptbtn',\n      title: 'dtsb-title',\n      titleRow: 'dtsb-titleRow'\n    };\n    SearchBuilder.defaults = {\n      columns: true,\n      conditions: {\n        'date': Criteria.dateConditions,\n        'html': Criteria.stringConditions,\n        'html-num': Criteria.numConditions,\n        'html-num-fmt': Criteria.numFmtConditions,\n        'luxon': Criteria.luxonDateConditions,\n        'moment': Criteria.momentDateConditions,\n        'num': Criteria.numConditions,\n        'num-fmt': Criteria.numFmtConditions,\n        'string': Criteria.stringConditions\n      },\n      depthLimit: false,\n      enterSearch: false,\n      filterChanged: undefined,\n      greyscale: false,\n      i18n: {\n        add: 'Add Condition',\n        button: {\n          0: 'Search Builder',\n          _: 'Search Builder (%d)'\n        },\n        clearAll: 'Clear All',\n        condition: 'Condition',\n        conditions: {\n          array: {\n            contains: 'Contains',\n            empty: 'Empty',\n            equals: 'Equals',\n            not: 'Not',\n            notEmpty: 'Not Empty',\n            without: 'Without'\n          },\n          date: {\n            after: 'After',\n            before: 'Before',\n            between: 'Between',\n            empty: 'Empty',\n            equals: 'Equals',\n            not: 'Not',\n            notBetween: 'Not Between',\n            notEmpty: 'Not Empty'\n          },\n          // eslint-disable-next-line id-blacklist\n          number: {\n            between: 'Between',\n            empty: 'Empty',\n            equals: 'Equals',\n            gt: 'Greater Than',\n            gte: 'Greater Than Equal To',\n            lt: 'Less Than',\n            lte: 'Less Than Equal To',\n            not: 'Not',\n            notBetween: 'Not Between',\n            notEmpty: 'Not Empty'\n          },\n          // eslint-disable-next-line id-blacklist\n          string: {\n            contains: 'Contains',\n            empty: 'Empty',\n            endsWith: 'Ends With',\n            equals: 'Equals',\n            not: 'Not',\n            notEmpty: 'Not Empty',\n            startsWith: 'Starts With'\n          }\n        },\n        data: 'Data',\n        deleteTitle: 'Delete filtering rule',\n        leftTitle: 'Outdent criteria',\n        logicAnd: 'And',\n        logicOr: 'Or',\n        rightTitle: 'Indent criteria',\n        title: {\n          0: 'Custom Search Builder',\n          _: 'Custom Search Builder (%d)'\n        },\n        value: 'Value',\n        valueJoiner: 'and'\n      },\n      logic: 'AND',\n      orthogonal: {\n        display: 'display',\n        search: 'filter'\n      },\n      preDefined: false\n    };\n    return SearchBuilder;\n  }();\n  /*! SearchBuilder 1.0.1\n   * Â©2020 SpryMedia Ltd - datatables.net/license/mit\n   */\n  // DataTables extensions common UMD. Note that this allows for AMD, CommonJS\n  // (with window and jQuery being allowed as parameters to the returned\n  // function) or just default browser loading.\n\n\n  (function (factory) {\n    if (typeof define === 'function' && define.amd) {\n      // AMD\n      define(['jquery', 'datatables.net'], function ($) {\n        return factory($, window, document);\n      });\n    } else if (typeof exports === 'object') {\n      // CommonJS\n      module.exports = function (root, $) {\n        if (!root) {\n          root = window;\n        }\n\n        if (!$ || !$.fn.dataTable) {\n          // eslint-disable-next-line @typescript-eslint/no-var-requires\n          $ = require('datatables.net')(root, $).$;\n        }\n\n        return factory($, root, root.document);\n      };\n    } else {\n      // Browser - assume jQuery has already been loaded\n      factory(window.jQuery, window, document);\n    }\n  })(function ($, window, document) {\n    setJQuery($);\n    setJQuery$1($);\n    setJQuery$2($);\n    var dataTable = $.fn.dataTable;\n    $.fn.dataTable.SearchBuilder = SearchBuilder;\n    $.fn.DataTable.SearchBuilder = SearchBuilder;\n    $.fn.dataTable.Group = Group;\n    $.fn.DataTable.Group = Group;\n    $.fn.dataTable.Criteria = Criteria;\n    $.fn.DataTable.Criteria = Criteria;\n    var apiRegister = $.fn.dataTable.Api.register; // Set up object for plugins\n\n    $.fn.dataTable.ext.searchBuilder = {\n      conditions: {}\n    };\n    $.fn.dataTable.ext.buttons.searchBuilder = {\n      action: function (e, dt, node, config) {\n        e.stopPropagation();\n        this.popover(config._searchBuilder.getNode(), {\n          align: 'dt-container'\n        }); // Need to redraw the contents to calculate the correct positions for the elements\n\n        if (config._searchBuilder.s.topGroup !== undefined) {\n          config._searchBuilder.s.topGroup.dom.container.trigger('dtsb-redrawContents');\n        }\n      },\n      config: {},\n      init: function (dt, node, config) {\n        var sb = new $.fn.dataTable.SearchBuilder(dt, $.extend({\n          filterChanged: function (count, text) {\n            dt.button(node).text(text);\n          }\n        }, config.config));\n        dt.button(node).text(config.text || dt.i18n('searchBuilder.button', sb.c.i18n.button, 0));\n        config._searchBuilder = sb;\n      },\n      text: null\n    };\n    apiRegister('searchBuilder.getDetails()', function () {\n      var ctx = this.context[0]; // If SearchBuilder has not been initialised on this instance then return\n\n      return ctx._searchBuilder ? ctx._searchBuilder.getDetails() : null;\n    });\n    apiRegister('searchBuilder.rebuild()', function (details) {\n      var ctx = this.context[0]; // If SearchBuilder has not been initialised on this instance then return\n\n      if (ctx._searchBuilder === undefined) {\n        return null;\n      }\n\n      ctx._searchBuilder.rebuild(details);\n\n      return this;\n    });\n    apiRegister('searchBuilder.container()', function () {\n      var ctx = this.context[0]; // If SearchBuilder has not been initialised on this instance then return\n\n      return ctx._searchBuilder ? ctx._searchBuilder.getNode() : null;\n    });\n    /**\n     * Init function for SearchBuilder\n     *\n     * @param settings the settings to be applied\n     * @param options the options for SearchBuilder\n     * @returns JQUERY<HTMLElement> Returns the node of the SearchBuilder\n     */\n\n    function _init(settings, options) {\n      var api = new dataTable.Api(settings);\n      var opts = options ? options : api.init().searchBuilder || dataTable.defaults.searchBuilder;\n      var searchBuilder = new SearchBuilder(api, opts);\n      var node = searchBuilder.getNode();\n      return node;\n    } // Attach a listener to the document which listens for DataTables initialisation\n    // events so we can automatically initialise\n\n\n    $(document).on('preInit.dt.dtsp', function (e, settings, json) {\n      if (e.namespace !== 'dt') {\n        return;\n      }\n\n      if (settings.oInit.searchBuilder || dataTable.defaults.searchBuilder) {\n        if (!settings._searchBuilder) {\n          _init(settings);\n        }\n      }\n    }); // DataTables `dom` feature option\n\n    dataTable.ext.feature.push({\n      cFeature: 'Q',\n      fnInit: _init\n    }); // DataTables 2 layout feature\n\n    if (dataTable.ext.features) {\n      dataTable.ext.features.register('searchBuilder', _init);\n    }\n  });\n})();","map":{"version":3,"sources":["C:/Users/Sher/Desktop/datahub tagging ui/frontend/node_modules/datatables.net-searchbuilder/js/dataTables.searchBuilder.js"],"names":["$$2","dataTable$2","moment","window","luxon","setJQuery$2","jq","fn","dataTable","Criteria","table","opts","topGroup","index","depth","_this","versionCheck","Error","classes","extend","c","defaults","ext","searchBuilder","i18n","s","condition","undefined","conditions","data","dataIdx","dataPoints","dateFormat","dt","filled","type","value","dom","buttons","addClass","buttonContainer","dropDown","italic","attr","conditionTitle","text","container","dataTitle","defaultValue","select","button","deleteTitle","left","leftTitle","right","rightTitle","valueTitle","greyscale","_i","_a","length","val","on","_adjustCriteria","util","throttle","_buildCriteria","prototype","updateArrows","hasSiblings","redraw","empty","append","setListeners","trigger","i","depthLimit","remove","destroy","off","search","rowData","rowIdx","filter","indexOf","settings","oLanguage","sDecimal","sThousands","splitRD","split","replace","join","orthogonal","oApi","_fnGetCellData","Array","isArray","sort","filter_1","filt","getDetails","toString","j","getNode","populate","_populateData","_populateCondition","_populateValue","rebuild","loadedCriteria","foundData","italic_1","data_1","children","each","removeClass","_getOptions","condition_1","prependTo","unbind","_clearCondition","_clearValue","draw","state","save","condDisp","Object","keys","cond","_b","_c","has","document","valRight","valWidth","outmostval","outerWidth","offset","leftOffset","rightOffset","clearOffset","hasLeft","hasRight","buttonsLeft","top","parent","hasClass","vertical","prepend","prop","_loop_1","setTimeout","concat","init","updateListener","insertAfter","_loop_2","clone","aoColumns","conditionOpts","conditionsLength","column","columns","toArray","decimal","conditionObj","string","condName","conditionName","push","option","notItalic","newOpt","_d","conditionOpts_1","opt","every","indexes","found","col","searchBuilderTitle","sTitle","_loop_3","this_1","prevFilled","_loop_4","isInputValid","version","input","joiner","initSelect","that","preDefined","array","indexArray","rows","el","added","options","indexArray_1","display","addOption","html","a","b","options_1","initSelectArray","initInput","searchDelay","enterSearch","_fnThrottle","e","code","keyCode","which","one","init2Input","els","valueJoiner","initDate","dtDateTime","attachTo","format","initNoValue","init2Date","isInputValidSelect","allFilled","el_1","element","isInputValidInput","el_2","is","inputValueSelect","values","el_3","inputValueInput","el_4","inputValue","idx","cursorPos","selectionStart","focus","setSelectionRange","dateConditions","date","equals","comparison","not","before","after","between","notBetween","notEmpty","momentDateConditions","valueOf","comp0","comp1","luxonDateConditions","DateTime","fromFormat","ts","numConditions","number","lt","lte","gte","gt","numFmtConditions","comp","stringConditions","startsWith","toLowerCase","contains","endsWith","arrayConditions","without","filterChanged","add","_","clearAll","logicAnd","logicOr","title","logic","$$1","dataTable$1","setJQuery$1","Group","isChild","criteria","toDrop","clear","clearGroup","group","logicContainer","_setup","details","crit","loadedDetails","_addPrevGroup","_addPrevCriteria","_setCriteriaListeners","redrawContents","insertBefore","_setGroupListeners","splice","setupLogic","redrawLogic","_andSearch","_orSearch","css","height","width","_setLogicListener","outerHeight","logicOffset","currentLeft","groupLeft","shuffleLeft","newPos","firstCrit","next","currentTop","firstTop","shuffleTop","newTop","_setClearListener","addCriteria","inserted","checkFilled","count","loadedGroup","filledfound","_removeCriteria","last","_toggleLogic","inputButton","$","setJQuery","DataTable","SearchBuilder","builderSettings","Api","titleRow","_searchBuilder","_bInitComplete","_setUp","click","_applyPreDefDefaults","preDef","loadState","registerPlural","selector","iterator","sType","types","columnIdxs","alert","page","_build","loadedState","loaded","_setEmptyListener","_updateTitle","_setRedrawListener","tableNode","node","searchData","dataIndex","origData","nTable","searchIdx","_checkClear","_filterChanged","factory","define","amd","exports","module","root","require","jQuery","apiRegister","register","action","config","stopPropagation","popover","align","sb","ctx","context","_init","api","json","namespace","oInit","feature","cFeature","fnInit","features"],"mappings":"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","sourcesContent":["/*! SearchBuilder 1.0.1\n * Â©2020 SpryMedia Ltd - datatables.net/license/mit\n */\n(function () {\n    'use strict';\n\n    var $$2;\n    var dataTable$2;\n    var moment = window.moment;\n    var luxon = window.luxon;\n    /**\n     * Sets the value of jQuery for use in the file\n     *\n     * @param jq the instance of jQuery to be set\n     */\n    function setJQuery$2(jq) {\n        $$2 = jq;\n        dataTable$2 = jq.fn.dataTable;\n    }\n    /**\n     * The Criteria class is used within SearchBuilder to represent a search criteria\n     */\n    var Criteria = /** @class */ (function () {\n        function Criteria(table, opts, topGroup, index, depth) {\n            var _this = this;\n            if (index === void 0) { index = 0; }\n            if (depth === void 0) { depth = 1; }\n            // Check that the required version of DataTables is included\n            if (!dataTable$2 || !dataTable$2.versionCheck || !dataTable$2.versionCheck('1.10.0')) {\n                throw new Error('SearchPane requires DataTables 1.10 or newer');\n            }\n            this.classes = $$2.extend(true, {}, Criteria.classes);\n            // Get options from user and any extra conditions/column types defined by plug-ins\n            this.c = $$2.extend(true, {}, Criteria.defaults, $$2.fn.dataTable.ext.searchBuilder, opts);\n            var i18n = this.c.i18n;\n            this.s = {\n                condition: undefined,\n                conditions: {},\n                data: undefined,\n                dataIdx: -1,\n                dataPoints: [],\n                dateFormat: false,\n                depth: depth,\n                dt: table,\n                filled: false,\n                index: index,\n                topGroup: topGroup,\n                type: '',\n                value: []\n            };\n            this.dom = {\n                buttons: $$2('<div/>')\n                    .addClass(this.classes.buttonContainer),\n                condition: $$2('<select disabled/>')\n                    .addClass(this.classes.condition)\n                    .addClass(this.classes.dropDown)\n                    .addClass(this.classes.italic)\n                    .attr('autocomplete', 'hacking'),\n                conditionTitle: $$2('<option value=\"\" disabled selected hidden/>')\n                    .text(this.s.dt.i18n('searchBuilder.condition', i18n.condition)),\n                container: $$2('<div/>')\n                    .addClass(this.classes.container),\n                data: $$2('<select/>')\n                    .addClass(this.classes.data)\n                    .addClass(this.classes.dropDown)\n                    .addClass(this.classes.italic),\n                dataTitle: $$2('<option value=\"\" disabled selected hidden/>')\n                    .text(this.s.dt.i18n('searchBuilder.data', i18n.data)),\n                defaultValue: $$2('<select disabled/>')\n                    .addClass(this.classes.value)\n                    .addClass(this.classes.dropDown)\n                    .addClass(this.classes.select),\n                \"delete\": $$2('<button>&times</button>')\n                    .addClass(this.classes[\"delete\"])\n                    .addClass(this.classes.button)\n                    .attr('title', this.s.dt.i18n('searchBuilder.deleteTitle', i18n.deleteTitle))\n                    .attr('type', 'button'),\n                // eslint-disable-next-line no-useless-escape\n                left: $$2('<button>\\<</button>')\n                    .addClass(this.classes.left)\n                    .addClass(this.classes.button)\n                    .attr('title', this.s.dt.i18n('searchBuilder.leftTitle', i18n.leftTitle))\n                    .attr('type', 'button'),\n                // eslint-disable-next-line no-useless-escape\n                right: $$2('<button>\\></button>')\n                    .addClass(this.classes.right)\n                    .addClass(this.classes.button)\n                    .attr('title', this.s.dt.i18n('searchBuilder.rightTitle', i18n.rightTitle))\n                    .attr('type', 'button'),\n                value: [\n                    $$2('<select disabled/>')\n                        .addClass(this.classes.value)\n                        .addClass(this.classes.dropDown)\n                        .addClass(this.classes.italic)\n                        .addClass(this.classes.select)\n                ],\n                valueTitle: $$2('<option value=\"--valueTitle--\" selected/>')\n                    .text(this.s.dt.i18n('searchBuilder.value', i18n.value))\n            };\n            // If the greyscale option is selected then add the class to add the grey colour to SearchBuilder\n            if (this.c.greyscale) {\n                $$2(this.dom.data).addClass(this.classes.greyscale);\n                $$2(this.dom.condition).addClass(this.classes.greyscale);\n                $$2(this.dom.defaultValue).addClass(this.classes.greyscale);\n                for (var _i = 0, _a = this.dom.value; _i < _a.length; _i++) {\n                    var val = _a[_i];\n                    $$2(val).addClass(this.classes.greyscale);\n                }\n            }\n            // For responsive design, adjust the criterias properties on the following events\n            this.s.dt.on('draw.dtsp', function () {\n                _this._adjustCriteria();\n            });\n            this.s.dt.on('buttons-action', function () {\n                _this._adjustCriteria();\n            });\n            $$2(window).on('resize.dtsp', dataTable$2.util.throttle(function () {\n                _this._adjustCriteria();\n            }));\n            this._buildCriteria();\n            return this;\n        }\n        /**\n         * Adds the left button to the criteria\n         */\n        Criteria.prototype.updateArrows = function (hasSiblings, redraw) {\n            if (hasSiblings === void 0) { hasSiblings = false; }\n            if (redraw === void 0) { redraw = true; }\n            // Empty the container and append all of the elements in the correct order\n            $$2(this.dom.container)\n                .empty()\n                .append(this.dom.data)\n                .append(this.dom.condition)\n                .append(this.dom.value[0]);\n            this.setListeners();\n            // Trigger the inserted events for the value elements as they are inserted\n            $$2(this.dom.value[0]).trigger('dtsb-inserted');\n            for (var i = 1; i < this.dom.value.length; i++) {\n                $$2(this.dom.container).append(this.dom.value[i]);\n                $$2(this.dom.value[i]).trigger('dtsb-inserted');\n            }\n            // If this is a top level criteria then don't let it move left\n            if (this.s.depth > 1) {\n                $$2(this.dom.buttons).append(this.dom.left);\n            }\n            // If the depthLimit of the query has been hit then don't add the right button\n            if ((this.c.depthLimit === false || this.s.depth < this.c.depthLimit) && hasSiblings) {\n                $$2(this.dom.buttons).append(this.dom.right);\n            }\n            else {\n                $$2(this.dom.right).remove();\n            }\n            $$2(this.dom.buttons).append(this.dom[\"delete\"]);\n            $$2(this.dom.container).append(this.dom.buttons);\n            if (redraw) {\n                // A different combination of arrows and selectors may lead to a need for responsive to be triggered\n                this._adjustCriteria();\n            }\n        };\n        /**\n         * Destroys the criteria, removing listeners and container from the dom\n         */\n        Criteria.prototype.destroy = function () {\n            // Turn off listeners\n            $$2(this.dom.data).off('.dtsb');\n            $$2(this.dom.condition).off('.dtsb');\n            $$2(this.dom[\"delete\"]).off('.dtsb');\n            for (var _i = 0, _a = this.dom.value; _i < _a.length; _i++) {\n                var val = _a[_i];\n                $$2(val).off('.dtsb');\n            }\n            // Remove container from the dom\n            $$2(this.dom.container).remove();\n        };\n        /**\n         * Passes in the data for the row and compares it against this single criteria\n         *\n         * @param rowData The data for the row to be compared\n         * @returns boolean Whether the criteria has passed\n         */\n        Criteria.prototype.search = function (rowData, rowIdx) {\n            var condition = this.s.conditions[this.s.condition];\n            if (this.s.condition !== undefined && condition !== undefined) {\n                var filter = rowData[this.s.dataIdx];\n                // This check is in place for if a custom decimal character is in place\n                if (this.s.type.indexOf('num') !== -1 &&\n                    (this.s.dt.settings()[0].oLanguage.sDecimal !== '' ||\n                        this.s.dt.settings()[0].oLanguage.sThousands !== '')) {\n                    var splitRD = [rowData[this.s.dataIdx]];\n                    if (this.s.dt.settings()[0].oLanguage.sDecimal !== '') {\n                        splitRD = rowData[this.s.dataIdx].split(this.s.dt.settings()[0].oLanguage.sDecimal);\n                    }\n                    if (this.s.dt.settings()[0].oLanguage.sThousands !== '') {\n                        for (var i = 0; i < splitRD.length; i++) {\n                            splitRD[i] = splitRD[i].replace(this.s.dt.settings()[0].oLanguage.sThousands, ',');\n                        }\n                    }\n                    filter = splitRD.join('.');\n                }\n                // If orthogonal data is in place we need to get it's values for searching\n                if (this.c.orthogonal.search !== 'filter') {\n                    var settings = this.s.dt.settings()[0];\n                    filter = settings.oApi._fnGetCellData(settings, rowIdx, this.s.dataIdx, typeof this.c.orthogonal === 'string' ?\n                        this.c.orthogonal :\n                        this.c.orthogonal.search);\n                }\n                if (this.s.type === 'array') {\n                    // Make sure we are working with an array\n                    if (!Array.isArray(filter)) {\n                        filter = [filter];\n                    }\n                    filter.sort();\n                    for (var _i = 0, filter_1 = filter; _i < filter_1.length; _i++) {\n                        var filt = filter_1[_i];\n                        if (filt) {\n                            filt = filt.replace(/[\\r\\n\\u2028]/g, ' ');\n                        }\n                    }\n                }\n                else if (filter !== null) {\n                    filter = filter.replace(/[\\r\\n\\u2028]/g, ' ');\n                }\n                if (this.s.type.indexOf('html') !== -1) {\n                    filter = filter.replace(/(<([^>]+)>)/ig, '');\n                }\n                // Not ideal, but jqueries .val() returns an empty string even\n                // when the value set is null, so we shall assume the two are equal\n                if (filter === null) {\n                    filter = '';\n                }\n                return condition.search(filter, this.s.value, this);\n            }\n        };\n        /**\n         * Gets the details required to rebuild the criteria\n         */\n        Criteria.prototype.getDetails = function () {\n            var value = this.s.value;\n            // This check is in place for if a custom decimal character is in place\n            if (this.s.type.indexOf('num') !== -1 &&\n                (this.s.dt.settings()[0].oLanguage.sDecimal !== '' || this.s.dt.settings()[0].oLanguage.sThousands !== '')) {\n                for (var i = 0; i < this.s.value.length; i++) {\n                    var splitRD = [this.s.value[i].toString()];\n                    if (this.s.dt.settings()[0].oLanguage.sDecimal !== '') {\n                        splitRD = this.s.value[i].split(this.s.dt.settings()[0].oLanguage.sDecimal);\n                    }\n                    if (this.s.dt.settings()[0].oLanguage.sThousands !== '') {\n                        for (var j = 0; j < splitRD.length; j++) {\n                            splitRD[j] = splitRD[j].replace(this.s.dt.settings()[0].oLanguage.sThousands, ',');\n                        }\n                    }\n                    this.s.value[i] = splitRD.join('.');\n                }\n            }\n            return {\n                condition: this.s.condition,\n                data: this.s.data,\n                value: value\n            };\n        };\n        /**\n         * Getter for the node for the container of the criteria\n         *\n         * @returns JQuery<HTMLElement> the node for the container\n         */\n        Criteria.prototype.getNode = function () {\n            return this.dom.container;\n        };\n        /**\n         * Populates the criteria data, condition and value(s) as far as has been selected\n         */\n        Criteria.prototype.populate = function () {\n            this._populateData();\n            // If the column index has been found attempt to select a condition\n            if (this.s.dataIdx !== -1) {\n                this._populateCondition();\n                // If the condittion has been found attempt to select the values\n                if (this.s.condition !== undefined) {\n                    this._populateValue();\n                }\n            }\n        };\n        /**\n         * Rebuilds the criteria based upon the details passed in\n         *\n         * @param loadedCriteria the details required to rebuild the criteria\n         */\n        Criteria.prototype.rebuild = function (loadedCriteria) {\n            // Check to see if the previously selected data exists, if so select it\n            var foundData = false;\n            var dataIdx;\n            this._populateData();\n            // If a data selection has previously been made attempt to find and select it\n            if (loadedCriteria.data !== undefined) {\n                var italic_1 = this.classes.italic;\n                var data_1 = this.dom.data;\n                $$2(this.dom.data).children('option').each(function () {\n                    if ($$2(this).text() === loadedCriteria.data) {\n                        $$2(this).attr('selected', true);\n                        $$2(data_1).removeClass(italic_1);\n                        foundData = true;\n                        dataIdx = $$2(this).val();\n                    }\n                });\n            }\n            // If the data has been found and selected then the condition can be populated and searched\n            if (foundData) {\n                this.s.data = loadedCriteria.data;\n                this.s.dataIdx = dataIdx;\n                this.c.orthogonal = this._getOptions().orthogonal;\n                $$2(this.dom.dataTitle).remove();\n                this._populateCondition();\n                $$2(this.dom.conditionTitle).remove();\n                var condition_1;\n                // Check to see if the previously selected condition exists, if so select it\n                $$2(this.dom.condition).children('option').each(function () {\n                    if ((loadedCriteria.condition !== undefined &&\n                        $$2(this).val() === loadedCriteria.condition &&\n                        typeof loadedCriteria.condition === 'string')) {\n                        $$2(this).attr('selected', true);\n                        condition_1 = $$2(this).val();\n                    }\n                });\n                this.s.condition = condition_1;\n                // If the condition has been found and selected then the value can be populated and searched\n                if (this.s.condition !== undefined) {\n                    $$2(this.dom.conditionTitle).remove();\n                    $$2(this.dom.condition).removeClass(this.classes.italic);\n                    this._populateValue(loadedCriteria);\n                }\n                else {\n                    $$2(this.dom.conditionTitle).prependTo(this.dom.condition).attr('selected', true);\n                }\n            }\n        };\n        /**\n         * Sets the listeners for the criteria\n         */\n        Criteria.prototype.setListeners = function () {\n            var _this = this;\n            $$2(this.dom.data)\n                .unbind('input change')\n                .on('input change', function () {\n                $$2(_this.dom.dataTitle).attr('selected', false);\n                $$2(_this.dom.data).removeClass(_this.classes.italic);\n                _this.s.dataIdx = $$2(_this.dom.data).children('option:selected').val();\n                _this.s.data = $$2(_this.dom.data).children('option:selected').text();\n                _this.c.orthogonal = _this._getOptions().orthogonal;\n                // When the data is changed, the values in condition and value may also change so need to renew them\n                _this._clearCondition();\n                _this._clearValue();\n                _this._populateCondition();\n                // If this criteria was previously active in the search then\n                //  remove it from the search and trigger a new search\n                if (_this.s.filled) {\n                    _this.s.filled = false;\n                    _this.s.dt.draw();\n                    _this.setListeners();\n                }\n                _this.s.dt.state.save();\n            });\n            $$2(this.dom.condition)\n                .unbind('input change')\n                .on('input change', function () {\n                $$2(_this.dom.conditionTitle).attr('selected', false);\n                $$2(_this.dom.condition).removeClass(_this.classes.italic);\n                var condDisp = $$2(_this.dom.condition).children('option:selected').val();\n                // Find the condition that has been selected and store it internally\n                for (var _i = 0, _a = Object.keys(_this.s.conditions); _i < _a.length; _i++) {\n                    var cond = _a[_i];\n                    if (cond === condDisp) {\n                        _this.s.condition = condDisp;\n                        break;\n                    }\n                }\n                // When the condition is changed, the value selector may switch between\n                //  a select element and an input element\n                _this._clearValue();\n                _this._populateValue();\n                for (var _b = 0, _c = _this.dom.value; _b < _c.length; _b++) {\n                    var val = _c[_b];\n                    // If this criteria was previously active in the search then remove\n                    //  it from the search and trigger a new search\n                    if (_this.s.filled && $$2(_this.dom.container).has(val).length !== 0) {\n                        _this.s.filled = false;\n                        _this.s.dt.draw();\n                        _this.setListeners();\n                    }\n                }\n                _this.s.dt.draw();\n            });\n        };\n        /**\n         * Adjusts the criteria to make SearchBuilder responsive\n         */\n        Criteria.prototype._adjustCriteria = function () {\n            // If this criteria is not present then don't bother adjusting it\n            if ($$2(document).has(this.dom.container).length === 0) {\n                return;\n            }\n            var valRight;\n            var valWidth;\n            var outmostval = this.dom.value[this.dom.value.length - 1];\n            // Calculate the width and right value of the outmost value element\n            if ($$2(this.dom.container).has(outmostval).length !== 0) {\n                valWidth = $$2(outmostval).outerWidth(true);\n                valRight = $$2(outmostval).offset().left + valWidth;\n            }\n            else {\n                return;\n            }\n            var leftOffset = $$2(this.dom.left).offset();\n            var rightOffset = $$2(this.dom.right).offset();\n            var clearOffset = $$2(this.dom[\"delete\"]).offset();\n            var hasLeft = $$2(this.dom.container).has(this.dom.left).length !== 0;\n            var hasRight = $$2(this.dom.container).has(this.dom.right).length !== 0;\n            var buttonsLeft = hasLeft ?\n                leftOffset.left :\n                hasRight ?\n                    rightOffset.left :\n                    clearOffset.left;\n            // Perform the responsive calculations and redraw where necessary\n            if ((buttonsLeft - valRight < 15 ||\n                (hasLeft && leftOffset.top !== clearOffset.top) ||\n                (hasRight && rightOffset.top !== clearOffset.top)) &&\n                !$$2(this.dom.container).parent().hasClass(this.classes.vertical)) {\n                $$2(this.dom.container).parent().addClass(this.classes.vertical);\n                $$2(this.s.topGroup).trigger('dtsb-redrawContents');\n            }\n            else if (buttonsLeft -\n                ($$2(this.dom.data).offset().left +\n                    $$2(this.dom.data).outerWidth(true) +\n                    $$2(this.dom.condition).outerWidth(true) +\n                    valWidth) > 15\n                && $$2(this.dom.container).parent().hasClass(this.classes.vertical)) {\n                $$2(this.dom.container).parent().removeClass(this.classes.vertical);\n                $$2(this.s.topGroup).trigger('dtsb-redrawContents');\n            }\n        };\n        /**\n         * Builds the elements of the dom together\n         */\n        Criteria.prototype._buildCriteria = function () {\n            // Append Titles for select elements\n            $$2(this.dom.data).append(this.dom.dataTitle);\n            $$2(this.dom.condition).append(this.dom.conditionTitle);\n            // Add elements to container\n            $$2(this.dom.container)\n                .append(this.dom.data)\n                .append(this.dom.condition);\n            for (var _i = 0, _a = this.dom.value; _i < _a.length; _i++) {\n                var val = _a[_i];\n                $$2(val).append(this.dom.valueTitle);\n                $$2(this.dom.container).append(val);\n            }\n            // Add buttons to container\n            $$2(this.dom.container)\n                .append(this.dom[\"delete\"])\n                .append(this.dom.right);\n            this.setListeners();\n        };\n        /**\n         * Clears the condition select element\n         */\n        Criteria.prototype._clearCondition = function () {\n            $$2(this.dom.condition).empty();\n            $$2(this.dom.conditionTitle).attr('selected', true).attr('disabled', true);\n            $$2(this.dom.condition).prepend(this.dom.conditionTitle).prop('selectedIndex', 0);\n            this.s.conditions = {};\n            this.s.condition = undefined;\n        };\n        /**\n         * Clears the value elements\n         */\n        Criteria.prototype._clearValue = function () {\n            if (this.s.condition !== undefined) {\n                var _loop_1 = function (val) {\n                    // Timeout is annoying but because of IOS\n                    setTimeout(function () {\n                        $$2(val).remove();\n                    }, 50);\n                };\n                // Remove all of the value elements\n                for (var _i = 0, _a = this.dom.value; _i < _a.length; _i++) {\n                    var val = _a[_i];\n                    _loop_1(val);\n                }\n                // Call the init function to get the value elements for this condition\n                this.dom.value = [].concat(this.s.conditions[this.s.condition].init(this, Criteria.updateListener));\n                $$2(this.dom.value[0]).insertAfter(this.dom.condition).trigger('dtsb-inserted');\n                // Insert all of the value elements\n                for (var i = 1; i < this.dom.value.length; i++) {\n                    $$2(this.dom.value[i]).insertAfter(this.dom.value[i - 1]).trigger('dtsb-inserted');\n                }\n            }\n            else {\n                var _loop_2 = function (val) {\n                    // Timeout is annoying but because of IOS\n                    setTimeout(function () {\n                        $$2(val).remove();\n                    }, 50);\n                };\n                // Remove all of the value elements\n                for (var _b = 0, _c = this.dom.value; _b < _c.length; _b++) {\n                    var val = _c[_b];\n                    _loop_2(val);\n                }\n                // Append the default valueTitle to the default select element\n                $$2(this.dom.valueTitle)\n                    .attr('selected', true);\n                $$2(this.dom.defaultValue)\n                    .append(this.dom.valueTitle)\n                    .insertAfter(this.dom.condition);\n            }\n            this.s.value = [];\n            this.dom.value = [\n                $$2('<select disabled/>')\n                    .addClass(this.classes.value)\n                    .addClass(this.classes.dropDown)\n                    .addClass(this.classes.italic)\n                    .addClass(this.classes.select)\n                    .append($$2(this.dom.valueTitle).clone())\n            ];\n        };\n        /**\n         * Gets the options for the column\n         *\n         * @returns {object} The options for the column\n         */\n        Criteria.prototype._getOptions = function () {\n            var table = this.s.dt;\n            return $$2.extend(true, {}, Criteria.defaults, table.settings()[0].aoColumns[this.s.dataIdx].searchBuilder);\n        };\n        /**\n         * Populates the condition dropdown\n         */\n        Criteria.prototype._populateCondition = function () {\n            var conditionOpts = [];\n            var conditionsLength = Object.keys(this.s.conditions).length;\n            // If there are no conditions stored then we need to get them from the appropriate type\n            if (conditionsLength === 0) {\n                var column = $$2(this.dom.data).children('option:selected').val();\n                this.s.type = this.s.dt.columns().type().toArray()[column];\n                // If the column type is unknown, call a draw to try reading it again\n                if (this.s.type === null) {\n                    this.s.dt.draw();\n                    this.setListeners();\n                    this.s.type = this.s.dt.columns().type().toArray()[column];\n                }\n                // Enable the condition element\n                $$2(this.dom.condition)\n                    .attr('disabled', false)\n                    .empty()\n                    .append(this.dom.conditionTitle)\n                    .addClass(this.classes.italic);\n                $$2(this.dom.conditionTitle)\n                    .attr('selected', true);\n                var decimal = this.s.dt.settings()[0].oLanguage.sDecimal;\n                // This check is in place for if a custom decimal character is in place\n                if (decimal !== '' && this.s.type.indexOf(decimal) === this.s.type.length - decimal.length) {\n                    if (this.s.type.indexOf('num-fmt') !== -1) {\n                        this.s.type = this.s.type.replace(decimal, '');\n                    }\n                    else if (this.s.type.indexOf('num') !== -1) {\n                        this.s.type = this.s.type.replace(decimal, '');\n                    }\n                }\n                // Select which conditions are going to be used based on the column type\n                var conditionObj = this.c.conditions[this.s.type] !== undefined ?\n                    this.c.conditions[this.s.type] :\n                    this.s.type.indexOf('moment') !== -1 ?\n                        this.c.conditions.moment :\n                        this.s.type.indexOf('luxon') !== -1 ?\n                            this.c.conditions.luxon :\n                            this.c.conditions.string;\n                // If it is a moment format then extract the date format\n                if (this.s.type.indexOf('moment') !== -1) {\n                    this.s.dateFormat = this.s.type.replace(/moment-/g, '');\n                }\n                else if (this.s.type.indexOf('luxon') !== -1) {\n                    this.s.dateFormat = this.s.type.replace(/luxon-/g, '');\n                }\n                // Add all of the conditions to the select element\n                for (var _i = 0, _a = Object.keys(conditionObj); _i < _a.length; _i++) {\n                    var condition = _a[_i];\n                    if (conditionObj[condition] !== null) {\n                        this.s.conditions[condition] = conditionObj[condition];\n                        var condName = conditionObj[condition].conditionName;\n                        if (typeof condName === 'function') {\n                            condName = condName(this.s.dt, this.c.i18n);\n                        }\n                        conditionOpts.push($$2('<option>', {\n                            text: condName,\n                            value: condition\n                        })\n                            .addClass(this.classes.option)\n                            .addClass(this.classes.notItalic));\n                    }\n                }\n            }\n            // Otherwise we can just load them in\n            else if (conditionsLength > 0) {\n                $$2(this.dom.condition).empty().attr('disabled', false).addClass(this.classes.italic);\n                for (var _b = 0, _c = Object.keys(this.s.conditions); _b < _c.length; _b++) {\n                    var condition = _c[_b];\n                    var condName = this.s.conditions[condition].conditionName;\n                    if (typeof condName === 'function') {\n                        condName = condName(this.s.dt, this.c.i18n);\n                    }\n                    var newOpt = $$2('<option>', {\n                        text: condName,\n                        value: condition\n                    })\n                        .addClass(this.classes.option)\n                        .addClass(this.classes.notItalic);\n                    if (this.s.condition !== undefined && this.s.condition === condName) {\n                        $$2(newOpt).attr('selected', true);\n                        $$2(this.dom.condition).removeClass(this.classes.italic);\n                    }\n                    conditionOpts.push(newOpt);\n                }\n            }\n            else {\n                $$2(this.dom.condition)\n                    .attr('disabled', true)\n                    .addClass(this.classes.italic);\n                return;\n            }\n            for (var _d = 0, conditionOpts_1 = conditionOpts; _d < conditionOpts_1.length; _d++) {\n                var opt = conditionOpts_1[_d];\n                $$2(this.dom.condition).append(opt);\n            }\n            $$2(this.dom.condition).prop('selectedIndex', 0);\n        };\n        /**\n         * Populates the data select element\n         */\n        Criteria.prototype._populateData = function () {\n            var _this = this;\n            $$2(this.dom.data).empty().append(this.dom.dataTitle);\n            // If there are no datas stored then we need to get them from the table\n            if (this.s.dataPoints.length === 0) {\n                this.s.dt.columns().every(function (index) {\n                    // Need to check that the column can be filtered on before adding it\n                    if (_this.c.columns === true ||\n                        (_this.s.dt.columns(_this.c.columns).indexes().toArray().indexOf(index) !== -1)) {\n                        var found = false;\n                        for (var _i = 0, _a = _this.s.dataPoints; _i < _a.length; _i++) {\n                            var val = _a[_i];\n                            if (val.index === index) {\n                                found = true;\n                                break;\n                            }\n                        }\n                        if (!found) {\n                            var col = _this.s.dt.settings()[0].aoColumns[index];\n                            var opt = {\n                                index: index,\n                                text: (col.searchBuilderTitle === undefined ?\n                                    col.sTitle :\n                                    col.searchBuilderTitle).replace(/(<([^>]+)>)/ig, '')\n                            };\n                            _this.s.dataPoints.push(opt);\n                            $$2(_this.dom.data).append($$2('<option>', {\n                                text: opt.text,\n                                value: opt.index\n                            })\n                                .addClass(_this.classes.option)\n                                .addClass(_this.classes.notItalic));\n                        }\n                    }\n                });\n            }\n            // Otherwise we can just load them in\n            else {\n                var _loop_3 = function (data) {\n                    this_1.s.dt.columns().every(function (index) {\n                        var col = _this.s.dt.settings()[0].aoColumns[index];\n                        if ((col.searchBuilderTitle === undefined ?\n                            col.sTitle :\n                            col.searchBuilderTitle).replace(/(<([^>]+)>)/ig, '') === data.text) {\n                            data.index = index;\n                        }\n                    });\n                    var newOpt = $$2('<option>', {\n                        text: data.text.replace(/(<([^>]+)>)/ig, ''),\n                        value: data.index\n                    })\n                        .addClass(this_1.classes.option)\n                        .addClass(this_1.classes.notItalic);\n                    if (this_1.s.data === data.text) {\n                        this_1.s.dataIdx = data.index;\n                        $$2(newOpt).attr('selected', true);\n                        $$2(this_1.dom.data).removeClass(this_1.classes.italic);\n                    }\n                    $$2(this_1.dom.data).append(newOpt);\n                };\n                var this_1 = this;\n                for (var _i = 0, _a = this.s.dataPoints; _i < _a.length; _i++) {\n                    var data = _a[_i];\n                    _loop_3(data);\n                }\n            }\n        };\n        /**\n         * Populates the Value select element\n         *\n         * @param loadedCriteria optional, used to reload criteria from predefined filters\n         */\n        Criteria.prototype._populateValue = function (loadedCriteria) {\n            var _this = this;\n            var prevFilled = this.s.filled;\n            this.s.filled = false;\n            // Remove any previous value elements\n            // Timeout is annoying but because of IOS\n            setTimeout(function () {\n                $$2(_this.dom.defaultValue).remove();\n            }, 50);\n            var _loop_4 = function (val) {\n                // Timeout is annoying but because of IOS\n                setTimeout(function () {\n                    $$2(val).remove();\n                }, 50);\n            };\n            for (var _i = 0, _a = this.dom.value; _i < _a.length; _i++) {\n                var val = _a[_i];\n                _loop_4(val);\n            }\n            var children = $$2(this.dom.container).children();\n            if (children.length > 3) {\n                for (var i = 2; i < children.length - 1; i++) {\n                    $$2(children[i]).remove();\n                }\n            }\n            // Find the column with the title matching the data for the criteria and take note of the index\n            if (loadedCriteria !== undefined) {\n                this.s.dt.columns().every(function (index) {\n                    if (_this.s.dt.settings()[0].aoColumns[index].sTitle === loadedCriteria.data) {\n                        _this.s.dataIdx = index;\n                    }\n                });\n            }\n            // Initialise the value elements based on the condition\n            this.dom.value = [].concat(this.s.conditions[this.s.condition].init(this, Criteria.updateListener, loadedCriteria !== undefined ? loadedCriteria.value : undefined));\n            if (loadedCriteria !== undefined && loadedCriteria.value !== undefined) {\n                this.s.value = loadedCriteria.value;\n            }\n            // Insert value elements and trigger the inserted event\n            $$2(this.dom.value[0])\n                .insertAfter(this.dom.condition)\n                .trigger('dtsb-inserted');\n            for (var i = 1; i < this.dom.value.length; i++) {\n                $$2(this.dom.value[i])\n                    .insertAfter(this.dom.value[i - 1])\n                    .trigger('dtsb-inserted');\n            }\n            // Check if the criteria can be used in a search\n            this.s.filled = this.s.conditions[this.s.condition].isInputValid(this.dom.value, this);\n            this.setListeners();\n            // If it can and this is different to before then trigger a draw\n            if (prevFilled !== this.s.filled) {\n                this.s.dt.draw();\n                this.setListeners();\n            }\n        };\n        Criteria.version = '1.1.0';\n        Criteria.classes = {\n            button: 'dtsb-button',\n            buttonContainer: 'dtsb-buttonContainer',\n            condition: 'dtsb-condition',\n            container: 'dtsb-criteria',\n            data: 'dtsb-data',\n            \"delete\": 'dtsb-delete',\n            dropDown: 'dtsb-dropDown',\n            greyscale: 'dtsb-greyscale',\n            input: 'dtsb-input',\n            italic: 'dtsb-italic',\n            joiner: 'dtsp-joiner',\n            left: 'dtsb-left',\n            notItalic: 'dtsb-notItalic',\n            option: 'dtsb-option',\n            right: 'dtsb-right',\n            select: 'dtsb-select',\n            value: 'dtsb-value',\n            vertical: 'dtsb-vertical'\n        };\n        /**\n         * Default initialisation function for select conditions\n         */\n        Criteria.initSelect = function (that, fn, preDefined, array) {\n            if (preDefined === void 0) { preDefined = null; }\n            if (array === void 0) { array = false; }\n            var column = $$2(that.dom.data).children('option:selected').val();\n            var indexArray = that.s.dt.rows().indexes().toArray();\n            var settings = that.s.dt.settings()[0];\n            // Declare select element to be used with all of the default classes and listeners.\n            var el = $$2('<select/>')\n                .addClass(Criteria.classes.value)\n                .addClass(Criteria.classes.dropDown)\n                .addClass(Criteria.classes.italic)\n                .addClass(Criteria.classes.select)\n                .append(that.dom.valueTitle)\n                .on('input change', function () {\n                $$2(this).removeClass(Criteria.classes.italic);\n                fn(that, this);\n            });\n            if (that.c.greyscale) {\n                $$2(el).addClass(Criteria.classes.greyscale);\n            }\n            var added = [];\n            var options = [];\n            // Add all of the options from the table to the select element.\n            // Only add one option for each possible value\n            for (var _i = 0, indexArray_1 = indexArray; _i < indexArray_1.length; _i++) {\n                var index = indexArray_1[_i];\n                var filter = settings.oApi._fnGetCellData(settings, index, column, typeof that.c.orthogonal === 'string' ?\n                    that.c.orthogonal :\n                    that.c.orthogonal.search);\n                var value = {\n                    filter: typeof filter === 'string' ?\n                        filter.replace(/[\\r\\n\\u2028]/g, ' ') : // Need to replace certain characters to match search values\n                        filter,\n                    index: index,\n                    text: settings.oApi._fnGetCellData(settings, index, column, typeof that.c.orthogonal === 'string' ?\n                        that.c.orthogonal :\n                        that.c.orthogonal.display)\n                };\n                // If we are dealing with an array type, either make sure we are working with arrays, or sort them\n                if (that.s.type === 'array') {\n                    value.filter = !Array.isArray(value.filter) ?\n                        [value.filter] :\n                        value.filter = value.filter.sort();\n                    value.text = !Array.isArray(value.text) ?\n                        [value.text] :\n                        value.text = value.text.sort();\n                }\n                // Function to add an option to the select element\n                var addOption = function (filt, text) {\n                    // Add text and value, stripping out any html if that is the column type\n                    var opt = $$2('<option>', {\n                        type: Array.isArray(filt) ? 'Array' : 'String',\n                        value: that.s.type.indexOf('html') !== -1 && filt !== null && typeof filt === 'string' ?\n                            filt.replace(/(<([^>]+)>)/ig, '') :\n                            filt\n                    })\n                        .addClass(that.classes.option)\n                        .addClass(that.classes.notItalic)\n                        // Have to add the text this way so that special html characters are not escaped - &amp; etc.\n                        .html(typeof text === 'string' ?\n                        text.replace(/(<([^>]+)>)/ig, '') :\n                        text);\n                    var val = $$2(opt).val();\n                    // Check that this value has not already been added\n                    if (added.indexOf(val) === -1) {\n                        added.push(val);\n                        options.push(opt);\n                        if (preDefined !== null && Array.isArray(preDefined[0])) {\n                            preDefined[0] = preDefined[0].sort().join(',');\n                        }\n                        // If this value was previously selected as indicated by preDefined, then select it again\n                        if (preDefined !== null && opt.val() === preDefined[0]) {\n                            opt.attr('selected', true);\n                            $$2(el).removeClass(Criteria.classes.italic);\n                        }\n                    }\n                };\n                // If this is to add the individual values within the array we need to loop over the array\n                if (array) {\n                    for (var i = 0; i < value.filter.length; i++) {\n                        addOption(value.filter[i], value.text[i]);\n                    }\n                }\n                // Otherwise the value that is in the cell is to be added\n                else {\n                    addOption(value.filter, value.text);\n                }\n            }\n            options.sort(function (a, b) {\n                if (that.s.type === 'array' ||\n                    that.s.type === 'string' ||\n                    that.s.type === 'num' ||\n                    that.s.type === 'html' ||\n                    that.s.type === 'html-num') {\n                    if ($$2(a).val() < $$2(b).val()) {\n                        return -1;\n                    }\n                    else if ($$2(a).val() > $$2(b).val()) {\n                        return 1;\n                    }\n                    else {\n                        return 0;\n                    }\n                }\n                else if (that.s.type === 'num-fmt' || that.s.type === 'html-num-fmt') {\n                    if (+$$2(a).val().replace(/[^0-9.]/g, '') < +$$2(b).val().replace(/[^0-9.]/g, '')) {\n                        return -1;\n                    }\n                    else if (+$$2(a).val().replace(/[^0-9.]/g, '') > +$$2(b).val().replace(/[^0-9.]/g, '')) {\n                        return 1;\n                    }\n                    else {\n                        return 0;\n                    }\n                }\n            });\n            for (var _a = 0, options_1 = options; _a < options_1.length; _a++) {\n                var opt = options_1[_a];\n                $$2(el).append(opt);\n            }\n            return el;\n        };\n        /**\n         * Default initialisation function for select array conditions\n         *\n         * This exists because there needs to be different select functionality for contains/without and equals/not\n         */\n        Criteria.initSelectArray = function (that, fn, preDefined) {\n            if (preDefined === void 0) { preDefined = null; }\n            return Criteria.initSelect(that, fn, preDefined, true);\n        };\n        /**\n         * Default initialisation function for input conditions\n         */\n        Criteria.initInput = function (that, fn, preDefined) {\n            var _this = this;\n            if (preDefined === void 0) { preDefined = null; }\n            // Declare the input element\n            var searchDelay = that.s.dt.settings()[0].searchDelay;\n            var el = $$2('<input/>')\n                .addClass(Criteria.classes.value)\n                .addClass(Criteria.classes.input)\n                .on('input keypress', !that.c.enterSearch || searchDelay !== null ?\n                that.s.dt.settings()[0].oApi._fnThrottle(function () {\n                    return fn(that, this);\n                }, searchDelay) :\n                that.c.enterSearch ?\n                    function (e) {\n                        var code = e.keyCode || e.which;\n                        if (code === 13) {\n                            fn(that, _this);\n                        }\n                    } :\n                    function () {\n                        fn(that, _this);\n                    });\n            if (that.c.greyscale) {\n                $$2(el).addClass(Criteria.classes.greyscale);\n            }\n            // If there is a preDefined value then add it\n            if (preDefined !== null) {\n                $$2(el).val(preDefined[0]);\n            }\n            // This is add responsive functionality to the logic button without redrawing everything else\n            that.s.dt.one('draw', function () {\n                $$2(that.s.topGroup).trigger('dtsb-redrawLogic');\n            });\n            return el;\n        };\n        /**\n         * Default initialisation function for conditions requiring 2 inputs\n         */\n        Criteria.init2Input = function (that, fn, preDefined) {\n            var _this = this;\n            if (preDefined === void 0) { preDefined = null; }\n            // Declare all of the necessary jQuery elements\n            var searchDelay = that.s.dt.settings()[0].searchDelay;\n            var els = [\n                $$2('<input/>')\n                    .addClass(Criteria.classes.value)\n                    .addClass(Criteria.classes.input)\n                    .on('input keypress', searchDelay !== null ?\n                    that.s.dt.settings()[0].oApi._fnThrottle(function () {\n                        return fn(that, this);\n                    }, searchDelay) :\n                    that.c.enterSearch ?\n                        function (e) {\n                            var code = e.keyCode || e.which;\n                            if (code === 13) {\n                                fn(that, _this);\n                            }\n                        } :\n                        function () {\n                            fn(that, _this);\n                        }),\n                $$2('<span>')\n                    .addClass(that.classes.joiner)\n                    .text(that.s.dt.i18n('searchBuilder.valueJoiner', that.c.i18n.valueJoiner)),\n                $$2('<input/>')\n                    .addClass(Criteria.classes.value)\n                    .addClass(Criteria.classes.input)\n                    .on('input keypress', searchDelay !== null ?\n                    that.s.dt.settings()[0].oApi._fnThrottle(function () {\n                        return fn(that, this);\n                    }, searchDelay) :\n                    that.c.enterSearch ?\n                        function (e) {\n                            var code = e.keyCode || e.which;\n                            if (code === 13) {\n                                fn(that, _this);\n                            }\n                        } :\n                        function () {\n                            fn(that, _this);\n                        })\n            ];\n            if (that.c.greyscale) {\n                $$2(els[0]).addClass(Criteria.classes.greyscale);\n                $$2(els[2]).addClass(Criteria.classes.greyscale);\n            }\n            // If there is a preDefined value then add it\n            if (preDefined !== null) {\n                $$2(els[0]).val(preDefined[0]);\n                $$2(els[2]).val(preDefined[1]);\n            }\n            // This is add responsive functionality to the logic button without redrawing everything else\n            that.s.dt.one('draw', function () {\n                $$2(that.s.topGroup).trigger('dtsb-redrawLogic');\n            });\n            return els;\n        };\n        /**\n         * Default initialisation function for date conditions\n         */\n        Criteria.initDate = function (that, fn, preDefined) {\n            var _this = this;\n            if (preDefined === void 0) { preDefined = null; }\n            var searchDelay = that.s.dt.settings()[0].searchDelay;\n            // Declare date element using DataTables dateTime plugin\n            var el = $$2('<input/>')\n                .addClass(Criteria.classes.value)\n                .addClass(Criteria.classes.input)\n                .dtDateTime({\n                attachTo: 'input',\n                format: that.s.dateFormat ? that.s.dateFormat : undefined\n            })\n                .on('change', searchDelay !== null ?\n                that.s.dt.settings()[0].oApi._fnThrottle(function () {\n                    return fn(that, this);\n                }, searchDelay) :\n                function () {\n                    fn(that, _this);\n                })\n                .on('input keypress', !that.c.enterSearch && searchDelay !== null ?\n                that.s.dt.settings()[0].oApi._fnThrottle(function () {\n                    return fn(that, this);\n                }, searchDelay) :\n                that.c.enterSearch ?\n                    function (e) {\n                        var code = e.keyCode || e.which;\n                        if (code === 13) {\n                            fn(that, _this);\n                        }\n                    } :\n                    function () {\n                        fn(that, _this);\n                    });\n            if (that.c.greyscale) {\n                $$2(el).addClass(Criteria.classes.greyscale);\n            }\n            // If there is a preDefined value then add it\n            if (preDefined !== null) {\n                $$2(el).val(preDefined[0]);\n            }\n            // This is add responsive functionality to the logic button without redrawing everything else\n            that.s.dt.one('draw', function () {\n                $$2(that.s.topGroup).trigger('dtsb-redrawLogic');\n            });\n            return el;\n        };\n        Criteria.initNoValue = function (that) {\n            // This is add responsive functionality to the logic button without redrawing everything else\n            that.s.dt.one('draw', function () {\n                $$2(that.s.topGroup).trigger('dtsb-redrawLogic');\n            });\n        };\n        Criteria.init2Date = function (that, fn, preDefined) {\n            var _this = this;\n            if (preDefined === void 0) { preDefined = null; }\n            var searchDelay = that.s.dt.settings()[0].searchDelay;\n            // Declare all of the date elements that are required using DataTables dateTime plugin\n            var els = [\n                $$2('<input/>')\n                    .addClass(Criteria.classes.value)\n                    .addClass(Criteria.classes.input)\n                    .dtDateTime({\n                    attachTo: 'input',\n                    format: that.s.dateFormat ? that.s.dateFormat : undefined\n                })\n                    .on('change', searchDelay !== null ?\n                    that.s.dt.settings()[0].oApi._fnThrottle(function () {\n                        return fn(that, this);\n                    }, searchDelay) :\n                    function () {\n                        fn(that, _this);\n                    })\n                    .on('input keypress', !that.c.enterSearch && searchDelay !== null ?\n                    that.s.dt.settings()[0].oApi._fnThrottle(function () {\n                        return fn(that, this);\n                    }, searchDelay) :\n                    that.c.enterSearch ?\n                        function (e) {\n                            var code = e.keyCode || e.which;\n                            if (code === 13) {\n                                fn(that, _this);\n                            }\n                        } :\n                        function () {\n                            fn(that, _this);\n                        }),\n                $$2('<span>')\n                    .addClass(that.classes.joiner)\n                    .text(that.s.dt.i18n('searchBuilder.valueJoiner', that.c.i18n.valueJoiner)),\n                $$2('<input/>')\n                    .addClass(Criteria.classes.value)\n                    .addClass(Criteria.classes.input)\n                    .dtDateTime({\n                    attachTo: 'input',\n                    format: that.s.dateFormat ? that.s.dateFormat : undefined\n                })\n                    .on('change', searchDelay !== null ?\n                    that.s.dt.settings()[0].oApi._fnThrottle(function () {\n                        return fn(that, this);\n                    }, searchDelay) :\n                    function () {\n                        fn(that, _this);\n                    })\n                    .on('input keypress', !that.c.enterSearch && searchDelay !== null ?\n                    that.s.dt.settings()[0].oApi._fnThrottle(function () {\n                        return fn(that, this);\n                    }, searchDelay) :\n                    that.c.enterSearch ?\n                        function (e) {\n                            var code = e.keyCode || e.which;\n                            if (code === 13) {\n                                fn(that, _this);\n                            }\n                        } :\n                        function () {\n                            fn(that, _this);\n                        })\n            ];\n            if (that.c.greyscale) {\n                $$2(els[0]).addClass(Criteria.classes.greyscale);\n                $$2(els[2]).addClass(Criteria.classes.greyscale);\n            }\n            // If there are and preDefined values then add them\n            if (preDefined !== null && preDefined.length > 0) {\n                $$2(els[0]).val(preDefined[0]);\n                $$2(els[2]).val(preDefined[1]);\n            }\n            // This is add responsive functionality to the logic button without redrawing everything else\n            that.s.dt.one('draw', function () {\n                $$2(that.s.topGroup).trigger('dtsb-redrawLogic');\n            });\n            return els;\n        };\n        /**\n         * Default function for select elements to validate condition\n         */\n        Criteria.isInputValidSelect = function (el) {\n            var allFilled = true;\n            // Check each element to make sure that the selections are valid\n            for (var _i = 0, el_1 = el; _i < el_1.length; _i++) {\n                var element = el_1[_i];\n                if (($$2(element).children('option:selected').length ===\n                    $$2(element).children('option').length -\n                        $$2(element).children('option.' + Criteria.classes.notItalic).length) &&\n                    $$2(element).children('option:selected').length === 1 &&\n                    $$2(element).children('option:selected')[0] === $$2(element).children('option:hidden')[0]) {\n                    allFilled = false;\n                }\n            }\n            return allFilled;\n        };\n        /**\n         * Default function for input and date elements to validate condition\n         */\n        Criteria.isInputValidInput = function (el) {\n            var allFilled = true;\n            // Check each element to make sure that the inputs are valid\n            for (var _i = 0, el_2 = el; _i < el_2.length; _i++) {\n                var element = el_2[_i];\n                if ($$2(element).is('input') && $$2(element).val().length === 0) {\n                    allFilled = false;\n                }\n            }\n            return allFilled;\n        };\n        /**\n         * Default function for getting select conditions\n         */\n        Criteria.inputValueSelect = function (el) {\n            var values = [];\n            // Go through the select elements and push each selected option to the return array\n            for (var _i = 0, el_3 = el; _i < el_3.length; _i++) {\n                var element = el_3[_i];\n                if ($$2(element).is('select')) {\n                    var val = $$2(element).children('option:selected').val();\n                    // If the type of the option is an array we need to split it up and sort it\n                    values.push($$2(element).children('option:selected').attr('type') === 'Array' ?\n                        val.split(',').sort() :\n                        val);\n                }\n            }\n            return values;\n        };\n        /**\n         * Default function for getting input conditions\n         */\n        Criteria.inputValueInput = function (el) {\n            var values = [];\n            // Go through the input elements and push each value to the return array\n            for (var _i = 0, el_4 = el; _i < el_4.length; _i++) {\n                var element = el_4[_i];\n                if ($$2(element).is('input')) {\n                    values.push($$2(element).val());\n                }\n            }\n            return values;\n        };\n        /**\n         * Function that is run on each element as a call back when a search should be triggered\n         */\n        Criteria.updateListener = function (that, el) {\n            // When the value is changed the criteria is now complete so can be included in searches\n            // Get the condition from the map based on the key that has been selected for the condition\n            var condition = that.s.conditions[that.s.condition];\n            that.s.filled = condition.isInputValid(that.dom.value, that);\n            that.s.value = condition.inputValue(that.dom.value, that);\n            if (!Array.isArray(that.s.value)) {\n                that.s.value = [that.s.value];\n            }\n            for (var i = 0; i < that.s.value.length; i++) {\n                // If the value is an array we need to sort it\n                if (Array.isArray(that.s.value[i])) {\n                    that.s.value[i].sort();\n                }\n                // Otherwise replace the decimal place character for i18n\n                else if (that.s.type.indexOf('num') !== -1 &&\n                    (that.s.dt.settings()[0].oLanguage.sDecimal !== '' ||\n                        that.s.dt.settings()[0].oLanguage.sThousands !== '')) {\n                    var splitRD = [that.s.value[i].toString()];\n                    if (that.s.dt.settings()[0].oLanguage.sDecimal !== '') {\n                        splitRD = that.s.value[i].split(that.s.dt.settings()[0].oLanguage.sDecimal);\n                    }\n                    if (that.s.dt.settings()[0].oLanguage.sThousands !== '') {\n                        for (var j = 0; j < splitRD.length; j++) {\n                            splitRD[j] = splitRD[j].replace(that.s.dt.settings()[0].oLanguage.sThousands, ',');\n                        }\n                    }\n                    that.s.value[i] = splitRD.join('.');\n                }\n            }\n            // Take note of the cursor position so that we can refocus there later\n            var idx = null;\n            var cursorPos = null;\n            for (var i = 0; i < that.dom.value.length; i++) {\n                if (el === that.dom.value[i][0]) {\n                    idx = i;\n                    if (el.selectionStart !== undefined) {\n                        cursorPos = el.selectionStart;\n                    }\n                }\n            }\n            // Trigger a search\n            that.s.dt.draw();\n            // Refocus the element and set the correct cursor position\n            if (idx !== null) {\n                $$2(that.dom.value[idx]).removeClass(that.classes.italic);\n                $$2(that.dom.value[idx]).focus();\n                if (cursorPos !== null) {\n                    $$2(that.dom.value[idx])[0].setSelectionRange(cursorPos, cursorPos);\n                }\n            }\n        };\n        // The order of the conditions will make eslint sad :(\n        // Has to be in this order so that they are displayed correctly in select elements\n        // Also have to disable member ordering for this as the private methods used are not yet declared otherwise\n        // eslint-disable-next-line @typescript-eslint/member-ordering\n        Criteria.dateConditions = {\n            '=': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.date.equals', i18n.conditions.date.equals);\n                },\n                init: Criteria.initDate,\n                inputValue: Criteria.inputValueInput,\n                isInputValid: Criteria.isInputValidInput,\n                search: function (value, comparison) {\n                    value = value.replace(/(\\/|-|,)/g, '-');\n                    return value === comparison[0];\n                }\n            },\n            // eslint-disable-next-line sort-keys\n            '!=': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.date.not', i18n.conditions.date.not);\n                },\n                init: Criteria.initDate,\n                inputValue: Criteria.inputValueInput,\n                isInputValid: Criteria.isInputValidInput,\n                search: function (value, comparison) {\n                    value = value.replace(/(\\/|-|,)/g, '-');\n                    return value !== comparison[0];\n                }\n            },\n            '<': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.date.before', i18n.conditions.date.before);\n                },\n                init: Criteria.initDate,\n                inputValue: Criteria.inputValueInput,\n                isInputValid: Criteria.isInputValidInput,\n                search: function (value, comparison) {\n                    value = value.replace(/(\\/|-|,)/g, '-');\n                    return value < comparison[0];\n                }\n            },\n            '>': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.date.after', i18n.conditions.date.after);\n                },\n                init: Criteria.initDate,\n                inputValue: Criteria.inputValueInput,\n                isInputValid: Criteria.isInputValidInput,\n                search: function (value, comparison) {\n                    value = value.replace(/(\\/|-|,)/g, '-');\n                    return value > comparison[0];\n                }\n            },\n            'between': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.date.between', i18n.conditions.date.between);\n                },\n                init: Criteria.init2Date,\n                inputValue: Criteria.inputValueInput,\n                isInputValid: Criteria.isInputValidInput,\n                search: function (value, comparison) {\n                    value = value.replace(/(\\/|-|,)/g, '-');\n                    if (comparison[0] < comparison[1]) {\n                        return comparison[0] <= value && value <= comparison[1];\n                    }\n                    else {\n                        return comparison[1] <= value && value <= comparison[0];\n                    }\n                }\n            },\n            // eslint-disable-next-line sort-keys\n            '!between': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.date.notBetween', i18n.conditions.date.notBetween);\n                },\n                init: Criteria.init2Date,\n                inputValue: Criteria.inputValueInput,\n                isInputValid: Criteria.isInputValidInput,\n                search: function (value, comparison) {\n                    value = value.replace(/(\\/|-|,)/g, '-');\n                    if (comparison[0] < comparison[1]) {\n                        return !(comparison[0] <= value && value <= comparison[1]);\n                    }\n                    else {\n                        return !(comparison[1] <= value && value <= comparison[0]);\n                    }\n                }\n            },\n            'null': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.date.empty', i18n.conditions.date.empty);\n                },\n                init: Criteria.initNoValue,\n                inputValue: function () {\n                    return;\n                },\n                isInputValid: function () {\n                    return true;\n                },\n                search: function (value) {\n                    return (value === null || value === undefined || value.length === 0);\n                }\n            },\n            // eslint-disable-next-line sort-keys\n            '!null': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.date.notEmpty', i18n.conditions.date.notEmpty);\n                },\n                init: Criteria.initNoValue,\n                inputValue: function () {\n                    return;\n                },\n                isInputValid: function () {\n                    return true;\n                },\n                search: function (value) {\n                    return !(value === null || value === undefined || value.length === 0);\n                }\n            }\n        };\n        // The order of the conditions will make eslint sad :(\n        // Has to be in this order so that they are displayed correctly in select elements\n        // Also have to disable member ordering for this as the private methods used are not yet declared otherwise\n        // eslint-disable-next-line @typescript-eslint/member-ordering\n        Criteria.momentDateConditions = {\n            '=': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.date.equals', i18n.conditions.date.equals);\n                },\n                init: Criteria.initDate,\n                inputValue: Criteria.inputValueInput,\n                isInputValid: Criteria.isInputValidInput,\n                search: function (value, comparison, that) {\n                    return moment(value, that.s.dateFormat).valueOf() ===\n                        moment(comparison[0], that.s.dateFormat).valueOf();\n                }\n            },\n            // eslint-disable-next-line sort-keys\n            '!=': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.date.not', i18n.conditions.date.not);\n                },\n                init: Criteria.initDate,\n                inputValue: Criteria.inputValueInput,\n                isInputValid: Criteria.isInputValidInput,\n                search: function (value, comparison, that) {\n                    return moment(value, that.s.dateFormat).valueOf() !==\n                        moment(comparison[0], that.s.dateFormat).valueOf();\n                }\n            },\n            '<': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.date.before', i18n.conditions.date.before);\n                },\n                init: Criteria.initDate,\n                inputValue: Criteria.inputValueInput,\n                isInputValid: Criteria.isInputValidInput,\n                search: function (value, comparison, that) {\n                    return moment(value, that.s.dateFormat).valueOf() < moment(comparison[0], that.s.dateFormat).valueOf();\n                }\n            },\n            '>': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.date.after', i18n.conditions.date.after);\n                },\n                init: Criteria.initDate,\n                inputValue: Criteria.inputValueInput,\n                isInputValid: Criteria.isInputValidInput,\n                search: function (value, comparison, that) {\n                    return moment(value, that.s.dateFormat).valueOf() > moment(comparison[0], that.s.dateFormat).valueOf();\n                }\n            },\n            'between': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.date.between', i18n.conditions.date.between);\n                },\n                init: Criteria.init2Date,\n                inputValue: Criteria.inputValueInput,\n                isInputValid: Criteria.isInputValidInput,\n                search: function (value, comparison, that) {\n                    var val = moment(value, that.s.dateFormat).valueOf();\n                    var comp0 = moment(comparison[0], that.s.dateFormat).valueOf();\n                    var comp1 = moment(comparison[1], that.s.dateFormat).valueOf();\n                    if (comp0 < comp1) {\n                        return comp0 <= val && val <= comp1;\n                    }\n                    else {\n                        return comp1 <= val && val <= comp0;\n                    }\n                }\n            },\n            // eslint-disable-next-line sort-keys\n            '!between': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.date.notBetween', i18n.conditions.date.notBetween);\n                },\n                init: Criteria.init2Date,\n                inputValue: Criteria.inputValueInput,\n                isInputValid: Criteria.isInputValidInput,\n                search: function (value, comparison, that) {\n                    var val = moment(value, that.s.dateFormat).valueOf();\n                    var comp0 = moment(comparison[0], that.s.dateFormat).valueOf();\n                    var comp1 = moment(comparison[1], that.s.dateFormat).valueOf();\n                    if (comp0 < comp1) {\n                        return !(+comp0 <= +val && +val <= +comp1);\n                    }\n                    else {\n                        return !(+comp1 <= +val && +val <= +comp0);\n                    }\n                }\n            },\n            'null': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.date.empty', i18n.conditions.date.empty);\n                },\n                init: Criteria.initNoValue,\n                inputValue: function () {\n                    return;\n                },\n                isInputValid: function () {\n                    return true;\n                },\n                search: function (value) {\n                    return (value === null || value === undefined || value.length === 0);\n                }\n            },\n            // eslint-disable-next-line sort-keys\n            '!null': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.date.notEmpty', i18n.conditions.date.notEmpty);\n                },\n                init: Criteria.initNoValue,\n                inputValue: function () {\n                    return;\n                },\n                isInputValid: function () {\n                    return true;\n                },\n                search: function (value) {\n                    return !(value === null || value === undefined || value.length === 0);\n                }\n            }\n        };\n        // The order of the conditions will make eslint sad :(\n        // Has to be in this order so that they are displayed correctly in select elements\n        // Also have to disable member ordering for this as the private methods used are not yet declared otherwise\n        // eslint-disable-next-line @typescript-eslint/member-ordering\n        Criteria.luxonDateConditions = {\n            '=': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.date.equals', i18n.conditions.date.equals);\n                },\n                init: Criteria.initDate,\n                inputValue: Criteria.inputValueInput,\n                isInputValid: Criteria.isInputValidInput,\n                search: function (value, comparison, that) {\n                    return luxon.DateTime.fromFormat(value, that.s.dateFormat).ts\n                        === luxon.DateTime.fromFormat(comparison[0], that.s.dateFormat).ts;\n                }\n            },\n            // eslint-disable-next-line sort-keys\n            '!=': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.date.not', i18n.conditions.date.not);\n                },\n                init: Criteria.initDate,\n                inputValue: Criteria.inputValueInput,\n                isInputValid: Criteria.isInputValidInput,\n                search: function (value, comparison, that) {\n                    return luxon.DateTime.fromFormat(value, that.s.dateFormat).ts\n                        !== luxon.DateTime.fromFormat(comparison[0], that.s.dateFormat).ts;\n                }\n            },\n            '<': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.date.before', i18n.conditions.date.before);\n                },\n                init: Criteria.initDate,\n                inputValue: Criteria.inputValueInput,\n                isInputValid: Criteria.isInputValidInput,\n                search: function (value, comparison, that) {\n                    return luxon.DateTime.fromFormat(value, that.s.dateFormat).ts\n                        < luxon.DateTime.fromFormat(comparison[0], that.s.dateFormat).ts;\n                }\n            },\n            '>': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.date.after', i18n.conditions.date.after);\n                },\n                init: Criteria.initDate,\n                inputValue: Criteria.inputValueInput,\n                isInputValid: Criteria.isInputValidInput,\n                search: function (value, comparison, that) {\n                    return luxon.DateTime.fromFormat(value, that.s.dateFormat).ts\n                        > luxon.DateTime.fromFormat(comparison[0], that.s.dateFormat).ts;\n                }\n            },\n            'between': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.date.between', i18n.conditions.date.between);\n                },\n                init: Criteria.init2Date,\n                inputValue: Criteria.inputValueInput,\n                isInputValid: Criteria.isInputValidInput,\n                search: function (value, comparison, that) {\n                    var val = luxon.DateTime.fromFormat(value, that.s.dateFormat).ts;\n                    var comp0 = luxon.DateTime.fromFormat(comparison[0], that.s.dateFormat).ts;\n                    var comp1 = luxon.DateTime.fromFormat(comparison[1], that.s.dateFormat).ts;\n                    if (comp0 < comp1) {\n                        return comp0 <= val && val <= comp1;\n                    }\n                    else {\n                        return comp1 <= val && val <= comp0;\n                    }\n                }\n            },\n            // eslint-disable-next-line sort-keys\n            '!between': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.date.notBetween', i18n.conditions.date.notBetween);\n                },\n                init: Criteria.init2Date,\n                inputValue: Criteria.inputValueInput,\n                isInputValid: Criteria.isInputValidInput,\n                search: function (value, comparison, that) {\n                    var val = luxon.DateTime.fromFormat(value, that.s.dateFormat).ts;\n                    var comp0 = luxon.DateTime.fromFormat(comparison[0], that.s.dateFormat).ts;\n                    var comp1 = luxon.DateTime.fromFormat(comparison[1], that.s.dateFormat).ts;\n                    if (comp0 < comp1) {\n                        return !(+comp0 <= +val && +val <= +comp1);\n                    }\n                    else {\n                        return !(+comp1 <= +val && +val <= +comp0);\n                    }\n                }\n            },\n            'null': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.date.empty', i18n.conditions.date.empty);\n                },\n                init: Criteria.initNoValue,\n                inputValue: function () {\n                    return;\n                },\n                isInputValid: function () {\n                    return true;\n                },\n                search: function (value) {\n                    return (value === null || value === undefined || value.length === 0);\n                }\n            },\n            // eslint-disable-next-line sort-keys\n            '!null': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.date.notEmpty', i18n.conditions.date.notEmpty);\n                },\n                init: Criteria.initNoValue,\n                inputValue: function () {\n                    return;\n                },\n                isInputValid: function () {\n                    return true;\n                },\n                search: function (value) {\n                    return !(value === null || value === undefined || value.length === 0);\n                }\n            }\n        };\n        // The order of the conditions will make eslint sad :(\n        // Has to be in this order so that they are displayed correctly in select elements\n        // Also have to disable member ordering for this as the private methods used are not yet declared otherwise\n        // eslint-disable-next-line @typescript-eslint/member-ordering\n        Criteria.numConditions = {\n            '=': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.number.equals', i18n.conditions.number.equals);\n                },\n                init: Criteria.initSelect,\n                inputValue: Criteria.inputValueSelect,\n                isInputValid: Criteria.isInputValidSelect,\n                search: function (value, comparison) {\n                    return +value === +comparison[0];\n                }\n            },\n            // eslint-disable-next-line sort-keys\n            '!=': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.number.not', i18n.conditions.number.not);\n                },\n                init: Criteria.initSelect,\n                inputValue: Criteria.inputValueSelect,\n                isInputValid: Criteria.isInputValidSelect,\n                search: function (value, comparison) {\n                    return +value !== +comparison[0];\n                }\n            },\n            '<': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.number.lt', i18n.conditions.number.lt);\n                },\n                init: Criteria.initInput,\n                inputValue: Criteria.inputValueInput,\n                isInputValid: Criteria.isInputValidInput,\n                search: function (value, comparison) {\n                    return +value < +comparison[0];\n                }\n            },\n            '<=': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.number.lte', i18n.conditions.number.lte);\n                },\n                init: Criteria.initInput,\n                inputValue: Criteria.inputValueInput,\n                isInputValid: Criteria.isInputValidInput,\n                search: function (value, comparison) {\n                    return +value <= +comparison[0];\n                }\n            },\n            '>=': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.number.gte', i18n.conditions.number.gte);\n                },\n                init: Criteria.initInput,\n                inputValue: Criteria.inputValueInput,\n                isInputValid: Criteria.isInputValidInput,\n                search: function (value, comparison) {\n                    return +value >= +comparison[0];\n                }\n            },\n            // eslint-disable-next-line sort-keys\n            '>': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.number.gt', i18n.conditions.number.gt);\n                },\n                init: Criteria.initInput,\n                inputValue: Criteria.inputValueInput,\n                isInputValid: Criteria.isInputValidInput,\n                search: function (value, comparison) {\n                    return +value > +comparison[0];\n                }\n            },\n            'between': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.number.between', i18n.conditions.number.between);\n                },\n                init: Criteria.init2Input,\n                inputValue: Criteria.inputValueInput,\n                isInputValid: Criteria.isInputValidInput,\n                search: function (value, comparison) {\n                    if (+comparison[0] < +comparison[1]) {\n                        return +comparison[0] <= +value && +value <= +comparison[1];\n                    }\n                    else {\n                        return +comparison[1] <= +value && +value <= +comparison[0];\n                    }\n                }\n            },\n            // eslint-disable-next-line sort-keys\n            '!between': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.number.notBetween', i18n.conditions.number.notBetween);\n                },\n                init: Criteria.init2Input,\n                inputValue: Criteria.inputValueInput,\n                isInputValid: Criteria.isInputValidInput,\n                search: function (value, comparison) {\n                    if (+comparison[0] < +comparison[1]) {\n                        return !(+comparison[0] <= +value && +value <= +comparison[1]);\n                    }\n                    else {\n                        return !(+comparison[1] <= +value && +value <= +comparison[0]);\n                    }\n                }\n            },\n            'null': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.number.empty', i18n.conditions.number.empty);\n                },\n                init: Criteria.initNoValue,\n                inputValue: function () {\n                    return;\n                },\n                isInputValid: function () {\n                    return true;\n                },\n                search: function (value) {\n                    return (value === null || value === undefined || value.length === 0);\n                }\n            },\n            // eslint-disable-next-line sort-keys\n            '!null': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.number.notEmpty', i18n.conditions.number.notEmpty);\n                },\n                init: Criteria.initNoValue,\n                inputValue: function () {\n                    return;\n                },\n                isInputValid: function () {\n                    return true;\n                },\n                search: function (value) {\n                    return !(value === null || value === undefined || value.length === 0);\n                }\n            }\n        };\n        // The order of the conditions will make eslint sad :(\n        // Has to be in this order so that they are displayed correctly in select elements\n        // Also have to disable member ordering for this as the private methods used are not yet declared otherwise\n        // eslint-disable-next-line @typescript-eslint/member-ordering\n        Criteria.numFmtConditions = {\n            '=': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.number.equals', i18n.conditions.number.equals);\n                },\n                init: Criteria.initSelect,\n                inputValue: Criteria.inputValueSelect,\n                isInputValid: Criteria.isInputValidSelect,\n                search: function (value, comparison) {\n                    var val = value.indexOf('-') === 0 ?\n                        '-' + value.replace(/[^0-9.]/g, '') :\n                        value.replace(/[^0-9.]/g, '');\n                    var comp = comparison[0].indexOf('-') === 0 ?\n                        '-' + comparison[0].replace(/[^0-9.]/g, '') :\n                        comparison[0].replace(/[^0-9.]/g, '');\n                    return +val === +comp;\n                }\n            },\n            // eslint-disable-next-line sort-keys\n            '!=': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.number.not', i18n.conditions.number.not);\n                },\n                init: Criteria.initSelect,\n                inputValue: Criteria.inputValueSelect,\n                isInputValid: Criteria.isInputValidSelect,\n                search: function (value, comparison) {\n                    var val = value.indexOf('-') === 0 ?\n                        '-' + value.replace(/[^0-9.]/g, '') :\n                        value.replace(/[^0-9.]/g, '');\n                    var comp = comparison[0].indexOf('-') === 0 ?\n                        '-' + comparison[0].replace(/[^0-9.]/g, '') :\n                        comparison[0].replace(/[^0-9.]/g, '');\n                    return +val !== +comp;\n                }\n            },\n            '<': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.number.lt', i18n.conditions.number.lt);\n                },\n                init: Criteria.initInput,\n                inputValue: Criteria.inputValueInput,\n                isInputValid: Criteria.isInputValidInput,\n                search: function (value, comparison) {\n                    var val = value.indexOf('-') === 0 ?\n                        '-' + value.replace(/[^0-9.]/g, '') :\n                        value.replace(/[^0-9.]/g, '');\n                    var comp = comparison[0].indexOf('-') === 0 ?\n                        '-' + comparison[0].replace(/[^0-9.]/g, '') :\n                        comparison[0].replace(/[^0-9.]/g, '');\n                    return +val < +comp;\n                }\n            },\n            '<=': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.number.lte', i18n.conditions.number.lte);\n                },\n                init: Criteria.initInput,\n                inputValue: Criteria.inputValueInput,\n                isInputValid: Criteria.isInputValidInput,\n                search: function (value, comparison) {\n                    var val = value.indexOf('-') === 0 ?\n                        '-' + value.replace(/[^0-9.]/g, '') :\n                        value.replace(/[^0-9.]/g, '');\n                    var comp = comparison[0].indexOf('-') === 0 ?\n                        '-' + comparison[0].replace(/[^0-9.]/g, '') :\n                        comparison[0].replace(/[^0-9.]/g, '');\n                    return +val <= +comp;\n                }\n            },\n            '>=': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.number.gte', i18n.conditions.number.gte);\n                },\n                init: Criteria.initInput,\n                inputValue: Criteria.inputValueInput,\n                isInputValid: Criteria.isInputValidInput,\n                search: function (value, comparison) {\n                    var val = value.indexOf('-') === 0 ?\n                        '-' + value.replace(/[^0-9.]/g, '') :\n                        value.replace(/[^0-9.]/g, '');\n                    var comp = comparison[0].indexOf('-') === 0 ?\n                        '-' + comparison[0].replace(/[^0-9.]/g, '') :\n                        comparison[0].replace(/[^0-9.]/g, '');\n                    return +val >= +comp;\n                }\n            },\n            // eslint-disable-next-line sort-keys\n            '>': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.number.gt', i18n.conditions.number.gt);\n                },\n                init: Criteria.initInput,\n                inputValue: Criteria.inputValueInput,\n                isInputValid: Criteria.isInputValidInput,\n                search: function (value, comparison) {\n                    var val = value.indexOf('-') === 0 ?\n                        '-' + value.replace(/[^0-9.]/g, '') :\n                        value.replace(/[^0-9.]/g, '');\n                    var comp = comparison[0].indexOf('-') === 0 ?\n                        '-' + comparison[0].replace(/[^0-9.]/g, '') :\n                        comparison[0].replace(/[^0-9.]/g, '');\n                    return +val > +comp;\n                }\n            },\n            'between': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.number.between', i18n.conditions.number.between);\n                },\n                init: Criteria.init2Input,\n                inputValue: Criteria.inputValueInput,\n                isInputValid: Criteria.isInputValidInput,\n                search: function (value, comparison) {\n                    var val = value.indexOf('-') === 0 ?\n                        '-' + value.replace(/[^0-9.]/g, '') :\n                        value.replace(/[^0-9.]/g, '');\n                    var comp0 = comparison[0].indexOf('-') === 0 ?\n                        '-' + comparison[0].replace(/[^0-9.]/g, '') :\n                        comparison[0].replace(/[^0-9.]/g, '');\n                    var comp1 = comparison[1].indexOf('-') === 0 ?\n                        '-' + comparison[1].replace(/[^0-9.]/g, '') :\n                        comparison[1].replace(/[^0-9.]/g, '');\n                    if (+comp0 < +comp1) {\n                        return +comp0 <= +val && +val <= +comp1;\n                    }\n                    else {\n                        return +comp1 <= +val && +val <= +comp0;\n                    }\n                }\n            },\n            // eslint-disable-next-line sort-keys\n            '!between': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.number.notBetween', i18n.conditions.number.notBetween);\n                },\n                init: Criteria.init2Input,\n                inputValue: Criteria.inputValueInput,\n                isInputValid: Criteria.isInputValidInput,\n                search: function (value, comparison) {\n                    var val = value.indexOf('-') === 0 ?\n                        '-' + value.replace(/[^0-9.]/g, '') :\n                        value.replace(/[^0-9.]/g, '');\n                    var comp0 = comparison[0].indexOf('-') === 0 ?\n                        '-' + comparison[0].replace(/[^0-9.]/g, '') :\n                        comparison[0].replace(/[^0-9.]/g, '');\n                    var comp1 = comparison[1].indexOf('-') === 0 ?\n                        '-' + comparison[1].replace(/[^0-9.]/g, '') :\n                        comparison[1].replace(/[^0-9.]/g, '');\n                    if (+comp0 < +comp1) {\n                        return !(+comp0 <= +val && +val <= +comp1);\n                    }\n                    else {\n                        return !(+comp1 <= +val && +val <= +comp0);\n                    }\n                }\n            },\n            'null': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.number.empty', i18n.conditions.number.empty);\n                },\n                init: Criteria.initNoValue,\n                inputValue: function () {\n                    return;\n                },\n                isInputValid: function () {\n                    return true;\n                },\n                search: function (value) {\n                    return (value === null || value === undefined || value.length === 0);\n                }\n            },\n            // eslint-disable-next-line sort-keys\n            '!null': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.number.notEmpty', i18n.conditions.number.notEmpty);\n                },\n                init: Criteria.initNoValue,\n                inputValue: function () {\n                    return;\n                },\n                isInputValid: function () {\n                    return true;\n                },\n                search: function (value) {\n                    return !(value === null || value === undefined || value.length === 0);\n                }\n            }\n        };\n        // The order of the conditions will make eslint sad :(\n        // Has to be in this order so that they are displayed correctly in select elements\n        // Also have to disable member ordering for this as the private methods used are not yet declared otherwise\n        // eslint-disable-next-line @typescript-eslint/member-ordering\n        Criteria.stringConditions = {\n            '=': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.string.equals', i18n.conditions.string.equals);\n                },\n                init: Criteria.initSelect,\n                inputValue: Criteria.inputValueSelect,\n                isInputValid: Criteria.isInputValidSelect,\n                search: function (value, comparison) {\n                    return value === comparison[0];\n                }\n            },\n            // eslint-disable-next-line sort-keys\n            '!=': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.string.not', i18n.conditions.string.not);\n                },\n                init: Criteria.initSelect,\n                inputValue: Criteria.inputValueSelect,\n                isInputValid: Criteria.isInputValidInput,\n                search: function (value, comparison) {\n                    return value !== comparison[0];\n                }\n            },\n            'starts': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.string.startsWith', i18n.conditions.string.startsWith);\n                },\n                init: Criteria.initInput,\n                inputValue: Criteria.inputValueInput,\n                isInputValid: Criteria.isInputValidInput,\n                search: function (value, comparison) {\n                    return value.toLowerCase().indexOf(comparison[0].toLowerCase()) === 0;\n                }\n            },\n            // eslint-disable-next-line sort-keys\n            'contains': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.string.contains', i18n.conditions.string.contains);\n                },\n                init: Criteria.initInput,\n                inputValue: Criteria.inputValueInput,\n                isInputValid: Criteria.isInputValidInput,\n                search: function (value, comparison) {\n                    return value.toLowerCase().indexOf(comparison[0].toLowerCase()) !== -1;\n                }\n            },\n            'ends': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.string.endsWith', i18n.conditions.string.endsWith);\n                },\n                init: Criteria.initInput,\n                inputValue: Criteria.inputValueInput,\n                isInputValid: Criteria.isInputValidInput,\n                search: function (value, comparison) {\n                    return value.toLowerCase().endsWith(comparison[0].toLowerCase());\n                }\n            },\n            'null': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.string.empty', i18n.conditions.string.empty);\n                },\n                init: Criteria.initNoValue,\n                inputValue: function () {\n                    return;\n                },\n                isInputValid: function () {\n                    return true;\n                },\n                search: function (value) {\n                    return (value === null || value === undefined || value.length === 0);\n                }\n            },\n            // eslint-disable-next-line sort-keys\n            '!null': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.string.notEmpty', i18n.conditions.string.notEmpty);\n                },\n                init: Criteria.initNoValue,\n                inputValue: function () {\n                    return;\n                },\n                isInputValid: function () {\n                    return true;\n                },\n                search: function (value) {\n                    return !(value === null || value === undefined || value.length === 0);\n                }\n            }\n        };\n        // The order of the conditions will make eslint sad :(\n        // Also have to disable member ordering for this as the private methods used are not yet declared otherwise\n        // eslint-disable-next-line @typescript-eslint/member-ordering\n        Criteria.arrayConditions = {\n            'contains': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.array.contains', i18n.conditions.array.contains);\n                },\n                init: Criteria.initSelectArray,\n                inputValue: Criteria.inputValueSelect,\n                isInputValid: Criteria.isInputValidSelect,\n                search: function (value, comparison) {\n                    return value.indexOf(comparison[0]) !== -1;\n                }\n            },\n            'without': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.array.without', i18n.conditions.array.without);\n                },\n                init: Criteria.initSelectArray,\n                inputValue: Criteria.inputValueSelect,\n                isInputValid: Criteria.isInputValidSelect,\n                search: function (value, comparison) {\n                    return value.indexOf(comparison[0]) === -1;\n                }\n            },\n            // eslint-disable-next-line sort-keys\n            '=': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.array.equals', i18n.conditions.array.equals);\n                },\n                init: Criteria.initSelect,\n                inputValue: Criteria.inputValueSelect,\n                isInputValid: Criteria.isInputValidSelect,\n                search: function (value, comparison) {\n                    if (value.length === comparison[0].length) {\n                        for (var i = 0; i < value.length; i++) {\n                            if (value[i] !== comparison[0][i]) {\n                                return false;\n                            }\n                        }\n                        return true;\n                    }\n                    return false;\n                }\n            },\n            // eslint-disable-next-line sort-keys\n            '!=': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.array.not', i18n.conditions.array.not);\n                },\n                init: Criteria.initSelect,\n                inputValue: Criteria.inputValueSelect,\n                isInputValid: Criteria.isInputValidSelect,\n                search: function (value, comparison) {\n                    if (value.length === comparison[0].length) {\n                        for (var i = 0; i < value.length; i++) {\n                            if (value[i] !== comparison[0][i]) {\n                                return true;\n                            }\n                        }\n                        return false;\n                    }\n                    return true;\n                }\n            },\n            'null': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.array.empty', i18n.conditions.array.empty);\n                },\n                init: Criteria.initNoValue,\n                inputValue: function () {\n                    return;\n                },\n                isInputValid: function () {\n                    return true;\n                },\n                search: function (value) {\n                    return (value === null || value === undefined || value.length === 0);\n                }\n            },\n            // eslint-disable-next-line sort-keys\n            '!null': {\n                conditionName: function (dt, i18n) {\n                    return dt.i18n('searchBuilder.conditions.array.notEmpty', i18n.conditions.array.notEmpty);\n                },\n                init: Criteria.initNoValue,\n                inputValue: function () {\n                    return;\n                },\n                isInputValid: function () {\n                    return true;\n                },\n                search: function (value) {\n                    return (value !== null && value !== undefined && value.length !== 0);\n                }\n            }\n        };\n        // eslint will be sad because we have to disable member ordering for this as the\n        // private static properties used are not yet declared otherwise\n        // eslint-disable-next-line @typescript-eslint/member-ordering\n        Criteria.defaults = {\n            columns: true,\n            conditions: {\n                'array': Criteria.arrayConditions,\n                'date': Criteria.dateConditions,\n                'html': Criteria.stringConditions,\n                'html-num': Criteria.numConditions,\n                'html-num-fmt': Criteria.numFmtConditions,\n                'luxon': Criteria.luxonDateConditions,\n                'moment': Criteria.momentDateConditions,\n                'num': Criteria.numConditions,\n                'num-fmt': Criteria.numFmtConditions,\n                'string': Criteria.stringConditions\n            },\n            depthLimit: false,\n            enterSearch: false,\n            filterChanged: undefined,\n            greyscale: false,\n            i18n: {\n                add: 'Add Condition',\n                button: {\n                    0: 'Search Builder',\n                    _: 'Search Builder (%d)'\n                },\n                clearAll: 'Clear All',\n                condition: 'Condition',\n                data: 'Data',\n                deleteTitle: 'Delete filtering rule',\n                leftTitle: 'Outdent criteria',\n                logicAnd: 'And',\n                logicOr: 'Or',\n                rightTitle: 'Indent criteria',\n                title: {\n                    0: 'Custom Search Builder',\n                    _: 'Custom Search Builder (%d)'\n                },\n                value: 'Value',\n                valueJoiner: 'and'\n            },\n            logic: 'AND',\n            orthogonal: {\n                display: 'display',\n                search: 'filter'\n            },\n            preDefined: false\n        };\n        return Criteria;\n    }());\n\n    var $$1;\n    var dataTable$1;\n    /**\n     * Sets the value of jQuery for use in the file\n     *\n     * @param jq the instance of jQuery to be set\n     */\n    function setJQuery$1(jq) {\n        $$1 = jq;\n        dataTable$1 = jq.fn.dataTable;\n    }\n    /**\n     * The Group class is used within SearchBuilder to represent a group of criteria\n     */\n    var Group = /** @class */ (function () {\n        function Group(table, opts, topGroup, index, isChild, depth) {\n            if (index === void 0) { index = 0; }\n            if (isChild === void 0) { isChild = false; }\n            if (depth === void 0) { depth = 1; }\n            // Check that the required version of DataTables is included\n            if (!dataTable$1 || !dataTable$1.versionCheck || !dataTable$1.versionCheck('1.10.0')) {\n                throw new Error('SearchBuilder requires DataTables 1.10 or newer');\n            }\n            this.classes = $$1.extend(true, {}, Group.classes);\n            // Get options from user\n            this.c = $$1.extend(true, {}, Group.defaults, opts);\n            this.s = {\n                criteria: [],\n                depth: depth,\n                dt: table,\n                index: index,\n                isChild: isChild,\n                logic: undefined,\n                opts: opts,\n                toDrop: undefined,\n                topGroup: topGroup\n            };\n            this.dom = {\n                add: $$1('<button/>')\n                    .addClass(this.classes.add)\n                    .addClass(this.classes.button)\n                    .attr('type', 'button'),\n                clear: $$1('<button>&times</button>')\n                    .addClass(this.classes.button)\n                    .addClass(this.classes.clearGroup)\n                    .attr('type', 'button'),\n                container: $$1('<div/>')\n                    .addClass(this.classes.group),\n                logic: $$1('<button/>')\n                    .addClass(this.classes.logic)\n                    .addClass(this.classes.button)\n                    .attr('type', 'button'),\n                logicContainer: $$1('<div/>')\n                    .addClass(this.classes.logicContainer)\n            };\n            // A reference to the top level group is maintained throughout any subgroups and criteria that may be created\n            if (this.s.topGroup === undefined) {\n                this.s.topGroup = this.dom.container;\n            }\n            this._setup();\n            return this;\n        }\n        /**\n         * Destroys the groups buttons, clears the internal criteria and removes it from the dom\n         */\n        Group.prototype.destroy = function () {\n            // Turn off listeners\n            $$1(this.dom.add).off('.dtsb');\n            $$1(this.dom.logic).off('.dtsb');\n            // Trigger event for groups at a higher level to pick up on\n            $$1(this.dom.container)\n                .trigger('dtsb-destroy')\n                .remove();\n            this.s.criteria = [];\n        };\n        /**\n         * Gets the details required to rebuild the group\n         */\n        // Eslint upset at empty object but needs to be done\n        // eslint-disable-next-line @typescript-eslint/ban-types\n        Group.prototype.getDetails = function () {\n            if (this.s.criteria.length === 0) {\n                return {};\n            }\n            var details = {\n                criteria: [],\n                logic: this.s.logic\n            };\n            // NOTE here crit could be either a subgroup or a criteria\n            for (var _i = 0, _a = this.s.criteria; _i < _a.length; _i++) {\n                var crit = _a[_i];\n                details.criteria.push(crit.criteria.getDetails());\n            }\n            return details;\n        };\n        /**\n         * Getter for the node for the container of the group\n         *\n         * @returns Node for the container of the group\n         */\n        Group.prototype.getNode = function () {\n            return this.dom.container;\n        };\n        /**\n         * Rebuilds the group based upon the details passed in\n         *\n         * @param loadedDetails the details required to rebuild the group\n         */\n        Group.prototype.rebuild = function (loadedDetails) {\n            // If no criteria are stored then just return\n            if (loadedDetails.criteria === undefined ||\n                loadedDetails.criteria === null ||\n                (Array.isArray(loadedDetails.criteria) && loadedDetails.criteria.length === 0)) {\n                return;\n            }\n            this.s.logic = loadedDetails.logic;\n            $$1(this.dom.logic).text(this.s.logic === 'OR'\n                ? this.s.dt.i18n('searchBuilder.logicOr', this.c.i18n.logicOr)\n                : this.s.dt.i18n('searchBuilder.logicAnd', this.c.i18n.logicAnd));\n            // Add all of the criteria, be it a sub group or a criteria\n            if (Array.isArray(loadedDetails.criteria)) {\n                for (var _i = 0, _a = loadedDetails.criteria; _i < _a.length; _i++) {\n                    var crit = _a[_i];\n                    if (crit.logic !== undefined) {\n                        this._addPrevGroup(crit);\n                    }\n                    else if (crit.logic === undefined) {\n                        this._addPrevCriteria(crit);\n                    }\n                }\n            }\n            // For all of the criteria children, update the arrows incase they require changing and set the listeners\n            for (var _b = 0, _c = this.s.criteria; _b < _c.length; _b++) {\n                var crit = _c[_b];\n                if (crit.criteria instanceof Criteria) {\n                    crit.criteria.updateArrows(this.s.criteria.length > 1, false);\n                    this._setCriteriaListeners(crit.criteria);\n                }\n            }\n        };\n        /**\n         * Redraws the Contents of the searchBuilder Groups and Criteria\n         */\n        Group.prototype.redrawContents = function () {\n            // Clear the container out and add the basic elements\n            $$1(this.dom.container)\n                .empty()\n                .append(this.dom.logicContainer)\n                .append(this.dom.add);\n            // Sort the criteria by index so that they appear in the correct order\n            this.s.criteria.sort(function (a, b) {\n                if (a.criteria.s.index < b.criteria.s.index) {\n                    return -1;\n                }\n                else if (a.criteria.s.index > b.criteria.s.index) {\n                    return 1;\n                }\n                return 0;\n            });\n            this.setListeners();\n            for (var i = 0; i < this.s.criteria.length; i++) {\n                var crit = this.s.criteria[i].criteria;\n                if (crit instanceof Criteria) {\n                    // Reset the index to the new value\n                    this.s.criteria[i].index = i;\n                    this.s.criteria[i].criteria.s.index = i;\n                    // Add to the group\n                    $$1(this.s.criteria[i].criteria.dom.container).insertBefore(this.dom.add);\n                    // Set listeners for various points\n                    this._setCriteriaListeners(crit);\n                    this.s.criteria[i].criteria.rebuild(this.s.criteria[i].criteria.getDetails());\n                }\n                else if (crit instanceof Group && crit.s.criteria.length > 0) {\n                    // Reset the index to the new value\n                    this.s.criteria[i].index = i;\n                    this.s.criteria[i].criteria.s.index = i;\n                    // Add the sub group to the group\n                    $$1(this.s.criteria[i].criteria.dom.container).insertBefore(this.dom.add);\n                    // Redraw the contents of the group\n                    crit.redrawContents();\n                    this._setGroupListeners(crit);\n                }\n                else {\n                    // The group is empty so remove it\n                    this.s.criteria.splice(i, 1);\n                    i--;\n                }\n            }\n            this.setupLogic();\n        };\n        /**\n         * Resizes the logic button only rather than the entire dom.\n         */\n        Group.prototype.redrawLogic = function () {\n            for (var _i = 0, _a = this.s.criteria; _i < _a.length; _i++) {\n                var crit = _a[_i];\n                if (crit instanceof Group) {\n                    crit.redrawLogic();\n                }\n            }\n            this.setupLogic();\n        };\n        /**\n         * Search method, checking the row data against the criteria in the group\n         *\n         * @param rowData The row data to be compared\n         * @returns boolean The result of the search\n         */\n        Group.prototype.search = function (rowData, rowIdx) {\n            if (this.s.logic === 'AND') {\n                return this._andSearch(rowData, rowIdx);\n            }\n            else if (this.s.logic === 'OR') {\n                return this._orSearch(rowData, rowIdx);\n            }\n            return true;\n        };\n        /**\n         * Locates the groups logic button to the correct location on the page\n         */\n        Group.prototype.setupLogic = function () {\n            // Remove logic button\n            $$1(this.dom.logicContainer).remove();\n            $$1(this.dom.clear).remove();\n            // If there are no criteria in the group then keep the logic removed and return\n            if (this.s.criteria.length < 1) {\n                if (!this.s.isChild) {\n                    $$1(this.dom.container).trigger('dtsb-destroy');\n                    // Set criteria left margin\n                    $$1(this.dom.container).css('margin-left', 0);\n                }\n                return;\n            }\n            // Set width, take 2 for the border\n            var height = $$1(this.dom.container).height() - 1;\n            $$1(this.dom.clear).height('0px');\n            $$1(this.dom.logicContainer).append(this.dom.clear).width(height);\n            // Prepend logic button\n            $$1(this.dom.container).prepend(this.dom.logicContainer);\n            this._setLogicListener();\n            // Set criteria left margin\n            $$1(this.dom.container).css('margin-left', $$1(this.dom.logicContainer).outerHeight(true));\n            var logicOffset = $$1(this.dom.logicContainer).offset();\n            // Set horizontal alignment\n            var currentLeft = logicOffset.left;\n            var groupLeft = $$1(this.dom.container).offset().left;\n            var shuffleLeft = currentLeft - groupLeft;\n            var newPos = currentLeft - shuffleLeft - $$1(this.dom.logicContainer).outerHeight(true);\n            $$1(this.dom.logicContainer).offset({ left: newPos });\n            // Set vertical alignment\n            var firstCrit = $$1(this.dom.logicContainer).next();\n            var currentTop = logicOffset.top;\n            var firstTop = $$1(firstCrit).offset().top;\n            var shuffleTop = currentTop - firstTop;\n            var newTop = currentTop - shuffleTop;\n            $$1(this.dom.logicContainer).offset({ top: newTop });\n            $$1(this.dom.clear).outerHeight($$1(this.dom.logicContainer).height());\n            this._setClearListener();\n        };\n        /**\n         * Sets listeners on the groups elements\n         */\n        Group.prototype.setListeners = function () {\n            var _this = this;\n            $$1(this.dom.add).unbind('click');\n            $$1(this.dom.add).on('click', function () {\n                // If this is the parent group then the logic button has not been added yet\n                if (!_this.s.isChild) {\n                    $$1(_this.dom.container).prepend(_this.dom.logicContainer);\n                }\n                _this.addCriteria();\n                $$1(_this.dom.container).trigger('dtsb-add');\n                _this.s.dt.state.save();\n                return false;\n            });\n            for (var _i = 0, _a = this.s.criteria; _i < _a.length; _i++) {\n                var crit = _a[_i];\n                crit.criteria.setListeners();\n            }\n            this._setClearListener();\n            this._setLogicListener();\n        };\n        /**\n         * Adds a criteria to the group\n         *\n         * @param crit Instance of Criteria to be added to the group\n         */\n        Group.prototype.addCriteria = function (crit, redraw) {\n            if (crit === void 0) { crit = null; }\n            if (redraw === void 0) { redraw = true; }\n            var index = crit === null ? this.s.criteria.length : crit.s.index;\n            var criteria = new Criteria(this.s.dt, this.s.opts, this.s.topGroup, index, this.s.depth);\n            // If a Criteria has been passed in then set the values to continue that\n            if (crit !== null) {\n                criteria.c = crit.c;\n                criteria.s = crit.s;\n                criteria.s.depth = this.s.depth;\n                criteria.classes = crit.classes;\n            }\n            criteria.populate();\n            var inserted = false;\n            for (var i = 0; i < this.s.criteria.length; i++) {\n                if (i === 0 && this.s.criteria[i].criteria.s.index > criteria.s.index) {\n                    // Add the node for the criteria at the start of the group\n                    $$1(criteria.getNode()).insertBefore(this.s.criteria[i].criteria.dom.container);\n                    inserted = true;\n                }\n                else if (i < this.s.criteria.length - 1 &&\n                    this.s.criteria[i].criteria.s.index < criteria.s.index &&\n                    this.s.criteria[i + 1].criteria.s.index > criteria.s.index) {\n                    // Add the node for the criteria in the correct location\n                    $$1(criteria.getNode()).insertAfter(this.s.criteria[i].criteria.dom.container);\n                    inserted = true;\n                }\n            }\n            if (!inserted) {\n                $$1(criteria.getNode()).insertBefore(this.dom.add);\n            }\n            // Add the details for this criteria to the array\n            this.s.criteria.push({\n                criteria: criteria,\n                index: index\n            });\n            this.s.criteria = this.s.criteria.sort(function (a, b) { return a.criteria.s.index - b.criteria.s.index; });\n            for (var _i = 0, _a = this.s.criteria; _i < _a.length; _i++) {\n                var opt = _a[_i];\n                if (opt.criteria instanceof Criteria) {\n                    opt.criteria.updateArrows(this.s.criteria.length > 1, redraw);\n                }\n            }\n            this._setCriteriaListeners(criteria);\n            criteria.setListeners();\n            this.setupLogic();\n        };\n        /**\n         * Checks the group to see if it has any filled criteria\n         */\n        Group.prototype.checkFilled = function () {\n            for (var _i = 0, _a = this.s.criteria; _i < _a.length; _i++) {\n                var crit = _a[_i];\n                if ((crit.criteria instanceof Criteria && crit.criteria.s.filled) ||\n                    (crit.criteria instanceof Group && crit.criteria.checkFilled())) {\n                    return true;\n                }\n            }\n            return false;\n        };\n        /**\n         * Gets the count for the number of criteria in this group and any sub groups\n         */\n        Group.prototype.count = function () {\n            var count = 0;\n            for (var _i = 0, _a = this.s.criteria; _i < _a.length; _i++) {\n                var crit = _a[_i];\n                if (crit.criteria instanceof Group) {\n                    count += crit.criteria.count();\n                }\n                else {\n                    count++;\n                }\n            }\n            return count;\n        };\n        /**\n         * Rebuilds a sub group that previously existed\n         *\n         * @param loadedGroup The details of a group within this group\n         */\n        Group.prototype._addPrevGroup = function (loadedGroup) {\n            var idx = this.s.criteria.length;\n            var group = new Group(this.s.dt, this.c, this.s.topGroup, idx, true, this.s.depth + 1);\n            // Add the new group to the criteria array\n            this.s.criteria.push({\n                criteria: group,\n                index: idx,\n                logic: group.s.logic\n            });\n            // Rebuild it with the previous conditions for that group\n            group.rebuild(loadedGroup);\n            this.s.criteria[idx].criteria = group;\n            $$1(this.s.topGroup).trigger('dtsb-redrawContents');\n            this._setGroupListeners(group);\n        };\n        /**\n         * Rebuilds a criteria of this group that previously existed\n         *\n         * @param loadedCriteria The details of a criteria within the group\n         */\n        Group.prototype._addPrevCriteria = function (loadedCriteria) {\n            var idx = this.s.criteria.length;\n            var criteria = new Criteria(this.s.dt, this.s.opts, this.s.topGroup, idx, this.s.depth);\n            criteria.populate();\n            // Add the new criteria to the criteria array\n            this.s.criteria.push({\n                criteria: criteria,\n                index: idx\n            });\n            // Rebuild it with the previous conditions for that criteria\n            criteria.rebuild(loadedCriteria);\n            this.s.criteria[idx].criteria = criteria;\n            $$1(this.s.topGroup).trigger('dtsb-redrawContents');\n        };\n        /**\n         * Checks And the criteria using AND logic\n         *\n         * @param rowData The row data to be checked against the search criteria\n         * @returns boolean The result of the AND search\n         */\n        Group.prototype._andSearch = function (rowData, rowIdx) {\n            // If there are no criteria then return true for this group\n            if (this.s.criteria.length === 0) {\n                return true;\n            }\n            for (var _i = 0, _a = this.s.criteria; _i < _a.length; _i++) {\n                var crit = _a[_i];\n                // If the criteria is not complete then skip it\n                if (crit.criteria instanceof Criteria && !crit.criteria.s.filled) {\n                    continue;\n                }\n                // Otherwise if a single one fails return false\n                else if (!crit.criteria.search(rowData, rowIdx)) {\n                    return false;\n                }\n            }\n            // If we get to here then everything has passed, so return true for the group\n            return true;\n        };\n        /**\n         * Checks And the criteria using OR logic\n         *\n         * @param rowData The row data to be checked against the search criteria\n         * @returns boolean The result of the OR search\n         */\n        Group.prototype._orSearch = function (rowData, rowIdx) {\n            // If there are no criteria in the group then return true\n            if (this.s.criteria.length === 0) {\n                return true;\n            }\n            // This will check to make sure that at least one criteria in the group is complete\n            var filledfound = false;\n            for (var _i = 0, _a = this.s.criteria; _i < _a.length; _i++) {\n                var crit = _a[_i];\n                if (crit.criteria instanceof Criteria && crit.criteria.s.filled) {\n                    // A completed criteria has been found so set the flag\n                    filledfound = true;\n                    // If the search passes then return true\n                    if (crit.criteria.search(rowData, rowIdx)) {\n                        return true;\n                    }\n                }\n                else if (crit.criteria instanceof Group && crit.criteria.checkFilled()) {\n                    filledfound = true;\n                    if (crit.criteria.search(rowData, rowIdx)) {\n                        return true;\n                    }\n                }\n            }\n            // If we get here we need to return the inverse of filledfound,\n            //  as if any have been found and we are here then none have passed\n            return !filledfound;\n        };\n        /**\n         * Removes a criteria from the group\n         *\n         * @param criteria The criteria instance to be removed\n         */\n        Group.prototype._removeCriteria = function (criteria, group) {\n            if (group === void 0) { group = false; }\n            // If removing a criteria and there is only then then just destroy the group\n            if (this.s.criteria.length <= 1 && this.s.isChild) {\n                this.destroy();\n            }\n            else {\n                // Otherwise splice the given criteria out and redo the indexes\n                var last = void 0;\n                for (var i = 0; i < this.s.criteria.length; i++) {\n                    if (this.s.criteria[i].index === criteria.s.index &&\n                        (!group || this.s.criteria[i].criteria instanceof Group)) {\n                        last = i;\n                    }\n                }\n                // We want to remove the last element with the desired index, as its replacement will be inserted before it\n                if (last !== undefined) {\n                    this.s.criteria.splice(last, 1);\n                }\n                for (var i = 0; i < this.s.criteria.length; i++) {\n                    this.s.criteria[i].index = i;\n                    this.s.criteria[i].criteria.s.index = i;\n                }\n            }\n        };\n        /**\n         * Sets the listeners in group for a criteria\n         *\n         * @param criteria The criteria for the listeners to be set on\n         */\n        Group.prototype._setCriteriaListeners = function (criteria) {\n            var _this = this;\n            $$1(criteria.dom[\"delete\"])\n                .unbind('click')\n                .on('click', function () {\n                _this._removeCriteria(criteria);\n                $$1(criteria.dom.container).remove();\n                for (var _i = 0, _a = _this.s.criteria; _i < _a.length; _i++) {\n                    var crit = _a[_i];\n                    if (crit.criteria instanceof Criteria) {\n                        crit.criteria.updateArrows(_this.s.criteria.length > 1);\n                    }\n                }\n                criteria.destroy();\n                _this.s.dt.draw();\n                $$1(_this.s.topGroup).trigger('dtsb-redrawContents');\n                $$1(_this.s.topGroup).trigger('dtsb-updateTitle');\n                return false;\n            });\n            $$1(criteria.dom.right)\n                .unbind('click')\n                .on('click', function () {\n                var idx = criteria.s.index;\n                var group = new Group(_this.s.dt, _this.s.opts, _this.s.topGroup, criteria.s.index, true, _this.s.depth + 1);\n                // Add the criteria that is to be moved to the new group\n                group.addCriteria(criteria);\n                // Update the details in the current groups criteria array\n                _this.s.criteria[idx].criteria = group;\n                _this.s.criteria[idx].logic = 'AND';\n                $$1(_this.s.topGroup).trigger('dtsb-redrawContents');\n                _this._setGroupListeners(group);\n                return false;\n            });\n            $$1(criteria.dom.left)\n                .unbind('click')\n                .on('click', function () {\n                _this.s.toDrop = new Criteria(_this.s.dt, _this.s.opts, _this.s.topGroup, criteria.s.index);\n                _this.s.toDrop.s = criteria.s;\n                _this.s.toDrop.c = criteria.c;\n                _this.s.toDrop.classes = criteria.classes;\n                _this.s.toDrop.populate();\n                // The dropCriteria event mutates the reference to the index so need to store it\n                var index = _this.s.toDrop.s.index;\n                $$1(_this.dom.container).trigger('dtsb-dropCriteria');\n                criteria.s.index = index;\n                _this._removeCriteria(criteria);\n                // By tracking the top level group we can directly trigger a redraw on it,\n                //  bubbling is also possible, but that is slow with deep levelled groups\n                $$1(_this.s.topGroup).trigger('dtsb-redrawContents');\n                _this.s.dt.draw();\n                return false;\n            });\n        };\n        /**\n         * Set's the listeners for the group clear button\n         */\n        Group.prototype._setClearListener = function () {\n            var _this = this;\n            $$1(this.dom.clear)\n                .unbind('click')\n                .on('click', function () {\n                if (!_this.s.isChild) {\n                    $$1(_this.dom.container).trigger('dtsb-clearContents');\n                    return false;\n                }\n                _this.destroy();\n                $$1(_this.s.topGroup).trigger('dtsb-updateTitle');\n                $$1(_this.s.topGroup).trigger('dtsb-redrawContents');\n                return false;\n            });\n        };\n        /**\n         * Sets listeners for sub groups of this group\n         *\n         * @param group The sub group that the listeners are to be set on\n         */\n        Group.prototype._setGroupListeners = function (group) {\n            var _this = this;\n            // Set listeners for the new group\n            $$1(group.dom.add)\n                .unbind('click')\n                .on('click', function () {\n                _this.setupLogic();\n                $$1(_this.dom.container).trigger('dtsb-add');\n                return false;\n            });\n            $$1(group.dom.container)\n                .unbind('dtsb-add')\n                .on('dtsb-add', function () {\n                _this.setupLogic();\n                $$1(_this.dom.container).trigger('dtsb-add');\n                return false;\n            });\n            $$1(group.dom.container)\n                .unbind('dtsb-destroy')\n                .on('dtsb-destroy', function () {\n                _this._removeCriteria(group, true);\n                $$1(group.dom.container).remove();\n                _this.setupLogic();\n                return false;\n            });\n            $$1(group.dom.container)\n                .unbind('dtsb-dropCriteria')\n                .on('dtsb-dropCriteria', function () {\n                var toDrop = group.s.toDrop;\n                toDrop.s.index = group.s.index;\n                toDrop.updateArrows(_this.s.criteria.length > 1, false);\n                _this.addCriteria(toDrop, false);\n                return false;\n            });\n            group.setListeners();\n        };\n        /**\n         * Sets up the Group instance, setting listeners and appending elements\n         */\n        Group.prototype._setup = function () {\n            this.setListeners();\n            $$1(this.dom.add).text(this.s.dt.i18n('searchBuilder.add', this.c.i18n.add));\n            $$1(this.dom.logic).text(this.c.logic === 'OR'\n                ? this.s.dt.i18n('searchBuilder.logicOr', this.c.i18n.logicOr)\n                : this.s.dt.i18n('searchBuilder.logicAnd', this.c.i18n.logicAnd));\n            this.s.logic = this.c.logic === 'OR' ? 'OR' : 'AND';\n            if (this.c.greyscale) {\n                $$1(this.dom.logic).addClass(this.classes.greyscale);\n            }\n            $$1(this.dom.logicContainer).append(this.dom.logic).append(this.dom.clear);\n            // Only append the logic button immediately if this is a sub group,\n            //  otherwise it will be prepended later when adding a criteria\n            if (this.s.isChild) {\n                $$1(this.dom.container).append(this.dom.logicContainer);\n            }\n            $$1(this.dom.container).append(this.dom.add);\n        };\n        /**\n         * Sets the listener for the logic button\n         */\n        Group.prototype._setLogicListener = function () {\n            var _this = this;\n            $$1(this.dom.logic)\n                .unbind('click')\n                .on('click', function () {\n                _this._toggleLogic();\n                _this.s.dt.draw();\n                for (var _i = 0, _a = _this.s.criteria; _i < _a.length; _i++) {\n                    var crit = _a[_i];\n                    crit.criteria.setListeners();\n                }\n            });\n        };\n        /**\n         * Toggles the logic for the group\n         */\n        Group.prototype._toggleLogic = function () {\n            if (this.s.logic === 'OR') {\n                this.s.logic = 'AND';\n                $$1(this.dom.logic).text(this.s.dt.i18n('searchBuilder.logicAnd', this.c.i18n.logicAnd));\n            }\n            else if (this.s.logic === 'AND') {\n                this.s.logic = 'OR';\n                $$1(this.dom.logic).text(this.s.dt.i18n('searchBuilder.logicOr', this.c.i18n.logicOr));\n            }\n        };\n        Group.version = '1.1.0';\n        Group.classes = {\n            add: 'dtsb-add',\n            button: 'dtsb-button',\n            clearGroup: 'dtsb-clearGroup',\n            greyscale: 'dtsb-greyscale',\n            group: 'dtsb-group',\n            inputButton: 'dtsb-iptbtn',\n            logic: 'dtsb-logic',\n            logicContainer: 'dtsb-logicContainer'\n        };\n        Group.defaults = {\n            columns: true,\n            conditions: {\n                'date': Criteria.dateConditions,\n                'html': Criteria.stringConditions,\n                'html-num': Criteria.numConditions,\n                'html-num-fmt': Criteria.numFmtConditions,\n                'luxon': Criteria.luxonDateConditions,\n                'moment': Criteria.momentDateConditions,\n                'num': Criteria.numConditions,\n                'num-fmt': Criteria.numFmtConditions,\n                'string': Criteria.stringConditions\n            },\n            depthLimit: false,\n            enterSearch: false,\n            filterChanged: undefined,\n            greyscale: false,\n            i18n: {\n                add: 'Add Condition',\n                button: {\n                    0: 'Search Builder',\n                    _: 'Search Builder (%d)'\n                },\n                clearAll: 'Clear All',\n                condition: 'Condition',\n                data: 'Data',\n                deleteTitle: 'Delete filtering rule',\n                leftTitle: 'Outdent criteria',\n                logicAnd: 'And',\n                logicOr: 'Or',\n                rightTitle: 'Indent criteria',\n                title: {\n                    0: 'Custom Search Builder',\n                    _: 'Custom Search Builder (%d)'\n                },\n                value: 'Value',\n                valueJoiner: 'and'\n            },\n            logic: 'AND',\n            orthogonal: {\n                display: 'display',\n                search: 'filter'\n            },\n            preDefined: false\n        };\n        return Group;\n    }());\n\n    var $;\n    var dataTable;\n    /**\n     * Sets the value of jQuery for use in the file\n     *\n     * @param jq the instance of jQuery to be set\n     */\n    function setJQuery(jq) {\n        $ = jq;\n        dataTable = jq.fn.DataTable;\n    }\n    /**\n     * SearchBuilder class for DataTables.\n     * Allows for complex search queries to be constructed and implemented on a DataTable\n     */\n    var SearchBuilder = /** @class */ (function () {\n        function SearchBuilder(builderSettings, opts) {\n            var _this = this;\n            // Check that the required version of DataTables is included\n            if (!dataTable || !dataTable.versionCheck || !dataTable.versionCheck('1.10.0')) {\n                throw new Error('SearchBuilder requires DataTables 1.10 or newer');\n            }\n            var table = new dataTable.Api(builderSettings);\n            this.classes = $.extend(true, {}, SearchBuilder.classes);\n            // Get options from user\n            this.c = $.extend(true, {}, SearchBuilder.defaults, opts);\n            this.dom = {\n                clearAll: $('<button type=\"button\">' + table.i18n('searchBuilder.clearAll', this.c.i18n.clearAll) + '</button>')\n                    .addClass(this.classes.clearAll)\n                    .addClass(this.classes.button)\n                    .attr('type', 'button'),\n                container: $('<div/>')\n                    .addClass(this.classes.container),\n                title: $('<div/>')\n                    .addClass(this.classes.title),\n                titleRow: $('<div/>')\n                    .addClass(this.classes.titleRow),\n                topGroup: undefined\n            };\n            this.s = {\n                dt: table,\n                opts: opts,\n                search: undefined,\n                topGroup: undefined\n            };\n            // If searchbuilder is already defined for this table then return\n            if (table.settings()[0]._searchBuilder !== undefined) {\n                return;\n            }\n            table.settings()[0]._searchBuilder = this;\n            // Run the remaining setup when the table is initialised\n            if (this.s.dt.settings()[0]._bInitComplete) {\n                this._setUp();\n            }\n            else {\n                table.one('init.dt', function () {\n                    _this._setUp();\n                });\n            }\n            return this;\n        }\n        /**\n         * Gets the details required to rebuild the SearchBuilder as it currently is\n         */\n        // eslint upset at empty object but that is what it is\n        // eslint-disable-next-line @typescript-eslint/ban-types\n        SearchBuilder.prototype.getDetails = function () {\n            return this.s.topGroup.getDetails();\n        };\n        /**\n         * Getter for the node of the container for the searchBuilder\n         *\n         * @returns JQuery<HTMLElement> the node of the container\n         */\n        SearchBuilder.prototype.getNode = function () {\n            return this.dom.container;\n        };\n        /**\n         * Rebuilds the SearchBuilder to a state that is provided\n         *\n         * @param details The details required to perform a rebuild\n         */\n        SearchBuilder.prototype.rebuild = function (details) {\n            $(this.dom.clearAll).click();\n            // If there are no details to rebuild then return\n            if (details === undefined || details === null) {\n                return this;\n            }\n            this.s.topGroup.rebuild(details);\n            this.s.dt.draw();\n            this.s.topGroup.setListeners();\n            return this;\n        };\n        /**\n         * Applies the defaults to preDefined criteria\n         *\n         * @param preDef the array of criteria to be processed.\n         */\n        SearchBuilder.prototype._applyPreDefDefaults = function (preDef) {\n            var _this = this;\n            if (preDef.criteria !== undefined && preDef.logic === undefined) {\n                preDef.logic = 'AND';\n            }\n            var _loop_1 = function (crit) {\n                // Apply the defaults to any further criteria\n                if (crit.criteria !== undefined) {\n                    crit = this_1._applyPreDefDefaults(crit);\n                }\n                else {\n                    this_1.s.dt.columns().every(function (index) {\n                        if (_this.s.dt.settings()[0].aoColumns[index].sTitle === crit.data) {\n                            crit.dataIdx = index;\n                        }\n                    });\n                }\n            };\n            var this_1 = this;\n            for (var _i = 0, _a = preDef.criteria; _i < _a.length; _i++) {\n                var crit = _a[_i];\n                _loop_1(crit);\n            }\n            return preDef;\n        };\n        /**\n         * Set's up the SearchBuilder\n         */\n        SearchBuilder.prototype._setUp = function (loadState) {\n            var _this = this;\n            if (loadState === void 0) { loadState = true; }\n            // Register an Api method for getting the column type\n            $.fn.DataTable.Api.registerPlural('columns().type()', 'column().type()', function (selector, opts) {\n                return this.iterator('column', function (settings, column) {\n                    return settings.aoColumns[column].sType;\n                }, 1);\n            });\n            // Check that DateTime is included, If not need to check if it could be used\n            if (!dataTable.DateTime) {\n                var types = this.s.dt.columns().type().toArray();\n                var columnIdxs = this.s.dt.columns().toArray();\n                // If the types are not yet set then draw to see if they can be retrieved then\n                if (types === undefined) {\n                    this.s.dt.draw();\n                    types = this.s.dt.columns().type().toArray();\n                }\n                for (var i = 0; i < columnIdxs[0].length; i++) {\n                    var column = columnIdxs[0][i];\n                    var type = types[column];\n                    if (\n                    // Check if this column can be filtered\n                    (this.c.columns === true ||\n                        (Array.isArray(this.c.columns) &&\n                            this.c.columns.indexOf(i) !== -1)) &&\n                        // Check if the type is one of the restricted types\n                        (type.indexOf('date') !== -1 ||\n                            type.indexOf('moment') !== -1 ||\n                            type.indexOf('luxon') !== -1)) {\n                        alert('SearchBuilder Requires DateTime when used with dates.');\n                        throw new Error('SearchBuilder requires DateTime');\n                    }\n                }\n            }\n            this.s.topGroup = new Group(this.s.dt, this.c, undefined);\n            this._setClearListener();\n            this.s.dt.on('stateSaveParams', function (e, settings, data) {\n                data.searchBuilder = _this.getDetails();\n                data.page = _this.s.dt.page();\n            });\n            this._build();\n            if (loadState) {\n                var loadedState = this.s.dt.state.loaded();\n                // If the loaded State is not null rebuild based on it for statesave\n                if (loadedState !== null && loadedState.searchBuilder !== undefined) {\n                    this.s.topGroup.rebuild(loadedState.searchBuilder);\n                    $(this.s.topGroup.dom.container).trigger('dtsb-redrawContents');\n                    this.s.dt.page(loadedState.page).draw('page');\n                    this.s.topGroup.setListeners();\n                }\n                // Otherwise load any predefined options\n                else if (this.c.preDefined !== false) {\n                    this.c.preDefined = this._applyPreDefDefaults(this.c.preDefined);\n                    this.rebuild(this.c.preDefined);\n                }\n            }\n            this._setEmptyListener();\n            this.s.dt.state.save();\n        };\n        /**\n         * Updates the title of the SearchBuilder\n         *\n         * @param count the number of filters in the SearchBuilder\n         */\n        SearchBuilder.prototype._updateTitle = function (count) {\n            $(this.dom.title).html(this.s.dt.i18n('searchBuilder.title', this.c.i18n.title, count));\n        };\n        /**\n         * Builds all of the dom elements together\n         */\n        SearchBuilder.prototype._build = function () {\n            var _this = this;\n            // Empty and setup the container\n            $(this.dom.clearAll).remove();\n            $(this.dom.container).empty();\n            var count = this.s.topGroup.count();\n            this._updateTitle(count);\n            $(this.dom.titleRow).append(this.dom.title);\n            $(this.dom.container).append(this.dom.titleRow);\n            this.dom.topGroup = this.s.topGroup.getNode();\n            $(this.dom.container).append(this.dom.topGroup);\n            this._setRedrawListener();\n            var tableNode = this.s.dt.table(0).node();\n            if ($.fn.dataTable.ext.search.indexOf(this.s.search) === -1) {\n                // Custom search function for SearchBuilder\n                this.s.search = function (settings, searchData, dataIndex, origData) {\n                    if (settings.nTable !== tableNode) {\n                        return true;\n                    }\n                    return _this.s.topGroup.search(searchData, dataIndex);\n                };\n                // Add SearchBuilder search function to the dataTables search array\n                $.fn.dataTable.ext.search.push(this.s.search);\n            }\n            this.s.dt.on('destroy.dt', function () {\n                $(_this.dom.container).remove();\n                $(_this.dom.clearAll).remove();\n                var searchIdx = $.fn.dataTable.ext.search.indexOf(_this.s.search);\n                while (searchIdx !== -1) {\n                    $.fn.dataTable.ext.search.splice(searchIdx, 1);\n                    searchIdx = $.fn.dataTable.ext.search.indexOf(_this.s.search);\n                }\n            });\n        };\n        /**\n         * Checks if the clearAll button should be added or not\n         */\n        SearchBuilder.prototype._checkClear = function () {\n            if (this.s.topGroup.s.criteria.length > 0) {\n                $(this.dom.clearAll).insertAfter(this.dom.title);\n                this._setClearListener();\n            }\n            else {\n                $(this.dom.clearAll).remove();\n            }\n        };\n        /**\n         * Update the count in the title/button\n         *\n         * @param count Number of filters applied\n         */\n        SearchBuilder.prototype._filterChanged = function (count) {\n            var fn = this.c.filterChanged;\n            if (typeof fn === 'function') {\n                fn(count, this.s.dt.i18n('searchBuilder.button', this.c.i18n.button, count));\n            }\n        };\n        /**\n         * Set the listener for the clear button\n         */\n        SearchBuilder.prototype._setClearListener = function () {\n            var _this = this;\n            $(this.dom.clearAll).unbind('click');\n            $(this.dom.clearAll).on('click', function () {\n                _this.s.topGroup = new Group(_this.s.dt, _this.c, undefined);\n                _this._build();\n                _this.s.dt.draw();\n                _this.s.topGroup.setListeners();\n                $(_this.dom.clearAll).remove();\n                _this._setEmptyListener();\n                _this._filterChanged(0);\n                return false;\n            });\n        };\n        /**\n         * Set the listener for the Redraw event\n         */\n        SearchBuilder.prototype._setRedrawListener = function () {\n            var _this = this;\n            $(this.s.topGroup.dom.container).unbind('dtsb-redrawContents');\n            $(this.s.topGroup.dom.container).on('dtsb-redrawContents', function () {\n                _this._checkClear();\n                _this.s.topGroup.redrawContents();\n                _this.s.topGroup.setupLogic();\n                _this._setEmptyListener();\n                var count = _this.s.topGroup.count();\n                _this._updateTitle(count);\n                _this._filterChanged(count);\n                _this.s.dt.state.save();\n            });\n            $(this.s.topGroup.dom.container).unbind('dtsb-redrawLogic');\n            $(this.s.topGroup.dom.container).on('dtsb-redrawLogic', function () {\n                _this.s.topGroup.redrawLogic();\n                var count = _this.s.topGroup.count();\n                _this._updateTitle(count);\n                _this._filterChanged(count);\n            });\n            $(this.s.topGroup.dom.container).on('dtsb-add', function () {\n                var count = _this.s.topGroup.count();\n                _this._updateTitle(count);\n                _this._filterChanged(count);\n            });\n            $(this.s.dt).on('postEdit postCreate postRemove', function () {\n                _this.s.topGroup.redrawContents();\n            });\n            $(this.s.topGroup.dom.container).unbind('dtsb-clearContents');\n            $(this.s.topGroup.dom.container).on('dtsb-clearContents', function () {\n                _this._setUp(false);\n                _this._filterChanged(0);\n                _this.s.dt.draw();\n            });\n            $(this.s.topGroup.dom.container).on('dtsb-updateTitle', function () {\n                var count = _this.s.topGroup.count();\n                _this._updateTitle(count);\n                _this._filterChanged(count);\n            });\n        };\n        /**\n         * Sets listeners to check whether clearAll should be added or removed\n         */\n        SearchBuilder.prototype._setEmptyListener = function () {\n            var _this = this;\n            $(this.s.topGroup.dom.add).on('click', function () {\n                _this._checkClear();\n            });\n            $(this.s.topGroup.dom.container).on('dtsb-destroy', function () {\n                $(_this.dom.clearAll).remove();\n            });\n        };\n        SearchBuilder.version = '1.1.0';\n        SearchBuilder.classes = {\n            button: 'dtsb-button',\n            clearAll: 'dtsb-clearAll',\n            container: 'dtsb-searchBuilder',\n            inputButton: 'dtsb-iptbtn',\n            title: 'dtsb-title',\n            titleRow: 'dtsb-titleRow'\n        };\n        SearchBuilder.defaults = {\n            columns: true,\n            conditions: {\n                'date': Criteria.dateConditions,\n                'html': Criteria.stringConditions,\n                'html-num': Criteria.numConditions,\n                'html-num-fmt': Criteria.numFmtConditions,\n                'luxon': Criteria.luxonDateConditions,\n                'moment': Criteria.momentDateConditions,\n                'num': Criteria.numConditions,\n                'num-fmt': Criteria.numFmtConditions,\n                'string': Criteria.stringConditions\n            },\n            depthLimit: false,\n            enterSearch: false,\n            filterChanged: undefined,\n            greyscale: false,\n            i18n: {\n                add: 'Add Condition',\n                button: {\n                    0: 'Search Builder',\n                    _: 'Search Builder (%d)'\n                },\n                clearAll: 'Clear All',\n                condition: 'Condition',\n                conditions: {\n                    array: {\n                        contains: 'Contains',\n                        empty: 'Empty',\n                        equals: 'Equals',\n                        not: 'Not',\n                        notEmpty: 'Not Empty',\n                        without: 'Without'\n                    },\n                    date: {\n                        after: 'After',\n                        before: 'Before',\n                        between: 'Between',\n                        empty: 'Empty',\n                        equals: 'Equals',\n                        not: 'Not',\n                        notBetween: 'Not Between',\n                        notEmpty: 'Not Empty'\n                    },\n                    // eslint-disable-next-line id-blacklist\n                    number: {\n                        between: 'Between',\n                        empty: 'Empty',\n                        equals: 'Equals',\n                        gt: 'Greater Than',\n                        gte: 'Greater Than Equal To',\n                        lt: 'Less Than',\n                        lte: 'Less Than Equal To',\n                        not: 'Not',\n                        notBetween: 'Not Between',\n                        notEmpty: 'Not Empty'\n                    },\n                    // eslint-disable-next-line id-blacklist\n                    string: {\n                        contains: 'Contains',\n                        empty: 'Empty',\n                        endsWith: 'Ends With',\n                        equals: 'Equals',\n                        not: 'Not',\n                        notEmpty: 'Not Empty',\n                        startsWith: 'Starts With'\n                    }\n                },\n                data: 'Data',\n                deleteTitle: 'Delete filtering rule',\n                leftTitle: 'Outdent criteria',\n                logicAnd: 'And',\n                logicOr: 'Or',\n                rightTitle: 'Indent criteria',\n                title: {\n                    0: 'Custom Search Builder',\n                    _: 'Custom Search Builder (%d)'\n                },\n                value: 'Value',\n                valueJoiner: 'and'\n            },\n            logic: 'AND',\n            orthogonal: {\n                display: 'display',\n                search: 'filter'\n            },\n            preDefined: false\n        };\n        return SearchBuilder;\n    }());\n\n    /*! SearchBuilder 1.0.1\n     * Â©2020 SpryMedia Ltd - datatables.net/license/mit\n     */\n    // DataTables extensions common UMD. Note that this allows for AMD, CommonJS\n    // (with window and jQuery being allowed as parameters to the returned\n    // function) or just default browser loading.\n    (function (factory) {\n        if (typeof define === 'function' && define.amd) {\n            // AMD\n            define(['jquery', 'datatables.net'], function ($) {\n                return factory($, window, document);\n            });\n        }\n        else if (typeof exports === 'object') {\n            // CommonJS\n            module.exports = function (root, $) {\n                if (!root) {\n                    root = window;\n                }\n                if (!$ || !$.fn.dataTable) {\n                    // eslint-disable-next-line @typescript-eslint/no-var-requires\n                    $ = require('datatables.net')(root, $).$;\n                }\n                return factory($, root, root.document);\n            };\n        }\n        else {\n            // Browser - assume jQuery has already been loaded\n            factory(window.jQuery, window, document);\n        }\n    }(function ($, window, document) {\n        setJQuery($);\n        setJQuery$1($);\n        setJQuery$2($);\n        var dataTable = $.fn.dataTable;\n        $.fn.dataTable.SearchBuilder = SearchBuilder;\n        $.fn.DataTable.SearchBuilder = SearchBuilder;\n        $.fn.dataTable.Group = Group;\n        $.fn.DataTable.Group = Group;\n        $.fn.dataTable.Criteria = Criteria;\n        $.fn.DataTable.Criteria = Criteria;\n        var apiRegister = $.fn.dataTable.Api.register;\n        // Set up object for plugins\n        $.fn.dataTable.ext.searchBuilder = {\n            conditions: {}\n        };\n        $.fn.dataTable.ext.buttons.searchBuilder = {\n            action: function (e, dt, node, config) {\n                e.stopPropagation();\n                this.popover(config._searchBuilder.getNode(), {\n                    align: 'dt-container'\n                });\n                // Need to redraw the contents to calculate the correct positions for the elements\n                if (config._searchBuilder.s.topGroup !== undefined) {\n                    config._searchBuilder.s.topGroup.dom.container.trigger('dtsb-redrawContents');\n                }\n            },\n            config: {},\n            init: function (dt, node, config) {\n                var sb = new $.fn.dataTable.SearchBuilder(dt, $.extend({\n                    filterChanged: function (count, text) {\n                        dt.button(node).text(text);\n                    }\n                }, config.config));\n                dt.button(node).text(config.text || dt.i18n('searchBuilder.button', sb.c.i18n.button, 0));\n                config._searchBuilder = sb;\n            },\n            text: null\n        };\n        apiRegister('searchBuilder.getDetails()', function () {\n            var ctx = this.context[0];\n            // If SearchBuilder has not been initialised on this instance then return\n            return ctx._searchBuilder ?\n                ctx._searchBuilder.getDetails() :\n                null;\n        });\n        apiRegister('searchBuilder.rebuild()', function (details) {\n            var ctx = this.context[0];\n            // If SearchBuilder has not been initialised on this instance then return\n            if (ctx._searchBuilder === undefined) {\n                return null;\n            }\n            ctx._searchBuilder.rebuild(details);\n            return this;\n        });\n        apiRegister('searchBuilder.container()', function () {\n            var ctx = this.context[0];\n            // If SearchBuilder has not been initialised on this instance then return\n            return ctx._searchBuilder ?\n                ctx._searchBuilder.getNode() :\n                null;\n        });\n        /**\n         * Init function for SearchBuilder\n         *\n         * @param settings the settings to be applied\n         * @param options the options for SearchBuilder\n         * @returns JQUERY<HTMLElement> Returns the node of the SearchBuilder\n         */\n        function _init(settings, options) {\n            var api = new dataTable.Api(settings);\n            var opts = options\n                ? options\n                : api.init().searchBuilder || dataTable.defaults.searchBuilder;\n            var searchBuilder = new SearchBuilder(api, opts);\n            var node = searchBuilder.getNode();\n            return node;\n        }\n        // Attach a listener to the document which listens for DataTables initialisation\n        // events so we can automatically initialise\n        $(document).on('preInit.dt.dtsp', function (e, settings, json) {\n            if (e.namespace !== 'dt') {\n                return;\n            }\n            if (settings.oInit.searchBuilder ||\n                dataTable.defaults.searchBuilder) {\n                if (!settings._searchBuilder) {\n                    _init(settings);\n                }\n            }\n        });\n        // DataTables `dom` feature option\n        dataTable.ext.feature.push({\n            cFeature: 'Q',\n            fnInit: _init\n        });\n        // DataTables 2 layout feature\n        if (dataTable.ext.features) {\n            dataTable.ext.features.register('searchBuilder', _init);\n        }\n    }));\n\n}());\n"]},"metadata":{},"sourceType":"script"}